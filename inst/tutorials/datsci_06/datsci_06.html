<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Rafael Irizarry &amp; Fatih Uenal" />


<meta name="progressive" content="true" />
<meta name="allow-skip" content="false" />

<title>datsci_06: Wrangling</title>


<!-- highlightjs -->
<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>

<!-- taken from https://github.com/rstudio/rmarkdown/blob/67b7f5fc779e4cfdfd0f021d3d7745b6b6e17149/inst/rmd/h/default.html#L296-L362 -->
<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>
<!-- end tabsets -->


<link rel="stylesheet" href="css/datsci_style.css" type="text/css" />

</head>

<body>



<div class="pageContent band">
<div class="bandContent page">

<div class="topics">

<html lang="en">
<div id="section-datsci_06-wrangling" class="section level1">
<h1>datsci_06: Wrangling</h1>
<div id="section-introduction-and-welcome" class="section level2">
<h2>Introduction and Welcome!</h2>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:100px;height:100px;" class = "img_left"></p>
<p><strong>Usage:</strong> This tutorial accompanies the textbook <a href="https://rafalab.github.io/dsbook/">Introduction to Data Science</a> by <a href="http://rafalab.github.io/pages/about.html">Prof Rafael Irizarry</a>. It contains material from the textbook which is offered under a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)</a>.</p>
</div>
<div id="section-welcome-to-data-science-wrangling" class="section level3">
<h3>Welcome to <em>Data Science: Wrangling</em>!</h3>
<p>We’re excited to have you join us in this course, which is designed to teach you data wrangling, the process of converting raw data to the formats needed for further analysis.</p>
<p>This is the <strong>sixth</strong> in a series of courses in the Introduction to Data Science program, a series of courses that prepare you to do data analysis in <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>, from simple computations to machine learning. We assume that you have taken the preceding five courses in the series or have equivalent knowledge of R programming. We recommend that you complete the first five courses in the series (<em>Data Science: <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg> Basics</em> (datsci_01), <em>Data Science: Visualization</em> (datsci_02), <em>Data Science: Probability</em> (datsci_03), <em>Data Science: Inference and Modeling</em> (datsci_04), and <em>Data Science: Productivity Tools</em> (datsci_05)) before taking this course.</p>
<p>Using a combination of guided introduction lectures and more independent in-depth exploration, you will get to practice your new <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg> skills on real-life applications.</p>
<p>In this course, we cover several standard steps of the data wrangling process like importing data into <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>, tidying data, string processing, HTML parsing, working with dates and times, and text mining. Rarely are all these wrangling steps necessary in a single analysis, but a data scientist will likely face them all at some point.</p>
<p>In a data science project, data are often not easily accessible. It’s more likely for the data to be in a file, a database, or extracted from documents such as web pages, tweets, or PDFs. In these cases, the first step is to import the data into <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg> and tidy the data, using the tidyverse package. The steps that convert data from its raw form to the tidy form are called data wrangling.</p>
<p>The class notes for this course series can be found in Professor Irizarry’s freely available <a href="https://rafalab.github.io/dsbook/">Introduction to Data Science</a>. The textbook is also freely available in PDF format on <a href="https://leanpub.com/datasciencebook">Leanpub</a>. This course corresponds to textbook <a href="https://rafalab.github.io/dsbook/introduction-to-data-wrangling.html">Chapter 20</a> through <a href="https://rafalab.github.io/dsbook/text-mining.html">Chapter 26</a>.</p>
</div>
<div id="section-in-this-course-you-will-learn" class="section level3">
<h3>In this course, you will learn:</h3>
<ul>
<li><p>How to import data into <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg> from different file formats</p></li>
<li><p>How to scrape data from the web</p></li>
<li><p>How to tidy data using the tidyverse to better facilitate analysis</p></li>
<li><p>How to process strings with regular expressions (regex)</p></li>
<li><p>How to wrangle data using dplyr</p></li>
<li><p>How to work with dates and times as file formats</p></li>
<li><p>How to mine text</p></li>
</ul>
</div>
<div id="section-course-overview" class="section level3">
<h3>Course overview</h3>
<p><strong>Section 1:</strong> Data Import</p>
<ul>
<li>You will learn how to import data from different sources.</li>
</ul>
<p><strong>Section 2:</strong> Tidy Data</p>
<ul>
<li>You will learn the first pieces of converting data into a tidy format.</li>
</ul>
<p><strong>Section 3:</strong> String Processing</p>
<ul>
<li>You will learn how to process strings using regular expressions (regex).</li>
</ul>
<p><strong>Section 4:</strong> Dates, Times, and Text Mining</p>
<ul>
<li>You will learn how to work with dates and times as file formats and how to mine text.</li>
</ul>
</div>
<div id="section-course-instructor" class="section level3">
<h3>Course Instructor</h3>
<div class="infobox">
<p><img src="images/photo2014.jpg" alt="Dr Fatih Uenal." style="width:150px;height:200px;" class = "img_left" ></p>
<p><strong>Fatih Uenal</strong> is currenlty a Visitng Postdoctoral Researcher at the University of Cambridge, Department of Psychology, where he conducts research on the psychology of anthropocentrism and social and ecological dominance. Prior to his current position, he has worked as a postdoc at <a href="https://scholar.harvard.edu/fatih-uenal/home">Harvard University</a>. Together with <a href="http://rafalab.github.io/pages/about.html">Prof Rafael Irizarry</a> he programmed this interactive tutorial based on the the textbook <a href="https://rafalab.github.io/dsbook/"><em>Introduction to Data Science</em></a>. This interactive tutorial is developed using the <code>learnr</code> package. It has a general social scientists audience in mind and is suited for undergrad and graduate levels of study.</p>
<p>Webpage: <a href="https://scholar.harvard.edu/fatih-uenal/home" class="uri">https://scholar.harvard.edu/fatih-uenal/home</a></p>
</div>
<hr />
</div>
<div id="section-essential-course-information" class="section level3">
<h3>Essential Course Information</h3>
<div id="section-course-objectives" class="section level4">
<h4><strong>Course Objectives</strong></h4>
<p>“Data science” is a catch-all term used to describe the practice of working with and analyzing messy data sources to draw meaningful conclusions using techniques developed by computer scientists and computational statisticians. The purpose of this course is to give students who are training as quantitative social scientists a broad introduction to this skillset via the statistical programming language, <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>. You will learn how to conduct many statistical analyses such as univariate statistics (e.g., ANOVA, correlation, regression) in <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg> that you may have already done in SPSS, Excel, or another such program. Additionally, we will build on this foundation to explore new skillsets uncommon in the social sciences, such as natural language processing, automated data curation, and machine learning.</p>
<p>At the end of this course you will be able to:</p>
<ul>
<li><p>To answer research questions in Social Sciences (e.g., Psychology) with data</p></li>
<li><p>Understand the basics of research designs in Social Sciences, and how they relate to data-analysis strategies</p></li>
<li><p>Develop an intuitive, practical, and conceptual understanding of strategies for asking and answering questions with data</p></li>
<li><p>To use <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>, a free and open-source statistics software program.</p></li>
<li><p>Develop a basic understanding of frequently used Data Science Techniques.</p></li>
<li><p>Practice your newly acquired skills with interesting, interactive, and fun projects.</p></li>
</ul>
<p><strong>NOTE</strong>: The schedule and procedures described in this syllabus are subject to change depending on specific needs and requirements. You will always be notified of changes on the homepage (see “last update”).</p>
</div>
<div id="section-course-structure" class="section level4">
<h4><strong>Course Structure</strong></h4>
<p>This is the first module in a series of a 8 week-intensive course. and I suggest that you devote approx 10 hours a week to learning <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>, or if you are teaching graduate students, I’d recommend adopting the schedule below, which is designed for an intense but doable semester-long course, one module per week. It is intended to take the average graduate student roughly 10 hours per week to complete all required tasks.However, some number of students will find programming to be more challenging and may take up to 15 hours per week. Some will breeze through the material in 5.</p>
</div>
<div id="section-grading" class="section level4">
<h4><strong>Grading</strong></h4>
<p>Each Monday, lessons will be assigned from datacamp.com. Some of these lessons will be complete DataCamp courses, and others will be specific modules of courses. This will all be managed by assigning content to your (free) DataCamp account. The amount of content assigned will vary between one and two courses of content. DataCamp considers a course to be roughly 4 hours of lessons, which includes practice time. Realistically, the time you need will depend upon how intuitive you find <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg> to be. For students already familiar with other programming languages and those with previous <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg> experience, “8 hours” of courses is realistically closer to 2 hours; for complete novices that also find the material difficult, 8 hours is a realistic estimate. It is strongly recommended that you stretch out DataCamp lessons across the assignment period, for example, allocating 1 hour each day. You will gain the most by treating this as a foreign language immersion course by using R every day, including for your own research. Remember that you can always go to the <strong>Slack Group</strong> for help.</p>
</div>
<div id="section-passing-rate" class="section level4">
<h4><strong>Passing Rate</strong></h4>
<p>The passing rate is 70%.</p>
</div>
</div>
<div id="section-pre-course-survey" class="section level3">
<h3>Pre-Course Survey</h3>
<p>Insert Survey Link here</p>
<p><em>If you cannot see the survey above, click this link to access it in a new window.</em></p>
</div>
</div>
<div id="section-section-1-data-import" class="section level2">
<h2>Section 1: Data Import</h2>
<p>In the <strong>Data Import</strong> section, you will learn how import data into <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>.</p>
<p>After completing this section, you will be able to:</p>
<ul>
<li><p><strong>Import</strong> data from spreadsheets.</p></li>
<li><p>Identify and set your <strong>working directory</strong> and specify the <strong>path</strong> to a file.</p></li>
<li><p>Use the <strong>readr</strong> and <strong>readxl</strong> packages to import spreadsheets.</p></li>
<li><p>Use <strong>R-base functions</strong> to import spreadsheets.</p></li>
<li><p><strong>Download</strong> files from the internet using <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>.</p></li>
</ul>
<p>There is a comprehension check at the end of the section.</p>
<p>We encourage you to use <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg> to interactively test out your answers and further your own learning.</p>
<div id="section-introduction-to-wrangling" class="section level3">
<h3>Introduction to Wrangling</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/introduction-to-data-wrangling.html">textbook section - 20 Introduction to data wrangling</a>.</p>
</div>
<p>The datasets used in this course have been made available to you as R objects, specifically as data frames. The US murders data, the reported heights data, and the Gapminder data were all data frames. These datasets come included in the <strong>dslabs</strong> package and we loaded them using the <code>data</code> function. Furthermore, we have made the data available in what is referred to as <code>tidy</code> form. The tidyverse packages and functions assume that the data is <code>tidy</code> and this assumption is a big part of the reason these packages work so well together.</p>
<p>However, very rarely in a data science project is data easily available as part of a package. We did quite a bit of work “behind the scenes” to get the original raw data into the <em>tidy</em> tables you worked with. Much more typical is for the data to be in a file, a database, or extracted from a document, including web pages, tweets, or PDFs. In these cases, the first step is to import the data into R and, when using the <strong>tidyverse</strong>, tidy the data. This initial step in the data analysis process usually involves several, often complicated, steps to convert data from its raw form to the <em>tidy</em> form that greatly facilitates the rest of the analysis. We refer to this process as <code>data wrangling</code>.</p>
<p>Here we cover several common steps of the data wrangling process including tidying data, string processing, html parsing, working with dates and times, and text mining. Rarely are all these wrangling steps necessary in a single analysis, but data scientists will likely face them all at some point. Some of the examples we use to demonstrate data wrangling techniques are based on the work we did to convert raw data into the tidy datasets provided by the <strong>dslabs</strong> package and used in the textbook as examples.</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>The first step in data analysis is importing, tidying and cleaning the data. This is the process of data wrangling.</p></li>
<li><p>In this course, we cover several common steps of the data wrangling process: tidying data, string processing, html parsing, working with dates and times, and text mining.</p></li>
</ul>
</div>
</div>
<div id="section-importing-spreadsheets" class="section level3">
<h3>Importing Spreadsheets</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/importing-data.html">textbook section - 5 Importing data</a>.</p>
</div>
<p>We have been using data sets already stored as R objects. A data scientist will rarely have such luck and will have to import data into R from either a file, a database, or other sources. Currently, one of the most common ways of storing and sharing data for analysis is through electronic spreadsheets. A spreadsheet stores data in rows and columns. It is basically a file version of a data frame. When saving such a table to a computer file, one needs a way to define when a new row or column ends and the other begins. This in turn defines the cells in which single values are stored.</p>
<p>When creating spreadsheets with text files, like the ones created with a simple text editor, a new row is defined with return and columns are separated with some predefined special character. The most common characters are comma (<code>,</code>), semicolon (<code>;</code>), space ( ), and tab (a preset number of spaces or <code>\t</code>). Here is an example of what a comma separated file looks like if we open it with a basic text editor:</p>
<p><img src="images/csv-file.png" width="700px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /></p>
<p>The first row contains column names rather than data. We call this a <em>header</em>, and when we read-in data from a spreadsheet it is important to know if the file has a header or not. Most reading functions assume there is a header. To know if the file has a header, it helps to look at the file before trying to read it. This can be done with a text editor or with RStudio. In RStudio, we can do this by either opening the file in the editor or navigating to the file location, double clicking on the file, and hitting <em>View File</em>.</p>
<p>However, not all spreadsheet files are in a text format. Google Sheets, which are rendered on a browser, are an example. Another example is the proprietary format used by Microsoft Excel. These can’t be viewed with a text editor. Despite this, due to the widespread use of Microsoft Excel software, this format is widely used.</p>
<p>We start this section by describing the difference between text (ASCII), Unicode, and binary files and how this affects how we import them. We then explain the concepts of file paths and working directories, which are essential to understand how to import data effectively. We then introduce the <strong>readr</strong> and <strong>readxl</strong> package and the functions that are available to import spreadsheets into R. Finally, we provide some recommendations on how to store and organize data in files. More complex challenges such as extracting data from web pages or PDF documents are left for the Data Wrangling part of the textbook.</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>Many datasets are stored in spreadsheets. A spreadsheet is essentially a file version of a data frame with rows and columns.</p></li>
<li><p>Spreadsheets have rows separated by returns and columns separated by a delimiter. The most common delimiters are comma, semicolon, white space and tab.</p></li>
<li><p>Many spreadsheets are raw text files and can be read with any basic text editor. However, some formats are proprietary and cannot be read with a text editor, such as Microsoft Excel files (.xls).</p></li>
<li><p>Most import functions assume that the first row of a spreadsheet file is a header with column names. To know if the file has a header, it helps to look at the file with a text editor before trying to import it.</p></li>
</ul>
</div>
</div>
<div id="section-paths-and-the-working-directory" class="section level3">
<h3>Paths and the Working Directory</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/importing-data.html#paths-and-the-working-directory">textbook section - 5.1 Paths and the working directory</a>.</p>
</div>
<p>The first step when importing data from a spreadsheet is to locate the file containing the data. Although we do not recommend it, you can use an approach similar to what you do to open files in Microsoft Excel by clicking on the RStudio “File” menu, clicking “Import Dataset”, then clicking through folders until you find the file. We want to be able to write code rather than use the point-and-click approach. The keys and concepts we need to learn to do this are described in detail in the Productivity Tools part of this textbook. Here we provide an overview of the very basics.</p>
<p>The main challenge in this first step is that we need to let the R functions doing the importing know where to look for the file containing the data. The simplest way to do this is to have a copy of the file in the folder in which the importing functions look by default. Once we do this, all we have to supply to the importing function is the filename.</p>
<p>A spreadsheet containing the US murders data is included as part of the <strong>dslabs</strong> package. Finding this file is not straightforward, but the following lines of code copy the file to the folder in which R looks in by default. We explain how these lines work below.</p>
<pre class="r"><code>filename &lt;- &quot;murders.csv&quot;
dir &lt;- system.file(&quot;extdata&quot;, package = &quot;dslabs&quot;) 
fullpath &lt;- file.path(dir, filename)
file.copy(fullpath, &quot;murders.csv&quot;)</code></pre>
<p>This code does not read the data into R, it just copies a file. But once the file is copied, we can import the data with a simple line of code. Here we use the <code>read_csv</code> function from the <strong>readr</strong> package, which is part of the tidyverse.</p>
<pre class="r"><code>library(tidyverse)
dat &lt;- read_csv(filename)</code></pre>
<p>The data is imported and stored in <code>dat</code>. The rest of this section defines some important concepts and provides an overview of how we write code that tells R how to find the files we want to import. The textbook <a href="https://rafalab.github.io/dsbook/unix.html">(Section - 38 Organizing with Unix)</a> provides more details on this topic.</p>
</div>
<div id="section-the-filesystem" class="section level3">
<h3>The filesystem</h3>
<p>You can think of your computer’s filesystem as a series of nested folders, each containing other folders and files. Data scientists refer to folders as <em>directories</em>. We refer to the folder that contains all other folders as the <em>root directory</em>. We refer to the directory in which we are currently located as the <em>working directory</em>. The working directory therefore changes as you move through folders: think of it as your current location.</p>
</div>
<div id="section-relative-and-full-paths" class="section level3">
<h3>Relative and full paths</h3>
<p>The <em>path</em> of a file is a list of directory names that can be thought of as instructions on what folders to click on, and in what order, to find the file. If these instructions are for finding the file from the root directory we refer to it as the <em>full path</em>. If the instructions are for finding the file starting in the working directory we refer to it as a <em>relative path</em>. The textbook <a href="https://rafalab.github.io/dsbook/unix.html#filesystem">(Section - 38.3 The filesystem)</a> provides more details on this topic.</p>
<p>To see an example of a full path on your system type the following:</p>
<pre class="r"><code>system.file(package = &quot;dslabs&quot;)</code></pre>
<p>The strings separated by slashes are the directory names. The first slash represents the root directory and we know this is a full path because it starts with a slash. If the first directory name appears without a slash in front, then the path is assumed to be relative. We can use the function <code>list.files</code> to see examples of relative paths.</p>
<pre class="r"><code>dir &lt;- system.file(package = &quot;dslabs&quot;)
list.files(path = dir)</code></pre>
<pre><code>##  [1] &quot;data&quot;        &quot;DESCRIPTION&quot; &quot;extdata&quot;     &quot;help&quot;        &quot;html&quot;       
##  [6] &quot;INDEX&quot;       &quot;Meta&quot;        &quot;NAMESPACE&quot;   &quot;R&quot;           &quot;script&quot;</code></pre>
<p>These relative paths give us the location of the files or directories if we start in the directory with the full path. For example, the full path to the <code>help</code> directory in the example above is <code>/Library/Frameworks/R.framework/Versions/3.5/Resources/library/dslabs/help</code>.</p>
<p><strong>Note</strong>: You will probably not make much use of the <code>system.file</code> function in your day-to-day data analysis work. We introduce it in this section because it facilitates the sharing of spreadsheets by including them in the <strong>dslabs</strong> package. You will rarely have the luxury of data being included in packages you already have installed. However, you will frequently need to navigate full and relative paths and import spreadsheet formatted data.</p>
</div>
<div id="section-the-working-directory" class="section level3">
<h3>The working directory</h3>
<p>We highly recommend only writing relative paths in your code. The reason is that full paths are unique to your computer and you want your code to be portable. You can get the full path of your working directory without writing out explicitly by using the <code>getwd</code> function.</p>
<pre class="r"><code>wd &lt;- getwd()</code></pre>
<p>If you need to change your working directory, you can use the function <code>setwd</code> or you can change it through RStudio by clicking on “Session”.</p>
</div>
<div id="section-generating-path-names" class="section level3">
<h3>Generating path names</h3>
<p>Another example of obtaining a full path without writing out explicitly was given above when we created the object <code>fullpath</code> like this:</p>
<pre class="r"><code>filename &lt;- &quot;murders.csv&quot;
dir &lt;- system.file(&quot;extdata&quot;, package = &quot;dslabs&quot;) 
fullpath &lt;- file.path(dir, filename)</code></pre>
<p>The function <code>system.file</code> provides the full path of the folder containing all the files and directories relevant to the package specified by the <code>package</code> argument. By exploring the directories in <code>dir</code> we find that the <code>extdata</code> contains the file we want:</p>
<pre class="r"><code>dir &lt;- system.file(package = &quot;dslabs&quot;) 
filename %in% list.files(file.path(dir, &quot;extdata&quot;)) </code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>The <code>system.file</code> function permits us to provide a subdirectory as a first argument, so we can obtain the fullpath of the <code>extdata</code> directory like this:</p>
<pre class="r"><code>dir &lt;- system.file(&quot;extdata&quot;, package = &quot;dslabs&quot;) </code></pre>
<p>The function <code>file.path</code> is used to combine directory names to produce the full path of the file we want to import.</p>
<pre class="r"><code>fullpath &lt;- file.path(dir, filename)</code></pre>
</div>
<div id="section-copying-files-using-paths" class="section level3">
<h3>Copying files using paths</h3>
<p>The final line of code we used to copy the file into our home directory used<br />
the function <code>file.copy</code>. This function takes two arguments: the file to copy and the name to give it in the new directory.</p>
<pre class="r"><code>file.copy(fullpath, &quot;murders.csv&quot;)</code></pre>
<pre><code>## [1] FALSE</code></pre>
<p>If a file is copied successfully, the <code>file.copy</code> function returns <code>TRUE</code>. Note that we are giving the file the same name, <code>murders.csv</code>, but we could have named it anything. Also note that by not starting the string with a slash, R assumes this is a relative path and copies the file to the working directory.</p>
<p>You should be able to see the file in your working directory and can check by using:</p>
<pre class="r"><code>list.files()</code></pre>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>The working directory is where <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg> looks for files and saves files by default.</p></li>
<li><p>See your working directory with <code>getwd()</code>. Change your working directory with <code>setwd()</code>.</p></li>
<li><p>We suggest you create a directory for each project and keep your raw data inside that directory.</p></li>
<li><p>Use the <code>file.path()</code> function to generate a full path from a relative path and a file name. Use <code>file.path()</code> instead of <code>paste()</code> because <code>file.path()</code> is aware of your operating system and will use the correct slashes to navigate your machine.</p></li>
<li><p>The <code>file.copy()</code> function copies a file to a new path.</p></li>
</ul>
</div>
</div>
<div id="section-the-readr-and-readxl-packages" class="section level3">
<h3>The readr and readxl Packages</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/importing-data.html#the-readr-and-readxl-packages">textbook section - 5.2 The readr and readxl packages</a>.</p>
</div>
<p>In this section we introduce the main tidyverse data importing functions. We will use the <code>murders.csv</code> file provided by the <strong>dslabs</strong> package as an example. To simplify the illustration we will copy the file to our working directory using the following code:</p>
<pre class="r"><code>filename &lt;- &quot;murders.csv&quot;
dir &lt;- system.file(&quot;extdata&quot;, package = &quot;dslabs&quot;) 
fullpath &lt;- file.path(dir, filename)
file.copy(fullpath, &quot;murders.csv&quot;)</code></pre>
</div>
<div id="section-readr" class="section level3">
<h3>readr</h3>
<p>The <strong>readr</strong> library includes functions for reading data stored in text file spreadsheets into R. <strong>readr</strong> is part of the <strong>tidyverse</strong> package, or you can load it directly:</p>
<pre class="r"><code>library(readr)</code></pre>
<p>The following functions are available to read-in spreadsheets:</p>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>Format</th>
<th>Typical suffix</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>read_table</td>
<td>white space separated values</td>
<td>txt</td>
</tr>
<tr class="even">
<td>read_csv</td>
<td>comma separated values</td>
<td>csv</td>
</tr>
<tr class="odd">
<td>read_csv2</td>
<td>semicolon separated values</td>
<td>csv</td>
</tr>
<tr class="even">
<td>read_tsv</td>
<td>tab delimited separated values</td>
<td>tsv</td>
</tr>
<tr class="odd">
<td>read_delim</td>
<td>general text file format, must define delimiter</td>
<td>txt</td>
</tr>
</tbody>
</table>
<p>Although the suffix usually tells us what type of file it is, there is no guarantee that these always match. We can open the file to take a look or use the function <code>read_lines</code> to look at a few lines:</p>
<pre class="r"><code>read_lines(&quot;murders.csv&quot;, n_max = 3)</code></pre>
<pre><code>## [1] &quot;state,abb,region,population,total&quot; &quot;Alabama,AL,South,4779736,135&quot;     
## [3] &quot;Alaska,AK,West,710231,19&quot;</code></pre>
<p>This also shows that there is a header. Now we are ready to read-in the data into R. From the .csv suffix and the peek at the file, we know to use <code>read_csv</code>:</p>
<pre class="r"><code>dat &lt;- read_csv(filename)</code></pre>
<p>Note that we receive a message letting us know what data types were used for each column. Also note that <code>dat</code> is a <code>tibble</code>, not just a data frame. This is because <code>read_csv</code> is a <strong>tidyverse</strong> parser. We can confirm that the data has in fact been read-in with:</p>
<pre class="r"><code>View(dat)</code></pre>
<p>Finally, note that we can also use the full path for the file:</p>
<pre class="r"><code>dat &lt;- read_csv(fullpath)</code></pre>
</div>
<div id="section-readxl" class="section level3">
<h3>readxl</h3>
<p>You can load the <strong>readxl</strong> package using</p>
<pre class="r"><code>library(readxl)</code></pre>
<p>The package provides functions to read-in Microsoft Excel formats:</p>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>Format</th>
<th>Typical suffix</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>read_excel</td>
<td>auto detect the format</td>
<td>xls, xlsx</td>
</tr>
<tr class="even">
<td>read_xls</td>
<td>original format</td>
<td>xls</td>
</tr>
<tr class="odd">
<td>read_xlsx</td>
<td>new format</td>
<td>xlsx</td>
</tr>
</tbody>
</table>
<p>The Microsoft Excel formats permit you to have more than one spreadsheet in one file. These are referred to as <em>sheets</em>. The functions listed above read the first sheet by default, but we can also read the others. The <code>excel_sheets</code> function gives us the names of all the sheets in an Excel file. These names can then be passed to the <code>sheet</code> argument in the three functions above to read sheets other than the first.</p>
</div>
<div id="section-exercises" class="section level3">
<h3>Exercises</h3>
<p>1. Use the <code>read_csv</code> function to read each of the files that the following code saves in the <code>files</code> object:</p>
<pre class="r"><code>path &lt;- system.file(&quot;extdata&quot;, package = &quot;dslabs&quot;)
files &lt;- list.files(path)
files</code></pre>
<p>2. Note that the last one, the <code>olive</code> file, gives us a warning. This is because the first line of the file is missing the header for the first column.</p>
<p>Read the help file for <code>read_csv</code> to figure out how to read in the file without reading this header. If you skip the header, you should not get this warning. Save the result to an object called <code>dat</code>.</p>
<p>3. A problem with the previous approach is that we don’t know what the columns represent. Type:</p>
<pre class="r"><code>names(dat)</code></pre>
<p>to see that the names are not informative.</p>
<p>Use the <code>readLines</code> function to read in just the first line (we later learn how to extract values from the output).</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p><strong>readr</strong> is the <strong>tidyverse</strong> library that includes functions for reading data stored in text file spreadsheets into <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>. Functions in the package include <code>read_csv()</code>, <code>read_tsv()</code>, <code>read_delim()</code> and more.</p></li>
<li><p>These differ by the delimiter they use to split columns.</p></li>
<li><p>The <strong>readxl</strong> package provides functions to read Microsoft Excel formatted files.</p></li>
<li><p>The <code>excel_sheets()</code> function gives the names of the sheets in the Excel file. These names are passed to the sheet argument for the <strong>readxl</strong> functions <code>read_excel()</code>, <code>read_xls()</code> and <code>read_xlsx()</code>.</p></li>
<li><p>The <code>read_lines()</code> function shows the first few lines of a file in <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>.</p></li>
</ul>
</div>
</div>
<div id="section-importing-data-using-r-base-functions" class="section level3">
<h3>Importing Data Using R-base Functions</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/importing-data.html#r-base-importing-functions">textbook section - 5.5 R-base importing functions</a>.</p>
</div>
<p>R-base also provides import functions. These have similar names to those in the <strong>tidyverse</strong>, for example <code>read.table</code>, <code>read.csv</code> and <code>read.delim</code>. However, there are a couple of important differences. To show this we read-in the data with an R-base function:</p>
<pre class="r"><code>dat2 &lt;- read.csv(filename)</code></pre>
<p>An important difference is that the characters are converted to factors:</p>
<pre class="r"><code>class(dat2$abb)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<pre class="r"><code>class(dat2$region)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>This can be avoided by setting the argument <code>stringsAsFactors</code> to <code>FALSE</code>.</p>
<pre class="r"><code>dat &lt;- read.csv(&quot;murders.csv&quot;, stringsAsFactors = FALSE)
class(dat$state)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>In our experience this can be a cause for confusion since a variable that was saved as characters in file is converted to factors regardless of what the variable represents. In fact, we <strong>highly</strong> recommend setting <code>stringsAsFactors=FALSE</code> to be your default approach when using the R-base parsers. You can easily convert the desired columns to factors after importing data.</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li>R-base import functions (<code>read.csv()</code>, <code>read.table()</code>, <code>read.delim()</code>) generate data frames rather than tibbles and character variables are converted to factors. This can be avoided by setting the argument stringsAsFactors=FALSE.</li>
</ul>
</div>
</div>
<div id="section-downloading-files-from-the-internet" class="section level3">
<h3>Downloading Files from the Internet</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/importing-data.html#downloading-files">textbook section - 5.4 Downloading files</a>.</p>
</div>
<p>Another common place for data to reside is on the internet. When these data are in files, we can download them and then import them or even read them directly from the web. For example, we note that because our <strong>dslabs</strong> package is on GitHub, the file we downloaded with the package has a url:</p>
<pre class="r"><code>url &lt;- &quot;https://raw.githubusercontent.com/rafalab/dslabs/master/inst/
extdata/murders.csv&quot;</code></pre>
<p>The <code>read_csv</code> file can read these files directly:</p>
<pre class="r"><code>dat &lt;- read_csv(url)</code></pre>
<p>If you want to have a local copy of the file, you can use the <code>download.file</code> function:</p>
<pre class="r"><code>download.file(url, &quot;murders.csv&quot;)</code></pre>
<p>This will download the file and save it on your system with the name <code>murders.csv</code>. You can use any name here, not necessarily <code>murders.csv</code>. Note that when using <code>download.file</code> you should be careful as <strong>it will overwrite existing files without warning</strong>.</p>
<p>Two functions that are sometimes useful when downloading data from the internet are <code>tempdir</code> and <code>tempfile</code>. The first creates a directory with a random name that is very likely to be unique. Similarly, <code>tempfile</code> creates a character string, not a file, that is likely to be a unique filename. So you can run a command like this which erases the temporary file once it imports the data:</p>
<pre class="r"><code>tmp_filename &lt;- tempfile()
download.file(url, tmp_filename)
dat &lt;- read_csv(tmp_filename)
file.remove(tmp_filename)</code></pre>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>The <code>read_csv()</code> function and other import functions can read a URL directly.</p></li>
<li><p>If you want to have a local copy of the file, you can use <code>download.file()</code>.</p></li>
<li><p><code>tempdir()</code> creates a directory with a name that is very unlikely not to be unique.</p></li>
<li><p><code>tempfile()</code> creates a character string that is likely to be a unique filename.</p></li>
</ul>
</div>
</div>
<div id="section-assessment-part-1-data-import" class="section level3">
<h3>Assessment Part 1: Data Import</h3>
<p>Insert Assessment here</p>
</div>
<div id="section-assessment-part-2-data-import" class="section level3">
<h3>Assessment Part 2: Data Import</h3>
<p>Insert Assessment here</p>
</div>
</div>
<div id="section-section-2-tidy-data" class="section level2">
<h2>Section 2: Tidy Data</h2>
<p>In the <strong>Tidy Data</strong> section, you will learn how to convert data from a raw to a tidy format.</p>
<p>This section is divided into three parts: <strong>Reshaping Data, Combining Tables</strong>, and <strong>Web Scraping</strong>. There are comprehension checks at the end of each part.</p>
<p>After completing the <strong>Tidy Data</strong> section, you will be able to:</p>
<ul>
<li><p><strong>Reshape data</strong> using functions from the <strong>tidyr</strong> package, including <code>gather()</code>, <code>spread()</code>, <code>separate()</code> and <code>unite()</code>.</p></li>
<li><p>Combine information from different tables using <strong>join</strong> functions from the <strong>dplyr</strong> package.</p></li>
<li><p>Combine information from different tables using <strong>binding</strong> functions from the <strong>dplyr</strong> package.</p></li>
<li><p>Use <strong>set operators</strong> to combine data frames.</p></li>
<li><p>Gather data from a website through <strong>web scraping</strong> and use of <strong>CSS selectors</strong>.</p></li>
</ul>
<p>We encourage you to use <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg> to interactively test out your answers and further your own learning.</p>
<hr />
<div id="section-tidy-data" class="section level3">
<h3>Tidy Data</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/tidyverse.html">textbook section - 4 The tidyverse</a>.</p>
</div>
<p>Up to now we have been manipulating vectors by reordering and subsetting them through indexing. However, once we start more advanced analyses, the preferred unit for data storage is not the vector but the data frame. In this section we learn to work directly with data frames, which greatly facilitate the organization of information. We will be using data frames for the majority of this textbook. We will focus on a specific data format referred to as <em>tidy</em> and on specific collection of packages that are particularly helpful for working with <em>tidy</em> data referred to as the <em>tidyverse</em>.</p>
<p>We can load all the tidyverse packages at once by installing and loading the <strong>tidyverse</strong> package:</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<p>We will learn how to implement the tidyverse approach throughout the course, but before delving into the details, in this section we introduce some of the most widely used tidyverse functionality, starting with the <strong>dplyr</strong> package for manipulating data frames and the <strong>purrr</strong> package for working with functions. Note that the tidyverse also includes a graphing package, <strong>ggplot2</strong>, which we introduce later in the textbook <a href="https://rafalab.github.io/dsbook/ggplot2.html">(Section - 7 ggplot2)</a> in the Data Visualization part of the textbook; the <strong>readr</strong> package discussed in the textbook <a href="https://rafalab.github.io/dsbook/importing-data.html">(Section - 5 Importing data)</a>; and many others. In this section, we first introduce the concept of <em>tidy data</em> and then demonstrate how we use the tidyverse to work with data frames in this format.</p>
</div>
<div id="section-tidy-data-1" class="section level3">
<h3>Tidy data</h3>
<p>We say that a data table is in <em>tidy</em> format if each row represents one observation and columns represent the different variables available for each of these observations. The <code>murders</code> dataset is an example of a tidy data frame.</p>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["abb"],"name":[2],"type":["chr"],"align":["left"]},{"label":["region"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["population"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["total"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Alabama","2":"AL","3":"South","4":"4779736","5":"135","_rn_":"1"},{"1":"Alaska","2":"AK","3":"West","4":"710231","5":"19","_rn_":"2"},{"1":"Arizona","2":"AZ","3":"West","4":"6392017","5":"232","_rn_":"3"},{"1":"Arkansas","2":"AR","3":"South","4":"2915918","5":"93","_rn_":"4"},{"1":"California","2":"CA","3":"West","4":"37253956","5":"1257","_rn_":"5"},{"1":"Colorado","2":"CO","3":"West","4":"5029196","5":"65","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Each row represent a state with each of the five columns providing a different variable related to these states: name, abbreviation, region, population, and total murders.</p>
<p>To see how the same information can be provided in different formats, consider the following example:</p>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["country"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["year"],"name":[2],"type":["int"],"align":["right"]},{"label":["fertility"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Germany","2":"1960","3":"2.41","_rn_":"1"},{"1":"South Korea","2":"1960","3":"6.16","_rn_":"2"},{"1":"Germany","2":"1961","3":"2.44","_rn_":"3"},{"1":"South Korea","2":"1961","3":"5.99","_rn_":"4"},{"1":"Germany","2":"1962","3":"2.47","_rn_":"5"},{"1":"South Korea","2":"1962","3":"5.79","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>This tidy dataset provides fertility rates for two countries across the years. This is a tidy dataset because each row presents one observation with the three variables being country, year, and fertility rate. However, this dataset originally came in another format and was reshaped for the <strong>dslabs</strong> package. Originally, the data was in the following format:</p>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["1960"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["1961"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["1962"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Germany","2":"2.41","3":"2.44","4":"2.47"},{"1":"South Korea","2":"6.16","3":"5.99","4":"5.79"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The same information is provided, but there are two important differences in the format: 1) each row includes several observations and 2) one of the variables, year, is stored in the header. For the tidyverse packages to be optimally used, data need to be reshaped into <code>tidy</code> format, which you will learn to do in the Data Wrangling part of the course Until then, we will use example datasets that are already in tidy format.</p>
<p>Although not immediately obvious, as you go through the course you will start to appreciate the advantages of working in a framework in which functions use tidy formats for both inputs and outputs. You will see how this permits the data analyst to focus on more important aspects of the analysis rather than the format of the data.</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>In tidy data, each row represents an observation and each column represents a different variable.</p></li>
<li><p>In wide data, each row includes several observations and one of the variables is stored in the header.</p></li>
</ul>
</div>
</div>
<div id="section-reshaping-data" class="section level3">
<h3>Reshaping Data</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/reshaping-data.html">textbook section - 21. Reshaping data</a>, the <a href="https://rafalab.github.io/dsbook/reshaping-data.html#gather">textbook section - 21.1 gather</a>, and the <a href="https://rafalab.github.io/dsbook/reshaping-data.html#spread">textbook section - 21.2 spread</a>.</p>
</div>
<p>As we have seen through the course, having data in <em>tidy</em> format is what makes the tidyverse flow. After the first step in the data analysis process, importing data, a common next step is to reshape the data into a form that facilitates the rest of the analysis. The <strong>tidyr</strong> package includes several functions that are useful for tidying data.</p>
<p>We will use the fertility wide format dataset described in the textbook <a href="https://rafalab.github.io/dsbook/tidyverse.html#tidy-data">(Section - 4.1 Tidy data)</a> as an example in this section.</p>
<pre class="r"><code>library(tidyverse) 
library(dslabs)
path &lt;- system.file(&quot;extdata&quot;, package=&quot;dslabs&quot;)
filename &lt;- file.path(path, &quot;fertility-two-countries-example.csv&quot;)
wide_data &lt;- read_csv(filename)</code></pre>
</div>
<div id="section-gather" class="section level3">
<h3><strong><code>gather</code></strong></h3>
<p>One of the most used functions in the <strong>tidyr</strong> package is <code>gather</code>, which is useful for converting wide data into tidy data.</p>
<p>As with most tidyverse functions, the <code>gather</code> function’s first argument is the data frame that will be converted. Here we want to reshape the <code>wide_data</code> dataset so that each row represents a fertility observation, which implies we need three columns to store the year, country, and the observed value. In its current form, data from different years are in different columns with the year values stored in the column names. Through the second and third argument we will tell <code>gather</code> the column names we want to assign to the columns containing the current column names and observations, respectively. In this case a good choice for these two arguments would be <code>year</code> and <code>fertility</code>. Note that nowhere in the data file does it tell us this is fertility data. Instead, we deciphered this from the file name. Through the fourth argument we specify the columns containing observed values; these are the columns that will be <em>gathered</em>. The default is to gather all columns so, in most cases, we have to specify the columns. In our example we want columns <code>1960</code>, <code>1961</code> up to <code>2015</code>.</p>
<p>The code to gather the fertility data therefore looks like this:</p>
<pre class="r"><code>new_tidy_data &lt;- gather(wide_data, year, fertility, `1960`:`2015`)</code></pre>
<p>We can also use the pipe like this:</p>
<pre class="r"><code>new_tidy_data &lt;- wide_data %&gt;% gather(year, fertility, `1960`:`2015`)</code></pre>
<p>We can see that the data have been converted to tidy format with columns <code>year</code> and <code>fertility</code>:</p>
<pre class="r"><code>head(new_tidy_data)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["year"],"name":[2],"type":["chr"],"align":["left"]},{"label":["fertility"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Germany","2":"1960","3":"2.41"},{"1":"South Korea","2":"1960","3":"6.16"},{"1":"Germany","2":"1961","3":"2.44"},{"1":"South Korea","2":"1961","3":"5.99"},{"1":"Germany","2":"1962","3":"2.47"},{"1":"South Korea","2":"1962","3":"5.79"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>and that each year resulted in two rows since we have two countries and this column was not gathered. A somewhat quicker way to write this code is to specify which column will <strong>not</strong> be gathered, rather than all the columns that will be gathered:</p>
<pre class="r"><code>new_tidy_data &lt;- wide_data %&gt;%
  gather(year, fertility, -country)</code></pre>
<p>The <code>new_tidy_data</code> object looks like the original <code>tidy_data</code> we defined this way</p>
<pre class="r"><code>data(&quot;gapminder&quot;)
tidy_data &lt;- gapminder %&gt;% 
  filter(country %in% c(&quot;South Korea&quot;, &quot;Germany&quot;) &amp; !is.na(fertility)) %&gt;%
  select(country, year, fertility)</code></pre>
<p>with just one minor difference. Can you spot it? Look at the data type of the year column:</p>
<pre class="r"><code>class(tidy_data$year)</code></pre>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<pre class="r"><code>class(new_tidy_data$year)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>The <code>gather</code> function assumes that column names are characters. So we need a bit more wrangling before we are ready to make a plot. We need to convert the year column to be numbers. The <code>gather</code> function includes the <code>convert</code> argument for this purpose:</p>
<pre class="r"><code>new_tidy_data &lt;- wide_data %&gt;%
  gather(year, fertility, -country, convert = TRUE)
class(new_tidy_data$year)</code></pre>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<p>Note that we could have also used the <code>mutate</code> and <code>as.numeric</code>.</p>
<p>Now that the data is tidy, we can use this relatively simple ggplot code:</p>
<pre class="r"><code>new_tidy_data %&gt;% ggplot(aes(year, fertility, color = country)) + 
  geom_point()</code></pre>
</div>
<div id="section-spread" class="section level3">
<h3><strong><code>spread</code></strong></h3>
<p>As we will see in later examples, it is sometimes useful for data wrangling purposes to convert tidy data into wide data. We often use this as an intermediate step in tidying up data. The <code>spread</code> function is basically the inverse of <code>gather</code>. The first argument is for the data, but since we are using the pipe, we don’t show it. The second argument tells <code>spread</code> which variable will be used as the column names. The third argument specifies which variable to use to fill out the cells:</p>
<pre class="r"><code>new_wide_data &lt;- new_tidy_data %&gt;% spread(year, fertility)
select(new_wide_data, country, `1960`:`1967`)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["1960"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["1961"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["1962"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["1963"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["1964"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["1965"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["1966"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["1967"],"name":[9],"type":["dbl"],"align":["right"]}],"data":[{"1":"Germany","2":"2.41","3":"2.44","4":"2.47","5":"2.49","6":"2.49","7":"2.48","8":"2.44","9":"2.37"},{"1":"South Korea","2":"6.16","3":"5.99","4":"5.79","5":"5.57","6":"5.36","7":"5.16","8":"4.99","9":"4.85"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The following diagram can help remind you how these two functions work:</p>
<p><img src="images/gather-spread.png" width="700px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /></p>
<p>(Image courtesy of <a href="https://github.com/rstudio/cheatsheets">RStudio</a>. <a href="https://github.com/rstudio/cheatsheets/blob/master/LICENSE">CC-BY-4.0 license</a>. Cropped from original.)</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>The <strong>tidyr</strong> package includes several functions that are useful for tidying data.</p></li>
<li><p>The <code>gather()</code> function converts wide data into tidy data.</p></li>
<li><p>The <code>spread()</code> function converts tidy data to wide data.</p></li>
</ul>
</div>
</div>
<div id="section-separate-and-unite" class="section level3">
<h3>Separate and Unite</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/reshaping-data.html#separate">textbook section - 21.3 separate</a>, and the <a href="https://rafalab.github.io/dsbook/reshaping-data.html#unite">textbook section - 21.4 unite</a>.</p>
</div>
<p>The data wrangling shown above was simple compared to what is usually required. In our example spreadsheet files, we include an illustration that is slightly more complicated. It contains two variables: life expectancy and fertility. However, the way it is stored is not tidy and, as we will explain, not optimal.</p>
<pre class="r"><code>path &lt;- system.file(&quot;extdata&quot;, package = &quot;dslabs&quot;)

filename &lt;- &quot;life-expectancy-and-fertility-two-countries-example.csv&quot;
filename &lt;-  file.path(path, filename)

raw_dat &lt;- read_csv(filename)
select(raw_dat, 1:5)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["1960_fertility"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["1960_life_expectancy"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["1961_fertility"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["1961_life_expectancy"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Germany","2":"2.41","3":"69.26","4":"2.44","5":"69.85"},{"1":"South Korea","2":"6.16","3":"53.02","4":"5.99","5":"53.75"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>First, note that the data is in wide format. Second, notice that this table includes values for two variables, fertility and life expectancy, with the column name encoding which column represents which variable. Encoding information in the column names is not recommended but, unfortunately, it is quite common. We will put our wrangling skills to work to extract this information and store it in a tidy fashion.</p>
<p>We can start the data wrangling with the <code>gather</code> function, but we should no longer use the column name <code>year</code> for the new column since it also contains the variable type. We will call it <code>key</code>, the default, for now:</p>
<pre class="r"><code>dat &lt;- raw_dat %&gt;% gather(key, value, -country)
head(dat)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["key"],"name":[2],"type":["chr"],"align":["left"]},{"label":["value"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"Germany","2":"1960_fertility","3":"2.41"},{"1":"South Korea","2":"1960_fertility","3":"6.16"},{"1":"Germany","2":"1960_life_expectancy","3":"69.26"},{"1":"South Korea","2":"1960_life_expectancy","3":"53.02"},{"1":"Germany","2":"1961_fertility","3":"2.44"},{"1":"South Korea","2":"1961_fertility","3":"5.99"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The result is not exactly what we refer to as tidy since each observation is associated with two, not one, rows. We want to have the values from the two variables, fertility and life expectancy, in two separate columns. The first challenge to achieve this is to separate the <code>key</code> column into the year and the variable type. Notice that the entries in this column separate the year from the variable name with an underscore:</p>
<pre class="r"><code>dat$key[1:5]</code></pre>
<pre><code>## [1] &quot;1960_fertility&quot;       &quot;1960_fertility&quot;       &quot;1960_life_expectancy&quot;
## [4] &quot;1960_life_expectancy&quot; &quot;1961_fertility&quot;</code></pre>
<p>Encoding multiple variables in a column name is such a common problem that the <strong>readr</strong> package includes a function to separate these columns into two or more. Apart from the data, the <code>separate</code> function takes three arguments: the name of the column to be separated, the names to be used for the new columns, and the character that separates the variables. So, a first attempt at this is:</p>
<pre class="r"><code>dat %&gt;% separate(key, c(&quot;year&quot;, &quot;variable_name&quot;), &quot;_&quot;)</code></pre>
<p>Because <code>_</code> is the default separator assumed by <code>separate</code>, we do not have to include it in the code:</p>
<pre class="r"><code>dat %&gt;% separate(key, c(&quot;year&quot;, &quot;variable_name&quot;))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["year"],"name":[2],"type":["chr"],"align":["left"]},{"label":["variable_name"],"name":[3],"type":["chr"],"align":["left"]},{"label":["value"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Germany","2":"1960","3":"fertility","4":"2.41"},{"1":"South Korea","2":"1960","3":"fertility","4":"6.16"},{"1":"Germany","2":"1960","3":"life","4":"69.26"},{"1":"South Korea","2":"1960","3":"life","4":"53.02"},{"1":"Germany","2":"1961","3":"fertility","4":"2.44"},{"1":"South Korea","2":"1961","3":"fertility","4":"5.99"},{"1":"Germany","2":"1961","3":"life","4":"69.85"},{"1":"South Korea","2":"1961","3":"life","4":"53.75"},{"1":"Germany","2":"1962","3":"fertility","4":"2.47"},{"1":"South Korea","2":"1962","3":"fertility","4":"5.79"},{"1":"Germany","2":"1962","3":"life","4":"70.01"},{"1":"South Korea","2":"1962","3":"life","4":"54.51"},{"1":"Germany","2":"1963","3":"fertility","4":"2.49"},{"1":"South Korea","2":"1963","3":"fertility","4":"5.57"},{"1":"Germany","2":"1963","3":"life","4":"70.10"},{"1":"South Korea","2":"1963","3":"life","4":"55.27"},{"1":"Germany","2":"1964","3":"fertility","4":"2.49"},{"1":"South Korea","2":"1964","3":"fertility","4":"5.36"},{"1":"Germany","2":"1964","3":"life","4":"70.66"},{"1":"South Korea","2":"1964","3":"life","4":"56.04"},{"1":"Germany","2":"1965","3":"fertility","4":"2.48"},{"1":"South Korea","2":"1965","3":"fertility","4":"5.16"},{"1":"Germany","2":"1965","3":"life","4":"70.65"},{"1":"South Korea","2":"1965","3":"life","4":"56.84"},{"1":"Germany","2":"1966","3":"fertility","4":"2.44"},{"1":"South Korea","2":"1966","3":"fertility","4":"4.99"},{"1":"Germany","2":"1966","3":"life","4":"70.77"},{"1":"South Korea","2":"1966","3":"life","4":"57.67"},{"1":"Germany","2":"1967","3":"fertility","4":"2.37"},{"1":"South Korea","2":"1967","3":"fertility","4":"4.85"},{"1":"Germany","2":"1967","3":"life","4":"70.99"},{"1":"South Korea","2":"1967","3":"life","4":"58.54"},{"1":"Germany","2":"1968","3":"fertility","4":"2.28"},{"1":"South Korea","2":"1968","3":"fertility","4":"4.73"},{"1":"Germany","2":"1968","3":"life","4":"70.64"},{"1":"South Korea","2":"1968","3":"life","4":"59.44"},{"1":"Germany","2":"1969","3":"fertility","4":"2.17"},{"1":"South Korea","2":"1969","3":"fertility","4":"4.62"},{"1":"Germany","2":"1969","3":"life","4":"70.48"},{"1":"South Korea","2":"1969","3":"life","4":"60.35"},{"1":"Germany","2":"1970","3":"fertility","4":"2.04"},{"1":"South Korea","2":"1970","3":"fertility","4":"4.53"},{"1":"Germany","2":"1970","3":"life","4":"70.72"},{"1":"South Korea","2":"1970","3":"life","4":"61.22"},{"1":"Germany","2":"1971","3":"fertility","4":"1.92"},{"1":"South Korea","2":"1971","3":"fertility","4":"4.41"},{"1":"Germany","2":"1971","3":"life","4":"70.94"},{"1":"South Korea","2":"1971","3":"life","4":"62.02"},{"1":"Germany","2":"1972","3":"fertility","4":"1.80"},{"1":"South Korea","2":"1972","3":"fertility","4":"4.27"},{"1":"Germany","2":"1972","3":"life","4":"71.16"},{"1":"South Korea","2":"1972","3":"life","4":"62.73"},{"1":"Germany","2":"1973","3":"fertility","4":"1.70"},{"1":"South Korea","2":"1973","3":"fertility","4":"4.09"},{"1":"Germany","2":"1973","3":"life","4":"71.41"},{"1":"South Korea","2":"1973","3":"life","4":"63.34"},{"1":"Germany","2":"1974","3":"fertility","4":"1.62"},{"1":"South Korea","2":"1974","3":"fertility","4":"3.87"},{"1":"Germany","2":"1974","3":"life","4":"71.71"},{"1":"South Korea","2":"1974","3":"life","4":"63.84"},{"1":"Germany","2":"1975","3":"fertility","4":"1.56"},{"1":"South Korea","2":"1975","3":"fertility","4":"3.62"},{"1":"Germany","2":"1975","3":"life","4":"71.56"},{"1":"South Korea","2":"1975","3":"life","4":"64.26"},{"1":"Germany","2":"1976","3":"fertility","4":"1.53"},{"1":"South Korea","2":"1976","3":"fertility","4":"3.36"},{"1":"Germany","2":"1976","3":"life","4":"72.02"},{"1":"South Korea","2":"1976","3":"life","4":"64.62"},{"1":"Germany","2":"1977","3":"fertility","4":"1.50"},{"1":"South Korea","2":"1977","3":"fertility","4":"3.11"},{"1":"Germany","2":"1977","3":"life","4":"72.63"},{"1":"South Korea","2":"1977","3":"life","4":"64.95"},{"1":"Germany","2":"1978","3":"fertility","4":"1.49"},{"1":"South Korea","2":"1978","3":"fertility","4":"2.88"},{"1":"Germany","2":"1978","3":"life","4":"72.60"},{"1":"South Korea","2":"1978","3":"life","4":"65.31"},{"1":"Germany","2":"1979","3":"fertility","4":"1.48"},{"1":"South Korea","2":"1979","3":"fertility","4":"2.69"},{"1":"Germany","2":"1979","3":"life","4":"72.96"},{"1":"South Korea","2":"1979","3":"life","4":"65.70"},{"1":"Germany","2":"1980","3":"fertility","4":"1.47"},{"1":"South Korea","2":"1980","3":"fertility","4":"2.52"},{"1":"Germany","2":"1980","3":"life","4":"73.14"},{"1":"South Korea","2":"1980","3":"life","4":"66.15"},{"1":"Germany","2":"1981","3":"fertility","4":"1.47"},{"1":"South Korea","2":"1981","3":"fertility","4":"2.38"},{"1":"Germany","2":"1981","3":"life","4":"73.37"},{"1":"South Korea","2":"1981","3":"life","4":"66.66"},{"1":"Germany","2":"1982","3":"fertility","4":"1.46"},{"1":"South Korea","2":"1982","3":"fertility","4":"2.24"},{"1":"Germany","2":"1982","3":"life","4":"73.69"},{"1":"South Korea","2":"1982","3":"life","4":"67.21"},{"1":"Germany","2":"1983","3":"fertility","4":"1.46"},{"1":"South Korea","2":"1983","3":"fertility","4":"2.11"},{"1":"Germany","2":"1983","3":"life","4":"73.97"},{"1":"South Korea","2":"1983","3":"life","4":"67.78"},{"1":"Germany","2":"1984","3":"fertility","4":"1.46"},{"1":"South Korea","2":"1984","3":"fertility","4":"1.98"},{"1":"Germany","2":"1984","3":"life","4":"74.44"},{"1":"South Korea","2":"1984","3":"life","4":"68.37"},{"1":"Germany","2":"1985","3":"fertility","4":"1.45"},{"1":"South Korea","2":"1985","3":"fertility","4":"1.86"},{"1":"Germany","2":"1985","3":"life","4":"74.55"},{"1":"South Korea","2":"1985","3":"life","4":"68.98"},{"1":"Germany","2":"1986","3":"fertility","4":"1.44"},{"1":"South Korea","2":"1986","3":"fertility","4":"1.75"},{"1":"Germany","2":"1986","3":"life","4":"74.75"},{"1":"South Korea","2":"1986","3":"life","4":"69.58"},{"1":"Germany","2":"1987","3":"fertility","4":"1.43"},{"1":"South Korea","2":"1987","3":"fertility","4":"1.67"},{"1":"Germany","2":"1987","3":"life","4":"75.15"},{"1":"South Korea","2":"1987","3":"life","4":"70.18"},{"1":"Germany","2":"1988","3":"fertility","4":"1.41"},{"1":"South Korea","2":"1988","3":"fertility","4":"1.63"},{"1":"Germany","2":"1988","3":"life","4":"75.33"},{"1":"South Korea","2":"1988","3":"life","4":"70.75"},{"1":"Germany","2":"1989","3":"fertility","4":"1.38"},{"1":"South Korea","2":"1989","3":"fertility","4":"1.61"},{"1":"Germany","2":"1989","3":"life","4":"75.51"},{"1":"South Korea","2":"1989","3":"life","4":"71.29"},{"1":"Germany","2":"1990","3":"fertility","4":"1.36"},{"1":"South Korea","2":"1990","3":"fertility","4":"1.61"},{"1":"Germany","2":"1990","3":"life","4":"75.40"},{"1":"South Korea","2":"1990","3":"life","4":"71.80"},{"1":"Germany","2":"1991","3":"fertility","4":"1.34"},{"1":"South Korea","2":"1991","3":"fertility","4":"1.63"},{"1":"Germany","2":"1991","3":"life","4":"75.60"},{"1":"South Korea","2":"1991","3":"life","4":"72.20"},{"1":"Germany","2":"1992","3":"fertility","4":"1.32"},{"1":"South Korea","2":"1992","3":"fertility","4":"1.65"},{"1":"Germany","2":"1992","3":"life","4":"76.00"},{"1":"South Korea","2":"1992","3":"life","4":"72.70"},{"1":"Germany","2":"1993","3":"fertility","4":"1.31"},{"1":"South Korea","2":"1993","3":"fertility","4":"1.66"},{"1":"Germany","2":"1993","3":"life","4":"76.10"},{"1":"South Korea","2":"1993","3":"life","4":"73.10"},{"1":"Germany","2":"1994","3":"fertility","4":"1.31"},{"1":"South Korea","2":"1994","3":"fertility","4":"1.65"},{"1":"Germany","2":"1994","3":"life","4":"76.40"},{"1":"South Korea","2":"1994","3":"life","4":"73.60"},{"1":"Germany","2":"1995","3":"fertility","4":"1.31"},{"1":"South Korea","2":"1995","3":"fertility","4":"1.63"},{"1":"Germany","2":"1995","3":"life","4":"76.60"},{"1":"South Korea","2":"1995","3":"life","4":"74.00"},{"1":"Germany","2":"1996","3":"fertility","4":"1.32"},{"1":"South Korea","2":"1996","3":"fertility","4":"1.59"},{"1":"Germany","2":"1996","3":"life","4":"76.90"},{"1":"South Korea","2":"1996","3":"life","4":"74.50"},{"1":"Germany","2":"1997","3":"fertility","4":"1.33"},{"1":"South Korea","2":"1997","3":"fertility","4":"1.54"},{"1":"Germany","2":"1997","3":"life","4":"77.30"},{"1":"South Korea","2":"1997","3":"life","4":"74.90"},{"1":"Germany","2":"1998","3":"fertility","4":"1.34"},{"1":"South Korea","2":"1998","3":"fertility","4":"1.48"},{"1":"Germany","2":"1998","3":"life","4":"77.60"},{"1":"South Korea","2":"1998","3":"life","4":"75.40"},{"1":"Germany","2":"1999","3":"fertility","4":"1.35"},{"1":"South Korea","2":"1999","3":"fertility","4":"1.41"},{"1":"Germany","2":"1999","3":"life","4":"77.80"},{"1":"South Korea","2":"1999","3":"life","4":"75.80"},{"1":"Germany","2":"2000","3":"fertility","4":"1.35"},{"1":"South Korea","2":"2000","3":"fertility","4":"1.35"},{"1":"Germany","2":"2000","3":"life","4":"78.10"},{"1":"South Korea","2":"2000","3":"life","4":"76.30"},{"1":"Germany","2":"2001","3":"fertility","4":"1.35"},{"1":"South Korea","2":"2001","3":"fertility","4":"1.30"},{"1":"Germany","2":"2001","3":"life","4":"78.40"},{"1":"South Korea","2":"2001","3":"life","4":"76.70"},{"1":"Germany","2":"2002","3":"fertility","4":"1.35"},{"1":"South Korea","2":"2002","3":"fertility","4":"1.25"},{"1":"Germany","2":"2002","3":"life","4":"78.60"},{"1":"South Korea","2":"2002","3":"life","4":"77.10"},{"1":"Germany","2":"2003","3":"fertility","4":"1.35"},{"1":"South Korea","2":"2003","3":"fertility","4":"1.22"},{"1":"Germany","2":"2003","3":"life","4":"78.80"},{"1":"South Korea","2":"2003","3":"life","4":"77.70"},{"1":"Germany","2":"2004","3":"fertility","4":"1.35"},{"1":"South Korea","2":"2004","3":"fertility","4":"1.20"},{"1":"Germany","2":"2004","3":"life","4":"79.20"},{"1":"South Korea","2":"2004","3":"life","4":"78.20"},{"1":"Germany","2":"2005","3":"fertility","4":"1.35"},{"1":"South Korea","2":"2005","3":"fertility","4":"1.20"},{"1":"Germany","2":"2005","3":"life","4":"79.40"},{"1":"South Korea","2":"2005","3":"life","4":"78.70"},{"1":"Germany","2":"2006","3":"fertility","4":"1.36"},{"1":"South Korea","2":"2006","3":"fertility","4":"1.20"},{"1":"Germany","2":"2006","3":"life","4":"79.70"},{"1":"South Korea","2":"2006","3":"life","4":"79.10"},{"1":"Germany","2":"2007","3":"fertility","4":"1.36"},{"1":"South Korea","2":"2007","3":"fertility","4":"1.21"},{"1":"Germany","2":"2007","3":"life","4":"79.90"},{"1":"South Korea","2":"2007","3":"life","4":"79.40"},{"1":"Germany","2":"2008","3":"fertility","4":"1.37"},{"1":"South Korea","2":"2008","3":"fertility","4":"1.23"},{"1":"Germany","2":"2008","3":"life","4":"80.00"},{"1":"South Korea","2":"2008","3":"life","4":"79.80"},{"1":"Germany","2":"2009","3":"fertility","4":"1.38"},{"1":"South Korea","2":"2009","3":"fertility","4":"1.25"},{"1":"Germany","2":"2009","3":"life","4":"80.10"},{"1":"South Korea","2":"2009","3":"life","4":"80.10"},{"1":"Germany","2":"2010","3":"fertility","4":"1.39"},{"1":"South Korea","2":"2010","3":"fertility","4":"1.27"},{"1":"Germany","2":"2010","3":"life","4":"80.30"},{"1":"South Korea","2":"2010","3":"life","4":"80.40"},{"1":"Germany","2":"2011","3":"fertility","4":"1.40"},{"1":"South Korea","2":"2011","3":"fertility","4":"1.29"},{"1":"Germany","2":"2011","3":"life","4":"80.50"},{"1":"South Korea","2":"2011","3":"life","4":"80.60"},{"1":"Germany","2":"2012","3":"fertility","4":"1.41"},{"1":"South Korea","2":"2012","3":"fertility","4":"1.30"},{"1":"Germany","2":"2012","3":"life","4":"80.60"},{"1":"South Korea","2":"2012","3":"life","4":"80.70"},{"1":"Germany","2":"2013","3":"fertility","4":"1.42"},{"1":"South Korea","2":"2013","3":"fertility","4":"1.32"},{"1":"Germany","2":"2013","3":"life","4":"80.70"},{"1":"South Korea","2":"2013","3":"life","4":"80.90"},{"1":"Germany","2":"2014","3":"fertility","4":"1.43"},{"1":"South Korea","2":"2014","3":"fertility","4":"1.34"},{"1":"Germany","2":"2014","3":"life","4":"80.70"},{"1":"South Korea","2":"2014","3":"life","4":"80.90"},{"1":"Germany","2":"2015","3":"fertility","4":"1.44"},{"1":"South Korea","2":"2015","3":"fertility","4":"1.36"},{"1":"Germany","2":"2015","3":"life","4":"80.80"},{"1":"South Korea","2":"2015","3":"life","4":"81.00"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The function does separate the values, but we run into a new problem. We receive the warning <code>Too many values at 112 locations:</code> and that the <code>life_expectancy</code> variable is truncated to <code>life</code>. This is because the <code>_</code> is used to separate <code>life</code> and <code>expectancy</code>, not just year and variable name! We could add a third column to catch this and let the <code>separate</code> function know which column to <em>fill in</em> with missing values, <code>NA</code>, when there is no third value. Here we tell it to fill the column on the right:</p>
<pre class="r"><code>var_names &lt;- c(&quot;year&quot;, &quot;first_variable_name&quot;, &quot;second_variable_name&quot;)
dat %&gt;% separate(key, var_names, fill = &quot;right&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["year"],"name":[2],"type":["chr"],"align":["left"]},{"label":["first_variable_name"],"name":[3],"type":["chr"],"align":["left"]},{"label":["second_variable_name"],"name":[4],"type":["chr"],"align":["left"]},{"label":["value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Germany","2":"1960","3":"fertility","4":"NA","5":"2.41"},{"1":"South Korea","2":"1960","3":"fertility","4":"NA","5":"6.16"},{"1":"Germany","2":"1960","3":"life","4":"expectancy","5":"69.26"},{"1":"South Korea","2":"1960","3":"life","4":"expectancy","5":"53.02"},{"1":"Germany","2":"1961","3":"fertility","4":"NA","5":"2.44"},{"1":"South Korea","2":"1961","3":"fertility","4":"NA","5":"5.99"},{"1":"Germany","2":"1961","3":"life","4":"expectancy","5":"69.85"},{"1":"South Korea","2":"1961","3":"life","4":"expectancy","5":"53.75"},{"1":"Germany","2":"1962","3":"fertility","4":"NA","5":"2.47"},{"1":"South Korea","2":"1962","3":"fertility","4":"NA","5":"5.79"},{"1":"Germany","2":"1962","3":"life","4":"expectancy","5":"70.01"},{"1":"South Korea","2":"1962","3":"life","4":"expectancy","5":"54.51"},{"1":"Germany","2":"1963","3":"fertility","4":"NA","5":"2.49"},{"1":"South Korea","2":"1963","3":"fertility","4":"NA","5":"5.57"},{"1":"Germany","2":"1963","3":"life","4":"expectancy","5":"70.10"},{"1":"South Korea","2":"1963","3":"life","4":"expectancy","5":"55.27"},{"1":"Germany","2":"1964","3":"fertility","4":"NA","5":"2.49"},{"1":"South Korea","2":"1964","3":"fertility","4":"NA","5":"5.36"},{"1":"Germany","2":"1964","3":"life","4":"expectancy","5":"70.66"},{"1":"South Korea","2":"1964","3":"life","4":"expectancy","5":"56.04"},{"1":"Germany","2":"1965","3":"fertility","4":"NA","5":"2.48"},{"1":"South Korea","2":"1965","3":"fertility","4":"NA","5":"5.16"},{"1":"Germany","2":"1965","3":"life","4":"expectancy","5":"70.65"},{"1":"South Korea","2":"1965","3":"life","4":"expectancy","5":"56.84"},{"1":"Germany","2":"1966","3":"fertility","4":"NA","5":"2.44"},{"1":"South Korea","2":"1966","3":"fertility","4":"NA","5":"4.99"},{"1":"Germany","2":"1966","3":"life","4":"expectancy","5":"70.77"},{"1":"South Korea","2":"1966","3":"life","4":"expectancy","5":"57.67"},{"1":"Germany","2":"1967","3":"fertility","4":"NA","5":"2.37"},{"1":"South Korea","2":"1967","3":"fertility","4":"NA","5":"4.85"},{"1":"Germany","2":"1967","3":"life","4":"expectancy","5":"70.99"},{"1":"South Korea","2":"1967","3":"life","4":"expectancy","5":"58.54"},{"1":"Germany","2":"1968","3":"fertility","4":"NA","5":"2.28"},{"1":"South Korea","2":"1968","3":"fertility","4":"NA","5":"4.73"},{"1":"Germany","2":"1968","3":"life","4":"expectancy","5":"70.64"},{"1":"South Korea","2":"1968","3":"life","4":"expectancy","5":"59.44"},{"1":"Germany","2":"1969","3":"fertility","4":"NA","5":"2.17"},{"1":"South Korea","2":"1969","3":"fertility","4":"NA","5":"4.62"},{"1":"Germany","2":"1969","3":"life","4":"expectancy","5":"70.48"},{"1":"South Korea","2":"1969","3":"life","4":"expectancy","5":"60.35"},{"1":"Germany","2":"1970","3":"fertility","4":"NA","5":"2.04"},{"1":"South Korea","2":"1970","3":"fertility","4":"NA","5":"4.53"},{"1":"Germany","2":"1970","3":"life","4":"expectancy","5":"70.72"},{"1":"South Korea","2":"1970","3":"life","4":"expectancy","5":"61.22"},{"1":"Germany","2":"1971","3":"fertility","4":"NA","5":"1.92"},{"1":"South Korea","2":"1971","3":"fertility","4":"NA","5":"4.41"},{"1":"Germany","2":"1971","3":"life","4":"expectancy","5":"70.94"},{"1":"South Korea","2":"1971","3":"life","4":"expectancy","5":"62.02"},{"1":"Germany","2":"1972","3":"fertility","4":"NA","5":"1.80"},{"1":"South Korea","2":"1972","3":"fertility","4":"NA","5":"4.27"},{"1":"Germany","2":"1972","3":"life","4":"expectancy","5":"71.16"},{"1":"South Korea","2":"1972","3":"life","4":"expectancy","5":"62.73"},{"1":"Germany","2":"1973","3":"fertility","4":"NA","5":"1.70"},{"1":"South Korea","2":"1973","3":"fertility","4":"NA","5":"4.09"},{"1":"Germany","2":"1973","3":"life","4":"expectancy","5":"71.41"},{"1":"South Korea","2":"1973","3":"life","4":"expectancy","5":"63.34"},{"1":"Germany","2":"1974","3":"fertility","4":"NA","5":"1.62"},{"1":"South Korea","2":"1974","3":"fertility","4":"NA","5":"3.87"},{"1":"Germany","2":"1974","3":"life","4":"expectancy","5":"71.71"},{"1":"South Korea","2":"1974","3":"life","4":"expectancy","5":"63.84"},{"1":"Germany","2":"1975","3":"fertility","4":"NA","5":"1.56"},{"1":"South Korea","2":"1975","3":"fertility","4":"NA","5":"3.62"},{"1":"Germany","2":"1975","3":"life","4":"expectancy","5":"71.56"},{"1":"South Korea","2":"1975","3":"life","4":"expectancy","5":"64.26"},{"1":"Germany","2":"1976","3":"fertility","4":"NA","5":"1.53"},{"1":"South Korea","2":"1976","3":"fertility","4":"NA","5":"3.36"},{"1":"Germany","2":"1976","3":"life","4":"expectancy","5":"72.02"},{"1":"South Korea","2":"1976","3":"life","4":"expectancy","5":"64.62"},{"1":"Germany","2":"1977","3":"fertility","4":"NA","5":"1.50"},{"1":"South Korea","2":"1977","3":"fertility","4":"NA","5":"3.11"},{"1":"Germany","2":"1977","3":"life","4":"expectancy","5":"72.63"},{"1":"South Korea","2":"1977","3":"life","4":"expectancy","5":"64.95"},{"1":"Germany","2":"1978","3":"fertility","4":"NA","5":"1.49"},{"1":"South Korea","2":"1978","3":"fertility","4":"NA","5":"2.88"},{"1":"Germany","2":"1978","3":"life","4":"expectancy","5":"72.60"},{"1":"South Korea","2":"1978","3":"life","4":"expectancy","5":"65.31"},{"1":"Germany","2":"1979","3":"fertility","4":"NA","5":"1.48"},{"1":"South Korea","2":"1979","3":"fertility","4":"NA","5":"2.69"},{"1":"Germany","2":"1979","3":"life","4":"expectancy","5":"72.96"},{"1":"South Korea","2":"1979","3":"life","4":"expectancy","5":"65.70"},{"1":"Germany","2":"1980","3":"fertility","4":"NA","5":"1.47"},{"1":"South Korea","2":"1980","3":"fertility","4":"NA","5":"2.52"},{"1":"Germany","2":"1980","3":"life","4":"expectancy","5":"73.14"},{"1":"South Korea","2":"1980","3":"life","4":"expectancy","5":"66.15"},{"1":"Germany","2":"1981","3":"fertility","4":"NA","5":"1.47"},{"1":"South Korea","2":"1981","3":"fertility","4":"NA","5":"2.38"},{"1":"Germany","2":"1981","3":"life","4":"expectancy","5":"73.37"},{"1":"South Korea","2":"1981","3":"life","4":"expectancy","5":"66.66"},{"1":"Germany","2":"1982","3":"fertility","4":"NA","5":"1.46"},{"1":"South Korea","2":"1982","3":"fertility","4":"NA","5":"2.24"},{"1":"Germany","2":"1982","3":"life","4":"expectancy","5":"73.69"},{"1":"South Korea","2":"1982","3":"life","4":"expectancy","5":"67.21"},{"1":"Germany","2":"1983","3":"fertility","4":"NA","5":"1.46"},{"1":"South Korea","2":"1983","3":"fertility","4":"NA","5":"2.11"},{"1":"Germany","2":"1983","3":"life","4":"expectancy","5":"73.97"},{"1":"South Korea","2":"1983","3":"life","4":"expectancy","5":"67.78"},{"1":"Germany","2":"1984","3":"fertility","4":"NA","5":"1.46"},{"1":"South Korea","2":"1984","3":"fertility","4":"NA","5":"1.98"},{"1":"Germany","2":"1984","3":"life","4":"expectancy","5":"74.44"},{"1":"South Korea","2":"1984","3":"life","4":"expectancy","5":"68.37"},{"1":"Germany","2":"1985","3":"fertility","4":"NA","5":"1.45"},{"1":"South Korea","2":"1985","3":"fertility","4":"NA","5":"1.86"},{"1":"Germany","2":"1985","3":"life","4":"expectancy","5":"74.55"},{"1":"South Korea","2":"1985","3":"life","4":"expectancy","5":"68.98"},{"1":"Germany","2":"1986","3":"fertility","4":"NA","5":"1.44"},{"1":"South Korea","2":"1986","3":"fertility","4":"NA","5":"1.75"},{"1":"Germany","2":"1986","3":"life","4":"expectancy","5":"74.75"},{"1":"South Korea","2":"1986","3":"life","4":"expectancy","5":"69.58"},{"1":"Germany","2":"1987","3":"fertility","4":"NA","5":"1.43"},{"1":"South Korea","2":"1987","3":"fertility","4":"NA","5":"1.67"},{"1":"Germany","2":"1987","3":"life","4":"expectancy","5":"75.15"},{"1":"South Korea","2":"1987","3":"life","4":"expectancy","5":"70.18"},{"1":"Germany","2":"1988","3":"fertility","4":"NA","5":"1.41"},{"1":"South Korea","2":"1988","3":"fertility","4":"NA","5":"1.63"},{"1":"Germany","2":"1988","3":"life","4":"expectancy","5":"75.33"},{"1":"South Korea","2":"1988","3":"life","4":"expectancy","5":"70.75"},{"1":"Germany","2":"1989","3":"fertility","4":"NA","5":"1.38"},{"1":"South Korea","2":"1989","3":"fertility","4":"NA","5":"1.61"},{"1":"Germany","2":"1989","3":"life","4":"expectancy","5":"75.51"},{"1":"South Korea","2":"1989","3":"life","4":"expectancy","5":"71.29"},{"1":"Germany","2":"1990","3":"fertility","4":"NA","5":"1.36"},{"1":"South Korea","2":"1990","3":"fertility","4":"NA","5":"1.61"},{"1":"Germany","2":"1990","3":"life","4":"expectancy","5":"75.40"},{"1":"South Korea","2":"1990","3":"life","4":"expectancy","5":"71.80"},{"1":"Germany","2":"1991","3":"fertility","4":"NA","5":"1.34"},{"1":"South Korea","2":"1991","3":"fertility","4":"NA","5":"1.63"},{"1":"Germany","2":"1991","3":"life","4":"expectancy","5":"75.60"},{"1":"South Korea","2":"1991","3":"life","4":"expectancy","5":"72.20"},{"1":"Germany","2":"1992","3":"fertility","4":"NA","5":"1.32"},{"1":"South Korea","2":"1992","3":"fertility","4":"NA","5":"1.65"},{"1":"Germany","2":"1992","3":"life","4":"expectancy","5":"76.00"},{"1":"South Korea","2":"1992","3":"life","4":"expectancy","5":"72.70"},{"1":"Germany","2":"1993","3":"fertility","4":"NA","5":"1.31"},{"1":"South Korea","2":"1993","3":"fertility","4":"NA","5":"1.66"},{"1":"Germany","2":"1993","3":"life","4":"expectancy","5":"76.10"},{"1":"South Korea","2":"1993","3":"life","4":"expectancy","5":"73.10"},{"1":"Germany","2":"1994","3":"fertility","4":"NA","5":"1.31"},{"1":"South Korea","2":"1994","3":"fertility","4":"NA","5":"1.65"},{"1":"Germany","2":"1994","3":"life","4":"expectancy","5":"76.40"},{"1":"South Korea","2":"1994","3":"life","4":"expectancy","5":"73.60"},{"1":"Germany","2":"1995","3":"fertility","4":"NA","5":"1.31"},{"1":"South Korea","2":"1995","3":"fertility","4":"NA","5":"1.63"},{"1":"Germany","2":"1995","3":"life","4":"expectancy","5":"76.60"},{"1":"South Korea","2":"1995","3":"life","4":"expectancy","5":"74.00"},{"1":"Germany","2":"1996","3":"fertility","4":"NA","5":"1.32"},{"1":"South Korea","2":"1996","3":"fertility","4":"NA","5":"1.59"},{"1":"Germany","2":"1996","3":"life","4":"expectancy","5":"76.90"},{"1":"South Korea","2":"1996","3":"life","4":"expectancy","5":"74.50"},{"1":"Germany","2":"1997","3":"fertility","4":"NA","5":"1.33"},{"1":"South Korea","2":"1997","3":"fertility","4":"NA","5":"1.54"},{"1":"Germany","2":"1997","3":"life","4":"expectancy","5":"77.30"},{"1":"South Korea","2":"1997","3":"life","4":"expectancy","5":"74.90"},{"1":"Germany","2":"1998","3":"fertility","4":"NA","5":"1.34"},{"1":"South Korea","2":"1998","3":"fertility","4":"NA","5":"1.48"},{"1":"Germany","2":"1998","3":"life","4":"expectancy","5":"77.60"},{"1":"South Korea","2":"1998","3":"life","4":"expectancy","5":"75.40"},{"1":"Germany","2":"1999","3":"fertility","4":"NA","5":"1.35"},{"1":"South Korea","2":"1999","3":"fertility","4":"NA","5":"1.41"},{"1":"Germany","2":"1999","3":"life","4":"expectancy","5":"77.80"},{"1":"South Korea","2":"1999","3":"life","4":"expectancy","5":"75.80"},{"1":"Germany","2":"2000","3":"fertility","4":"NA","5":"1.35"},{"1":"South Korea","2":"2000","3":"fertility","4":"NA","5":"1.35"},{"1":"Germany","2":"2000","3":"life","4":"expectancy","5":"78.10"},{"1":"South Korea","2":"2000","3":"life","4":"expectancy","5":"76.30"},{"1":"Germany","2":"2001","3":"fertility","4":"NA","5":"1.35"},{"1":"South Korea","2":"2001","3":"fertility","4":"NA","5":"1.30"},{"1":"Germany","2":"2001","3":"life","4":"expectancy","5":"78.40"},{"1":"South Korea","2":"2001","3":"life","4":"expectancy","5":"76.70"},{"1":"Germany","2":"2002","3":"fertility","4":"NA","5":"1.35"},{"1":"South Korea","2":"2002","3":"fertility","4":"NA","5":"1.25"},{"1":"Germany","2":"2002","3":"life","4":"expectancy","5":"78.60"},{"1":"South Korea","2":"2002","3":"life","4":"expectancy","5":"77.10"},{"1":"Germany","2":"2003","3":"fertility","4":"NA","5":"1.35"},{"1":"South Korea","2":"2003","3":"fertility","4":"NA","5":"1.22"},{"1":"Germany","2":"2003","3":"life","4":"expectancy","5":"78.80"},{"1":"South Korea","2":"2003","3":"life","4":"expectancy","5":"77.70"},{"1":"Germany","2":"2004","3":"fertility","4":"NA","5":"1.35"},{"1":"South Korea","2":"2004","3":"fertility","4":"NA","5":"1.20"},{"1":"Germany","2":"2004","3":"life","4":"expectancy","5":"79.20"},{"1":"South Korea","2":"2004","3":"life","4":"expectancy","5":"78.20"},{"1":"Germany","2":"2005","3":"fertility","4":"NA","5":"1.35"},{"1":"South Korea","2":"2005","3":"fertility","4":"NA","5":"1.20"},{"1":"Germany","2":"2005","3":"life","4":"expectancy","5":"79.40"},{"1":"South Korea","2":"2005","3":"life","4":"expectancy","5":"78.70"},{"1":"Germany","2":"2006","3":"fertility","4":"NA","5":"1.36"},{"1":"South Korea","2":"2006","3":"fertility","4":"NA","5":"1.20"},{"1":"Germany","2":"2006","3":"life","4":"expectancy","5":"79.70"},{"1":"South Korea","2":"2006","3":"life","4":"expectancy","5":"79.10"},{"1":"Germany","2":"2007","3":"fertility","4":"NA","5":"1.36"},{"1":"South Korea","2":"2007","3":"fertility","4":"NA","5":"1.21"},{"1":"Germany","2":"2007","3":"life","4":"expectancy","5":"79.90"},{"1":"South Korea","2":"2007","3":"life","4":"expectancy","5":"79.40"},{"1":"Germany","2":"2008","3":"fertility","4":"NA","5":"1.37"},{"1":"South Korea","2":"2008","3":"fertility","4":"NA","5":"1.23"},{"1":"Germany","2":"2008","3":"life","4":"expectancy","5":"80.00"},{"1":"South Korea","2":"2008","3":"life","4":"expectancy","5":"79.80"},{"1":"Germany","2":"2009","3":"fertility","4":"NA","5":"1.38"},{"1":"South Korea","2":"2009","3":"fertility","4":"NA","5":"1.25"},{"1":"Germany","2":"2009","3":"life","4":"expectancy","5":"80.10"},{"1":"South Korea","2":"2009","3":"life","4":"expectancy","5":"80.10"},{"1":"Germany","2":"2010","3":"fertility","4":"NA","5":"1.39"},{"1":"South Korea","2":"2010","3":"fertility","4":"NA","5":"1.27"},{"1":"Germany","2":"2010","3":"life","4":"expectancy","5":"80.30"},{"1":"South Korea","2":"2010","3":"life","4":"expectancy","5":"80.40"},{"1":"Germany","2":"2011","3":"fertility","4":"NA","5":"1.40"},{"1":"South Korea","2":"2011","3":"fertility","4":"NA","5":"1.29"},{"1":"Germany","2":"2011","3":"life","4":"expectancy","5":"80.50"},{"1":"South Korea","2":"2011","3":"life","4":"expectancy","5":"80.60"},{"1":"Germany","2":"2012","3":"fertility","4":"NA","5":"1.41"},{"1":"South Korea","2":"2012","3":"fertility","4":"NA","5":"1.30"},{"1":"Germany","2":"2012","3":"life","4":"expectancy","5":"80.60"},{"1":"South Korea","2":"2012","3":"life","4":"expectancy","5":"80.70"},{"1":"Germany","2":"2013","3":"fertility","4":"NA","5":"1.42"},{"1":"South Korea","2":"2013","3":"fertility","4":"NA","5":"1.32"},{"1":"Germany","2":"2013","3":"life","4":"expectancy","5":"80.70"},{"1":"South Korea","2":"2013","3":"life","4":"expectancy","5":"80.90"},{"1":"Germany","2":"2014","3":"fertility","4":"NA","5":"1.43"},{"1":"South Korea","2":"2014","3":"fertility","4":"NA","5":"1.34"},{"1":"Germany","2":"2014","3":"life","4":"expectancy","5":"80.70"},{"1":"South Korea","2":"2014","3":"life","4":"expectancy","5":"80.90"},{"1":"Germany","2":"2015","3":"fertility","4":"NA","5":"1.44"},{"1":"South Korea","2":"2015","3":"fertility","4":"NA","5":"1.36"},{"1":"Germany","2":"2015","3":"life","4":"expectancy","5":"80.80"},{"1":"South Korea","2":"2015","3":"life","4":"expectancy","5":"81.00"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>However, if we read the <code>separate</code> help file, we find that a better approach is to merge the last two variables when there is an extra separation:</p>
<pre class="r"><code>dat %&gt;% separate(key, c(&quot;year&quot;, &quot;variable_name&quot;), extra = &quot;merge&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["year"],"name":[2],"type":["chr"],"align":["left"]},{"label":["variable_name"],"name":[3],"type":["chr"],"align":["left"]},{"label":["value"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Germany","2":"1960","3":"fertility","4":"2.41"},{"1":"South Korea","2":"1960","3":"fertility","4":"6.16"},{"1":"Germany","2":"1960","3":"life_expectancy","4":"69.26"},{"1":"South Korea","2":"1960","3":"life_expectancy","4":"53.02"},{"1":"Germany","2":"1961","3":"fertility","4":"2.44"},{"1":"South Korea","2":"1961","3":"fertility","4":"5.99"},{"1":"Germany","2":"1961","3":"life_expectancy","4":"69.85"},{"1":"South Korea","2":"1961","3":"life_expectancy","4":"53.75"},{"1":"Germany","2":"1962","3":"fertility","4":"2.47"},{"1":"South Korea","2":"1962","3":"fertility","4":"5.79"},{"1":"Germany","2":"1962","3":"life_expectancy","4":"70.01"},{"1":"South Korea","2":"1962","3":"life_expectancy","4":"54.51"},{"1":"Germany","2":"1963","3":"fertility","4":"2.49"},{"1":"South Korea","2":"1963","3":"fertility","4":"5.57"},{"1":"Germany","2":"1963","3":"life_expectancy","4":"70.10"},{"1":"South Korea","2":"1963","3":"life_expectancy","4":"55.27"},{"1":"Germany","2":"1964","3":"fertility","4":"2.49"},{"1":"South Korea","2":"1964","3":"fertility","4":"5.36"},{"1":"Germany","2":"1964","3":"life_expectancy","4":"70.66"},{"1":"South Korea","2":"1964","3":"life_expectancy","4":"56.04"},{"1":"Germany","2":"1965","3":"fertility","4":"2.48"},{"1":"South Korea","2":"1965","3":"fertility","4":"5.16"},{"1":"Germany","2":"1965","3":"life_expectancy","4":"70.65"},{"1":"South Korea","2":"1965","3":"life_expectancy","4":"56.84"},{"1":"Germany","2":"1966","3":"fertility","4":"2.44"},{"1":"South Korea","2":"1966","3":"fertility","4":"4.99"},{"1":"Germany","2":"1966","3":"life_expectancy","4":"70.77"},{"1":"South Korea","2":"1966","3":"life_expectancy","4":"57.67"},{"1":"Germany","2":"1967","3":"fertility","4":"2.37"},{"1":"South Korea","2":"1967","3":"fertility","4":"4.85"},{"1":"Germany","2":"1967","3":"life_expectancy","4":"70.99"},{"1":"South Korea","2":"1967","3":"life_expectancy","4":"58.54"},{"1":"Germany","2":"1968","3":"fertility","4":"2.28"},{"1":"South Korea","2":"1968","3":"fertility","4":"4.73"},{"1":"Germany","2":"1968","3":"life_expectancy","4":"70.64"},{"1":"South Korea","2":"1968","3":"life_expectancy","4":"59.44"},{"1":"Germany","2":"1969","3":"fertility","4":"2.17"},{"1":"South Korea","2":"1969","3":"fertility","4":"4.62"},{"1":"Germany","2":"1969","3":"life_expectancy","4":"70.48"},{"1":"South Korea","2":"1969","3":"life_expectancy","4":"60.35"},{"1":"Germany","2":"1970","3":"fertility","4":"2.04"},{"1":"South Korea","2":"1970","3":"fertility","4":"4.53"},{"1":"Germany","2":"1970","3":"life_expectancy","4":"70.72"},{"1":"South Korea","2":"1970","3":"life_expectancy","4":"61.22"},{"1":"Germany","2":"1971","3":"fertility","4":"1.92"},{"1":"South Korea","2":"1971","3":"fertility","4":"4.41"},{"1":"Germany","2":"1971","3":"life_expectancy","4":"70.94"},{"1":"South Korea","2":"1971","3":"life_expectancy","4":"62.02"},{"1":"Germany","2":"1972","3":"fertility","4":"1.80"},{"1":"South Korea","2":"1972","3":"fertility","4":"4.27"},{"1":"Germany","2":"1972","3":"life_expectancy","4":"71.16"},{"1":"South Korea","2":"1972","3":"life_expectancy","4":"62.73"},{"1":"Germany","2":"1973","3":"fertility","4":"1.70"},{"1":"South Korea","2":"1973","3":"fertility","4":"4.09"},{"1":"Germany","2":"1973","3":"life_expectancy","4":"71.41"},{"1":"South Korea","2":"1973","3":"life_expectancy","4":"63.34"},{"1":"Germany","2":"1974","3":"fertility","4":"1.62"},{"1":"South Korea","2":"1974","3":"fertility","4":"3.87"},{"1":"Germany","2":"1974","3":"life_expectancy","4":"71.71"},{"1":"South Korea","2":"1974","3":"life_expectancy","4":"63.84"},{"1":"Germany","2":"1975","3":"fertility","4":"1.56"},{"1":"South Korea","2":"1975","3":"fertility","4":"3.62"},{"1":"Germany","2":"1975","3":"life_expectancy","4":"71.56"},{"1":"South Korea","2":"1975","3":"life_expectancy","4":"64.26"},{"1":"Germany","2":"1976","3":"fertility","4":"1.53"},{"1":"South Korea","2":"1976","3":"fertility","4":"3.36"},{"1":"Germany","2":"1976","3":"life_expectancy","4":"72.02"},{"1":"South Korea","2":"1976","3":"life_expectancy","4":"64.62"},{"1":"Germany","2":"1977","3":"fertility","4":"1.50"},{"1":"South Korea","2":"1977","3":"fertility","4":"3.11"},{"1":"Germany","2":"1977","3":"life_expectancy","4":"72.63"},{"1":"South Korea","2":"1977","3":"life_expectancy","4":"64.95"},{"1":"Germany","2":"1978","3":"fertility","4":"1.49"},{"1":"South Korea","2":"1978","3":"fertility","4":"2.88"},{"1":"Germany","2":"1978","3":"life_expectancy","4":"72.60"},{"1":"South Korea","2":"1978","3":"life_expectancy","4":"65.31"},{"1":"Germany","2":"1979","3":"fertility","4":"1.48"},{"1":"South Korea","2":"1979","3":"fertility","4":"2.69"},{"1":"Germany","2":"1979","3":"life_expectancy","4":"72.96"},{"1":"South Korea","2":"1979","3":"life_expectancy","4":"65.70"},{"1":"Germany","2":"1980","3":"fertility","4":"1.47"},{"1":"South Korea","2":"1980","3":"fertility","4":"2.52"},{"1":"Germany","2":"1980","3":"life_expectancy","4":"73.14"},{"1":"South Korea","2":"1980","3":"life_expectancy","4":"66.15"},{"1":"Germany","2":"1981","3":"fertility","4":"1.47"},{"1":"South Korea","2":"1981","3":"fertility","4":"2.38"},{"1":"Germany","2":"1981","3":"life_expectancy","4":"73.37"},{"1":"South Korea","2":"1981","3":"life_expectancy","4":"66.66"},{"1":"Germany","2":"1982","3":"fertility","4":"1.46"},{"1":"South Korea","2":"1982","3":"fertility","4":"2.24"},{"1":"Germany","2":"1982","3":"life_expectancy","4":"73.69"},{"1":"South Korea","2":"1982","3":"life_expectancy","4":"67.21"},{"1":"Germany","2":"1983","3":"fertility","4":"1.46"},{"1":"South Korea","2":"1983","3":"fertility","4":"2.11"},{"1":"Germany","2":"1983","3":"life_expectancy","4":"73.97"},{"1":"South Korea","2":"1983","3":"life_expectancy","4":"67.78"},{"1":"Germany","2":"1984","3":"fertility","4":"1.46"},{"1":"South Korea","2":"1984","3":"fertility","4":"1.98"},{"1":"Germany","2":"1984","3":"life_expectancy","4":"74.44"},{"1":"South Korea","2":"1984","3":"life_expectancy","4":"68.37"},{"1":"Germany","2":"1985","3":"fertility","4":"1.45"},{"1":"South Korea","2":"1985","3":"fertility","4":"1.86"},{"1":"Germany","2":"1985","3":"life_expectancy","4":"74.55"},{"1":"South Korea","2":"1985","3":"life_expectancy","4":"68.98"},{"1":"Germany","2":"1986","3":"fertility","4":"1.44"},{"1":"South Korea","2":"1986","3":"fertility","4":"1.75"},{"1":"Germany","2":"1986","3":"life_expectancy","4":"74.75"},{"1":"South Korea","2":"1986","3":"life_expectancy","4":"69.58"},{"1":"Germany","2":"1987","3":"fertility","4":"1.43"},{"1":"South Korea","2":"1987","3":"fertility","4":"1.67"},{"1":"Germany","2":"1987","3":"life_expectancy","4":"75.15"},{"1":"South Korea","2":"1987","3":"life_expectancy","4":"70.18"},{"1":"Germany","2":"1988","3":"fertility","4":"1.41"},{"1":"South Korea","2":"1988","3":"fertility","4":"1.63"},{"1":"Germany","2":"1988","3":"life_expectancy","4":"75.33"},{"1":"South Korea","2":"1988","3":"life_expectancy","4":"70.75"},{"1":"Germany","2":"1989","3":"fertility","4":"1.38"},{"1":"South Korea","2":"1989","3":"fertility","4":"1.61"},{"1":"Germany","2":"1989","3":"life_expectancy","4":"75.51"},{"1":"South Korea","2":"1989","3":"life_expectancy","4":"71.29"},{"1":"Germany","2":"1990","3":"fertility","4":"1.36"},{"1":"South Korea","2":"1990","3":"fertility","4":"1.61"},{"1":"Germany","2":"1990","3":"life_expectancy","4":"75.40"},{"1":"South Korea","2":"1990","3":"life_expectancy","4":"71.80"},{"1":"Germany","2":"1991","3":"fertility","4":"1.34"},{"1":"South Korea","2":"1991","3":"fertility","4":"1.63"},{"1":"Germany","2":"1991","3":"life_expectancy","4":"75.60"},{"1":"South Korea","2":"1991","3":"life_expectancy","4":"72.20"},{"1":"Germany","2":"1992","3":"fertility","4":"1.32"},{"1":"South Korea","2":"1992","3":"fertility","4":"1.65"},{"1":"Germany","2":"1992","3":"life_expectancy","4":"76.00"},{"1":"South Korea","2":"1992","3":"life_expectancy","4":"72.70"},{"1":"Germany","2":"1993","3":"fertility","4":"1.31"},{"1":"South Korea","2":"1993","3":"fertility","4":"1.66"},{"1":"Germany","2":"1993","3":"life_expectancy","4":"76.10"},{"1":"South Korea","2":"1993","3":"life_expectancy","4":"73.10"},{"1":"Germany","2":"1994","3":"fertility","4":"1.31"},{"1":"South Korea","2":"1994","3":"fertility","4":"1.65"},{"1":"Germany","2":"1994","3":"life_expectancy","4":"76.40"},{"1":"South Korea","2":"1994","3":"life_expectancy","4":"73.60"},{"1":"Germany","2":"1995","3":"fertility","4":"1.31"},{"1":"South Korea","2":"1995","3":"fertility","4":"1.63"},{"1":"Germany","2":"1995","3":"life_expectancy","4":"76.60"},{"1":"South Korea","2":"1995","3":"life_expectancy","4":"74.00"},{"1":"Germany","2":"1996","3":"fertility","4":"1.32"},{"1":"South Korea","2":"1996","3":"fertility","4":"1.59"},{"1":"Germany","2":"1996","3":"life_expectancy","4":"76.90"},{"1":"South Korea","2":"1996","3":"life_expectancy","4":"74.50"},{"1":"Germany","2":"1997","3":"fertility","4":"1.33"},{"1":"South Korea","2":"1997","3":"fertility","4":"1.54"},{"1":"Germany","2":"1997","3":"life_expectancy","4":"77.30"},{"1":"South Korea","2":"1997","3":"life_expectancy","4":"74.90"},{"1":"Germany","2":"1998","3":"fertility","4":"1.34"},{"1":"South Korea","2":"1998","3":"fertility","4":"1.48"},{"1":"Germany","2":"1998","3":"life_expectancy","4":"77.60"},{"1":"South Korea","2":"1998","3":"life_expectancy","4":"75.40"},{"1":"Germany","2":"1999","3":"fertility","4":"1.35"},{"1":"South Korea","2":"1999","3":"fertility","4":"1.41"},{"1":"Germany","2":"1999","3":"life_expectancy","4":"77.80"},{"1":"South Korea","2":"1999","3":"life_expectancy","4":"75.80"},{"1":"Germany","2":"2000","3":"fertility","4":"1.35"},{"1":"South Korea","2":"2000","3":"fertility","4":"1.35"},{"1":"Germany","2":"2000","3":"life_expectancy","4":"78.10"},{"1":"South Korea","2":"2000","3":"life_expectancy","4":"76.30"},{"1":"Germany","2":"2001","3":"fertility","4":"1.35"},{"1":"South Korea","2":"2001","3":"fertility","4":"1.30"},{"1":"Germany","2":"2001","3":"life_expectancy","4":"78.40"},{"1":"South Korea","2":"2001","3":"life_expectancy","4":"76.70"},{"1":"Germany","2":"2002","3":"fertility","4":"1.35"},{"1":"South Korea","2":"2002","3":"fertility","4":"1.25"},{"1":"Germany","2":"2002","3":"life_expectancy","4":"78.60"},{"1":"South Korea","2":"2002","3":"life_expectancy","4":"77.10"},{"1":"Germany","2":"2003","3":"fertility","4":"1.35"},{"1":"South Korea","2":"2003","3":"fertility","4":"1.22"},{"1":"Germany","2":"2003","3":"life_expectancy","4":"78.80"},{"1":"South Korea","2":"2003","3":"life_expectancy","4":"77.70"},{"1":"Germany","2":"2004","3":"fertility","4":"1.35"},{"1":"South Korea","2":"2004","3":"fertility","4":"1.20"},{"1":"Germany","2":"2004","3":"life_expectancy","4":"79.20"},{"1":"South Korea","2":"2004","3":"life_expectancy","4":"78.20"},{"1":"Germany","2":"2005","3":"fertility","4":"1.35"},{"1":"South Korea","2":"2005","3":"fertility","4":"1.20"},{"1":"Germany","2":"2005","3":"life_expectancy","4":"79.40"},{"1":"South Korea","2":"2005","3":"life_expectancy","4":"78.70"},{"1":"Germany","2":"2006","3":"fertility","4":"1.36"},{"1":"South Korea","2":"2006","3":"fertility","4":"1.20"},{"1":"Germany","2":"2006","3":"life_expectancy","4":"79.70"},{"1":"South Korea","2":"2006","3":"life_expectancy","4":"79.10"},{"1":"Germany","2":"2007","3":"fertility","4":"1.36"},{"1":"South Korea","2":"2007","3":"fertility","4":"1.21"},{"1":"Germany","2":"2007","3":"life_expectancy","4":"79.90"},{"1":"South Korea","2":"2007","3":"life_expectancy","4":"79.40"},{"1":"Germany","2":"2008","3":"fertility","4":"1.37"},{"1":"South Korea","2":"2008","3":"fertility","4":"1.23"},{"1":"Germany","2":"2008","3":"life_expectancy","4":"80.00"},{"1":"South Korea","2":"2008","3":"life_expectancy","4":"79.80"},{"1":"Germany","2":"2009","3":"fertility","4":"1.38"},{"1":"South Korea","2":"2009","3":"fertility","4":"1.25"},{"1":"Germany","2":"2009","3":"life_expectancy","4":"80.10"},{"1":"South Korea","2":"2009","3":"life_expectancy","4":"80.10"},{"1":"Germany","2":"2010","3":"fertility","4":"1.39"},{"1":"South Korea","2":"2010","3":"fertility","4":"1.27"},{"1":"Germany","2":"2010","3":"life_expectancy","4":"80.30"},{"1":"South Korea","2":"2010","3":"life_expectancy","4":"80.40"},{"1":"Germany","2":"2011","3":"fertility","4":"1.40"},{"1":"South Korea","2":"2011","3":"fertility","4":"1.29"},{"1":"Germany","2":"2011","3":"life_expectancy","4":"80.50"},{"1":"South Korea","2":"2011","3":"life_expectancy","4":"80.60"},{"1":"Germany","2":"2012","3":"fertility","4":"1.41"},{"1":"South Korea","2":"2012","3":"fertility","4":"1.30"},{"1":"Germany","2":"2012","3":"life_expectancy","4":"80.60"},{"1":"South Korea","2":"2012","3":"life_expectancy","4":"80.70"},{"1":"Germany","2":"2013","3":"fertility","4":"1.42"},{"1":"South Korea","2":"2013","3":"fertility","4":"1.32"},{"1":"Germany","2":"2013","3":"life_expectancy","4":"80.70"},{"1":"South Korea","2":"2013","3":"life_expectancy","4":"80.90"},{"1":"Germany","2":"2014","3":"fertility","4":"1.43"},{"1":"South Korea","2":"2014","3":"fertility","4":"1.34"},{"1":"Germany","2":"2014","3":"life_expectancy","4":"80.70"},{"1":"South Korea","2":"2014","3":"life_expectancy","4":"80.90"},{"1":"Germany","2":"2015","3":"fertility","4":"1.44"},{"1":"South Korea","2":"2015","3":"fertility","4":"1.36"},{"1":"Germany","2":"2015","3":"life_expectancy","4":"80.80"},{"1":"South Korea","2":"2015","3":"life_expectancy","4":"81.00"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>This achieves the separation we wanted. However, we are not done yet. We need to create a column for each variable. As we learned, the <code>spread</code> function can do this:</p>
<pre class="r"><code>dat %&gt;% 
  separate(key, c(&quot;year&quot;, &quot;variable_name&quot;), extra = &quot;merge&quot;) %&gt;%
  spread(variable_name, value) </code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["year"],"name":[2],"type":["chr"],"align":["left"]},{"label":["fertility"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["life_expectancy"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Germany","2":"1960","3":"2.41","4":"69.26"},{"1":"Germany","2":"1961","3":"2.44","4":"69.85"},{"1":"Germany","2":"1962","3":"2.47","4":"70.01"},{"1":"Germany","2":"1963","3":"2.49","4":"70.10"},{"1":"Germany","2":"1964","3":"2.49","4":"70.66"},{"1":"Germany","2":"1965","3":"2.48","4":"70.65"},{"1":"Germany","2":"1966","3":"2.44","4":"70.77"},{"1":"Germany","2":"1967","3":"2.37","4":"70.99"},{"1":"Germany","2":"1968","3":"2.28","4":"70.64"},{"1":"Germany","2":"1969","3":"2.17","4":"70.48"},{"1":"Germany","2":"1970","3":"2.04","4":"70.72"},{"1":"Germany","2":"1971","3":"1.92","4":"70.94"},{"1":"Germany","2":"1972","3":"1.80","4":"71.16"},{"1":"Germany","2":"1973","3":"1.70","4":"71.41"},{"1":"Germany","2":"1974","3":"1.62","4":"71.71"},{"1":"Germany","2":"1975","3":"1.56","4":"71.56"},{"1":"Germany","2":"1976","3":"1.53","4":"72.02"},{"1":"Germany","2":"1977","3":"1.50","4":"72.63"},{"1":"Germany","2":"1978","3":"1.49","4":"72.60"},{"1":"Germany","2":"1979","3":"1.48","4":"72.96"},{"1":"Germany","2":"1980","3":"1.47","4":"73.14"},{"1":"Germany","2":"1981","3":"1.47","4":"73.37"},{"1":"Germany","2":"1982","3":"1.46","4":"73.69"},{"1":"Germany","2":"1983","3":"1.46","4":"73.97"},{"1":"Germany","2":"1984","3":"1.46","4":"74.44"},{"1":"Germany","2":"1985","3":"1.45","4":"74.55"},{"1":"Germany","2":"1986","3":"1.44","4":"74.75"},{"1":"Germany","2":"1987","3":"1.43","4":"75.15"},{"1":"Germany","2":"1988","3":"1.41","4":"75.33"},{"1":"Germany","2":"1989","3":"1.38","4":"75.51"},{"1":"Germany","2":"1990","3":"1.36","4":"75.40"},{"1":"Germany","2":"1991","3":"1.34","4":"75.60"},{"1":"Germany","2":"1992","3":"1.32","4":"76.00"},{"1":"Germany","2":"1993","3":"1.31","4":"76.10"},{"1":"Germany","2":"1994","3":"1.31","4":"76.40"},{"1":"Germany","2":"1995","3":"1.31","4":"76.60"},{"1":"Germany","2":"1996","3":"1.32","4":"76.90"},{"1":"Germany","2":"1997","3":"1.33","4":"77.30"},{"1":"Germany","2":"1998","3":"1.34","4":"77.60"},{"1":"Germany","2":"1999","3":"1.35","4":"77.80"},{"1":"Germany","2":"2000","3":"1.35","4":"78.10"},{"1":"Germany","2":"2001","3":"1.35","4":"78.40"},{"1":"Germany","2":"2002","3":"1.35","4":"78.60"},{"1":"Germany","2":"2003","3":"1.35","4":"78.80"},{"1":"Germany","2":"2004","3":"1.35","4":"79.20"},{"1":"Germany","2":"2005","3":"1.35","4":"79.40"},{"1":"Germany","2":"2006","3":"1.36","4":"79.70"},{"1":"Germany","2":"2007","3":"1.36","4":"79.90"},{"1":"Germany","2":"2008","3":"1.37","4":"80.00"},{"1":"Germany","2":"2009","3":"1.38","4":"80.10"},{"1":"Germany","2":"2010","3":"1.39","4":"80.30"},{"1":"Germany","2":"2011","3":"1.40","4":"80.50"},{"1":"Germany","2":"2012","3":"1.41","4":"80.60"},{"1":"Germany","2":"2013","3":"1.42","4":"80.70"},{"1":"Germany","2":"2014","3":"1.43","4":"80.70"},{"1":"Germany","2":"2015","3":"1.44","4":"80.80"},{"1":"South Korea","2":"1960","3":"6.16","4":"53.02"},{"1":"South Korea","2":"1961","3":"5.99","4":"53.75"},{"1":"South Korea","2":"1962","3":"5.79","4":"54.51"},{"1":"South Korea","2":"1963","3":"5.57","4":"55.27"},{"1":"South Korea","2":"1964","3":"5.36","4":"56.04"},{"1":"South Korea","2":"1965","3":"5.16","4":"56.84"},{"1":"South Korea","2":"1966","3":"4.99","4":"57.67"},{"1":"South Korea","2":"1967","3":"4.85","4":"58.54"},{"1":"South Korea","2":"1968","3":"4.73","4":"59.44"},{"1":"South Korea","2":"1969","3":"4.62","4":"60.35"},{"1":"South Korea","2":"1970","3":"4.53","4":"61.22"},{"1":"South Korea","2":"1971","3":"4.41","4":"62.02"},{"1":"South Korea","2":"1972","3":"4.27","4":"62.73"},{"1":"South Korea","2":"1973","3":"4.09","4":"63.34"},{"1":"South Korea","2":"1974","3":"3.87","4":"63.84"},{"1":"South Korea","2":"1975","3":"3.62","4":"64.26"},{"1":"South Korea","2":"1976","3":"3.36","4":"64.62"},{"1":"South Korea","2":"1977","3":"3.11","4":"64.95"},{"1":"South Korea","2":"1978","3":"2.88","4":"65.31"},{"1":"South Korea","2":"1979","3":"2.69","4":"65.70"},{"1":"South Korea","2":"1980","3":"2.52","4":"66.15"},{"1":"South Korea","2":"1981","3":"2.38","4":"66.66"},{"1":"South Korea","2":"1982","3":"2.24","4":"67.21"},{"1":"South Korea","2":"1983","3":"2.11","4":"67.78"},{"1":"South Korea","2":"1984","3":"1.98","4":"68.37"},{"1":"South Korea","2":"1985","3":"1.86","4":"68.98"},{"1":"South Korea","2":"1986","3":"1.75","4":"69.58"},{"1":"South Korea","2":"1987","3":"1.67","4":"70.18"},{"1":"South Korea","2":"1988","3":"1.63","4":"70.75"},{"1":"South Korea","2":"1989","3":"1.61","4":"71.29"},{"1":"South Korea","2":"1990","3":"1.61","4":"71.80"},{"1":"South Korea","2":"1991","3":"1.63","4":"72.20"},{"1":"South Korea","2":"1992","3":"1.65","4":"72.70"},{"1":"South Korea","2":"1993","3":"1.66","4":"73.10"},{"1":"South Korea","2":"1994","3":"1.65","4":"73.60"},{"1":"South Korea","2":"1995","3":"1.63","4":"74.00"},{"1":"South Korea","2":"1996","3":"1.59","4":"74.50"},{"1":"South Korea","2":"1997","3":"1.54","4":"74.90"},{"1":"South Korea","2":"1998","3":"1.48","4":"75.40"},{"1":"South Korea","2":"1999","3":"1.41","4":"75.80"},{"1":"South Korea","2":"2000","3":"1.35","4":"76.30"},{"1":"South Korea","2":"2001","3":"1.30","4":"76.70"},{"1":"South Korea","2":"2002","3":"1.25","4":"77.10"},{"1":"South Korea","2":"2003","3":"1.22","4":"77.70"},{"1":"South Korea","2":"2004","3":"1.20","4":"78.20"},{"1":"South Korea","2":"2005","3":"1.20","4":"78.70"},{"1":"South Korea","2":"2006","3":"1.20","4":"79.10"},{"1":"South Korea","2":"2007","3":"1.21","4":"79.40"},{"1":"South Korea","2":"2008","3":"1.23","4":"79.80"},{"1":"South Korea","2":"2009","3":"1.25","4":"80.10"},{"1":"South Korea","2":"2010","3":"1.27","4":"80.40"},{"1":"South Korea","2":"2011","3":"1.29","4":"80.60"},{"1":"South Korea","2":"2012","3":"1.30","4":"80.70"},{"1":"South Korea","2":"2013","3":"1.32","4":"80.90"},{"1":"South Korea","2":"2014","3":"1.34","4":"80.90"},{"1":"South Korea","2":"2015","3":"1.36","4":"81.00"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The data is now in tidy format with one row for each observation with three variables: year, fertility, and life expectancy.</p>
</div>
<div id="section-unite" class="section level3">
<h3><strong><code>unite</code></strong></h3>
<p>It is sometimes useful to do the inverse of <code>separate</code>, unite two columns into one. To demonstrate how to use <code>unite</code>, we show code that, although <em>not</em> the optimal approach, serves as an illustration. Suppose that we did not know about <code>extra</code> and used this command to separate:</p>
<pre class="r"><code>dat %&gt;% 
  separate(key, var_names, fill = &quot;right&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["year"],"name":[2],"type":["chr"],"align":["left"]},{"label":["first_variable_name"],"name":[3],"type":["chr"],"align":["left"]},{"label":["second_variable_name"],"name":[4],"type":["chr"],"align":["left"]},{"label":["value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Germany","2":"1960","3":"fertility","4":"NA","5":"2.41"},{"1":"South Korea","2":"1960","3":"fertility","4":"NA","5":"6.16"},{"1":"Germany","2":"1960","3":"life","4":"expectancy","5":"69.26"},{"1":"South Korea","2":"1960","3":"life","4":"expectancy","5":"53.02"},{"1":"Germany","2":"1961","3":"fertility","4":"NA","5":"2.44"},{"1":"South Korea","2":"1961","3":"fertility","4":"NA","5":"5.99"},{"1":"Germany","2":"1961","3":"life","4":"expectancy","5":"69.85"},{"1":"South Korea","2":"1961","3":"life","4":"expectancy","5":"53.75"},{"1":"Germany","2":"1962","3":"fertility","4":"NA","5":"2.47"},{"1":"South Korea","2":"1962","3":"fertility","4":"NA","5":"5.79"},{"1":"Germany","2":"1962","3":"life","4":"expectancy","5":"70.01"},{"1":"South Korea","2":"1962","3":"life","4":"expectancy","5":"54.51"},{"1":"Germany","2":"1963","3":"fertility","4":"NA","5":"2.49"},{"1":"South Korea","2":"1963","3":"fertility","4":"NA","5":"5.57"},{"1":"Germany","2":"1963","3":"life","4":"expectancy","5":"70.10"},{"1":"South Korea","2":"1963","3":"life","4":"expectancy","5":"55.27"},{"1":"Germany","2":"1964","3":"fertility","4":"NA","5":"2.49"},{"1":"South Korea","2":"1964","3":"fertility","4":"NA","5":"5.36"},{"1":"Germany","2":"1964","3":"life","4":"expectancy","5":"70.66"},{"1":"South Korea","2":"1964","3":"life","4":"expectancy","5":"56.04"},{"1":"Germany","2":"1965","3":"fertility","4":"NA","5":"2.48"},{"1":"South Korea","2":"1965","3":"fertility","4":"NA","5":"5.16"},{"1":"Germany","2":"1965","3":"life","4":"expectancy","5":"70.65"},{"1":"South Korea","2":"1965","3":"life","4":"expectancy","5":"56.84"},{"1":"Germany","2":"1966","3":"fertility","4":"NA","5":"2.44"},{"1":"South Korea","2":"1966","3":"fertility","4":"NA","5":"4.99"},{"1":"Germany","2":"1966","3":"life","4":"expectancy","5":"70.77"},{"1":"South Korea","2":"1966","3":"life","4":"expectancy","5":"57.67"},{"1":"Germany","2":"1967","3":"fertility","4":"NA","5":"2.37"},{"1":"South Korea","2":"1967","3":"fertility","4":"NA","5":"4.85"},{"1":"Germany","2":"1967","3":"life","4":"expectancy","5":"70.99"},{"1":"South Korea","2":"1967","3":"life","4":"expectancy","5":"58.54"},{"1":"Germany","2":"1968","3":"fertility","4":"NA","5":"2.28"},{"1":"South Korea","2":"1968","3":"fertility","4":"NA","5":"4.73"},{"1":"Germany","2":"1968","3":"life","4":"expectancy","5":"70.64"},{"1":"South Korea","2":"1968","3":"life","4":"expectancy","5":"59.44"},{"1":"Germany","2":"1969","3":"fertility","4":"NA","5":"2.17"},{"1":"South Korea","2":"1969","3":"fertility","4":"NA","5":"4.62"},{"1":"Germany","2":"1969","3":"life","4":"expectancy","5":"70.48"},{"1":"South Korea","2":"1969","3":"life","4":"expectancy","5":"60.35"},{"1":"Germany","2":"1970","3":"fertility","4":"NA","5":"2.04"},{"1":"South Korea","2":"1970","3":"fertility","4":"NA","5":"4.53"},{"1":"Germany","2":"1970","3":"life","4":"expectancy","5":"70.72"},{"1":"South Korea","2":"1970","3":"life","4":"expectancy","5":"61.22"},{"1":"Germany","2":"1971","3":"fertility","4":"NA","5":"1.92"},{"1":"South Korea","2":"1971","3":"fertility","4":"NA","5":"4.41"},{"1":"Germany","2":"1971","3":"life","4":"expectancy","5":"70.94"},{"1":"South Korea","2":"1971","3":"life","4":"expectancy","5":"62.02"},{"1":"Germany","2":"1972","3":"fertility","4":"NA","5":"1.80"},{"1":"South Korea","2":"1972","3":"fertility","4":"NA","5":"4.27"},{"1":"Germany","2":"1972","3":"life","4":"expectancy","5":"71.16"},{"1":"South Korea","2":"1972","3":"life","4":"expectancy","5":"62.73"},{"1":"Germany","2":"1973","3":"fertility","4":"NA","5":"1.70"},{"1":"South Korea","2":"1973","3":"fertility","4":"NA","5":"4.09"},{"1":"Germany","2":"1973","3":"life","4":"expectancy","5":"71.41"},{"1":"South Korea","2":"1973","3":"life","4":"expectancy","5":"63.34"},{"1":"Germany","2":"1974","3":"fertility","4":"NA","5":"1.62"},{"1":"South Korea","2":"1974","3":"fertility","4":"NA","5":"3.87"},{"1":"Germany","2":"1974","3":"life","4":"expectancy","5":"71.71"},{"1":"South Korea","2":"1974","3":"life","4":"expectancy","5":"63.84"},{"1":"Germany","2":"1975","3":"fertility","4":"NA","5":"1.56"},{"1":"South Korea","2":"1975","3":"fertility","4":"NA","5":"3.62"},{"1":"Germany","2":"1975","3":"life","4":"expectancy","5":"71.56"},{"1":"South Korea","2":"1975","3":"life","4":"expectancy","5":"64.26"},{"1":"Germany","2":"1976","3":"fertility","4":"NA","5":"1.53"},{"1":"South Korea","2":"1976","3":"fertility","4":"NA","5":"3.36"},{"1":"Germany","2":"1976","3":"life","4":"expectancy","5":"72.02"},{"1":"South Korea","2":"1976","3":"life","4":"expectancy","5":"64.62"},{"1":"Germany","2":"1977","3":"fertility","4":"NA","5":"1.50"},{"1":"South Korea","2":"1977","3":"fertility","4":"NA","5":"3.11"},{"1":"Germany","2":"1977","3":"life","4":"expectancy","5":"72.63"},{"1":"South Korea","2":"1977","3":"life","4":"expectancy","5":"64.95"},{"1":"Germany","2":"1978","3":"fertility","4":"NA","5":"1.49"},{"1":"South Korea","2":"1978","3":"fertility","4":"NA","5":"2.88"},{"1":"Germany","2":"1978","3":"life","4":"expectancy","5":"72.60"},{"1":"South Korea","2":"1978","3":"life","4":"expectancy","5":"65.31"},{"1":"Germany","2":"1979","3":"fertility","4":"NA","5":"1.48"},{"1":"South Korea","2":"1979","3":"fertility","4":"NA","5":"2.69"},{"1":"Germany","2":"1979","3":"life","4":"expectancy","5":"72.96"},{"1":"South Korea","2":"1979","3":"life","4":"expectancy","5":"65.70"},{"1":"Germany","2":"1980","3":"fertility","4":"NA","5":"1.47"},{"1":"South Korea","2":"1980","3":"fertility","4":"NA","5":"2.52"},{"1":"Germany","2":"1980","3":"life","4":"expectancy","5":"73.14"},{"1":"South Korea","2":"1980","3":"life","4":"expectancy","5":"66.15"},{"1":"Germany","2":"1981","3":"fertility","4":"NA","5":"1.47"},{"1":"South Korea","2":"1981","3":"fertility","4":"NA","5":"2.38"},{"1":"Germany","2":"1981","3":"life","4":"expectancy","5":"73.37"},{"1":"South Korea","2":"1981","3":"life","4":"expectancy","5":"66.66"},{"1":"Germany","2":"1982","3":"fertility","4":"NA","5":"1.46"},{"1":"South Korea","2":"1982","3":"fertility","4":"NA","5":"2.24"},{"1":"Germany","2":"1982","3":"life","4":"expectancy","5":"73.69"},{"1":"South Korea","2":"1982","3":"life","4":"expectancy","5":"67.21"},{"1":"Germany","2":"1983","3":"fertility","4":"NA","5":"1.46"},{"1":"South Korea","2":"1983","3":"fertility","4":"NA","5":"2.11"},{"1":"Germany","2":"1983","3":"life","4":"expectancy","5":"73.97"},{"1":"South Korea","2":"1983","3":"life","4":"expectancy","5":"67.78"},{"1":"Germany","2":"1984","3":"fertility","4":"NA","5":"1.46"},{"1":"South Korea","2":"1984","3":"fertility","4":"NA","5":"1.98"},{"1":"Germany","2":"1984","3":"life","4":"expectancy","5":"74.44"},{"1":"South Korea","2":"1984","3":"life","4":"expectancy","5":"68.37"},{"1":"Germany","2":"1985","3":"fertility","4":"NA","5":"1.45"},{"1":"South Korea","2":"1985","3":"fertility","4":"NA","5":"1.86"},{"1":"Germany","2":"1985","3":"life","4":"expectancy","5":"74.55"},{"1":"South Korea","2":"1985","3":"life","4":"expectancy","5":"68.98"},{"1":"Germany","2":"1986","3":"fertility","4":"NA","5":"1.44"},{"1":"South Korea","2":"1986","3":"fertility","4":"NA","5":"1.75"},{"1":"Germany","2":"1986","3":"life","4":"expectancy","5":"74.75"},{"1":"South Korea","2":"1986","3":"life","4":"expectancy","5":"69.58"},{"1":"Germany","2":"1987","3":"fertility","4":"NA","5":"1.43"},{"1":"South Korea","2":"1987","3":"fertility","4":"NA","5":"1.67"},{"1":"Germany","2":"1987","3":"life","4":"expectancy","5":"75.15"},{"1":"South Korea","2":"1987","3":"life","4":"expectancy","5":"70.18"},{"1":"Germany","2":"1988","3":"fertility","4":"NA","5":"1.41"},{"1":"South Korea","2":"1988","3":"fertility","4":"NA","5":"1.63"},{"1":"Germany","2":"1988","3":"life","4":"expectancy","5":"75.33"},{"1":"South Korea","2":"1988","3":"life","4":"expectancy","5":"70.75"},{"1":"Germany","2":"1989","3":"fertility","4":"NA","5":"1.38"},{"1":"South Korea","2":"1989","3":"fertility","4":"NA","5":"1.61"},{"1":"Germany","2":"1989","3":"life","4":"expectancy","5":"75.51"},{"1":"South Korea","2":"1989","3":"life","4":"expectancy","5":"71.29"},{"1":"Germany","2":"1990","3":"fertility","4":"NA","5":"1.36"},{"1":"South Korea","2":"1990","3":"fertility","4":"NA","5":"1.61"},{"1":"Germany","2":"1990","3":"life","4":"expectancy","5":"75.40"},{"1":"South Korea","2":"1990","3":"life","4":"expectancy","5":"71.80"},{"1":"Germany","2":"1991","3":"fertility","4":"NA","5":"1.34"},{"1":"South Korea","2":"1991","3":"fertility","4":"NA","5":"1.63"},{"1":"Germany","2":"1991","3":"life","4":"expectancy","5":"75.60"},{"1":"South Korea","2":"1991","3":"life","4":"expectancy","5":"72.20"},{"1":"Germany","2":"1992","3":"fertility","4":"NA","5":"1.32"},{"1":"South Korea","2":"1992","3":"fertility","4":"NA","5":"1.65"},{"1":"Germany","2":"1992","3":"life","4":"expectancy","5":"76.00"},{"1":"South Korea","2":"1992","3":"life","4":"expectancy","5":"72.70"},{"1":"Germany","2":"1993","3":"fertility","4":"NA","5":"1.31"},{"1":"South Korea","2":"1993","3":"fertility","4":"NA","5":"1.66"},{"1":"Germany","2":"1993","3":"life","4":"expectancy","5":"76.10"},{"1":"South Korea","2":"1993","3":"life","4":"expectancy","5":"73.10"},{"1":"Germany","2":"1994","3":"fertility","4":"NA","5":"1.31"},{"1":"South Korea","2":"1994","3":"fertility","4":"NA","5":"1.65"},{"1":"Germany","2":"1994","3":"life","4":"expectancy","5":"76.40"},{"1":"South Korea","2":"1994","3":"life","4":"expectancy","5":"73.60"},{"1":"Germany","2":"1995","3":"fertility","4":"NA","5":"1.31"},{"1":"South Korea","2":"1995","3":"fertility","4":"NA","5":"1.63"},{"1":"Germany","2":"1995","3":"life","4":"expectancy","5":"76.60"},{"1":"South Korea","2":"1995","3":"life","4":"expectancy","5":"74.00"},{"1":"Germany","2":"1996","3":"fertility","4":"NA","5":"1.32"},{"1":"South Korea","2":"1996","3":"fertility","4":"NA","5":"1.59"},{"1":"Germany","2":"1996","3":"life","4":"expectancy","5":"76.90"},{"1":"South Korea","2":"1996","3":"life","4":"expectancy","5":"74.50"},{"1":"Germany","2":"1997","3":"fertility","4":"NA","5":"1.33"},{"1":"South Korea","2":"1997","3":"fertility","4":"NA","5":"1.54"},{"1":"Germany","2":"1997","3":"life","4":"expectancy","5":"77.30"},{"1":"South Korea","2":"1997","3":"life","4":"expectancy","5":"74.90"},{"1":"Germany","2":"1998","3":"fertility","4":"NA","5":"1.34"},{"1":"South Korea","2":"1998","3":"fertility","4":"NA","5":"1.48"},{"1":"Germany","2":"1998","3":"life","4":"expectancy","5":"77.60"},{"1":"South Korea","2":"1998","3":"life","4":"expectancy","5":"75.40"},{"1":"Germany","2":"1999","3":"fertility","4":"NA","5":"1.35"},{"1":"South Korea","2":"1999","3":"fertility","4":"NA","5":"1.41"},{"1":"Germany","2":"1999","3":"life","4":"expectancy","5":"77.80"},{"1":"South Korea","2":"1999","3":"life","4":"expectancy","5":"75.80"},{"1":"Germany","2":"2000","3":"fertility","4":"NA","5":"1.35"},{"1":"South Korea","2":"2000","3":"fertility","4":"NA","5":"1.35"},{"1":"Germany","2":"2000","3":"life","4":"expectancy","5":"78.10"},{"1":"South Korea","2":"2000","3":"life","4":"expectancy","5":"76.30"},{"1":"Germany","2":"2001","3":"fertility","4":"NA","5":"1.35"},{"1":"South Korea","2":"2001","3":"fertility","4":"NA","5":"1.30"},{"1":"Germany","2":"2001","3":"life","4":"expectancy","5":"78.40"},{"1":"South Korea","2":"2001","3":"life","4":"expectancy","5":"76.70"},{"1":"Germany","2":"2002","3":"fertility","4":"NA","5":"1.35"},{"1":"South Korea","2":"2002","3":"fertility","4":"NA","5":"1.25"},{"1":"Germany","2":"2002","3":"life","4":"expectancy","5":"78.60"},{"1":"South Korea","2":"2002","3":"life","4":"expectancy","5":"77.10"},{"1":"Germany","2":"2003","3":"fertility","4":"NA","5":"1.35"},{"1":"South Korea","2":"2003","3":"fertility","4":"NA","5":"1.22"},{"1":"Germany","2":"2003","3":"life","4":"expectancy","5":"78.80"},{"1":"South Korea","2":"2003","3":"life","4":"expectancy","5":"77.70"},{"1":"Germany","2":"2004","3":"fertility","4":"NA","5":"1.35"},{"1":"South Korea","2":"2004","3":"fertility","4":"NA","5":"1.20"},{"1":"Germany","2":"2004","3":"life","4":"expectancy","5":"79.20"},{"1":"South Korea","2":"2004","3":"life","4":"expectancy","5":"78.20"},{"1":"Germany","2":"2005","3":"fertility","4":"NA","5":"1.35"},{"1":"South Korea","2":"2005","3":"fertility","4":"NA","5":"1.20"},{"1":"Germany","2":"2005","3":"life","4":"expectancy","5":"79.40"},{"1":"South Korea","2":"2005","3":"life","4":"expectancy","5":"78.70"},{"1":"Germany","2":"2006","3":"fertility","4":"NA","5":"1.36"},{"1":"South Korea","2":"2006","3":"fertility","4":"NA","5":"1.20"},{"1":"Germany","2":"2006","3":"life","4":"expectancy","5":"79.70"},{"1":"South Korea","2":"2006","3":"life","4":"expectancy","5":"79.10"},{"1":"Germany","2":"2007","3":"fertility","4":"NA","5":"1.36"},{"1":"South Korea","2":"2007","3":"fertility","4":"NA","5":"1.21"},{"1":"Germany","2":"2007","3":"life","4":"expectancy","5":"79.90"},{"1":"South Korea","2":"2007","3":"life","4":"expectancy","5":"79.40"},{"1":"Germany","2":"2008","3":"fertility","4":"NA","5":"1.37"},{"1":"South Korea","2":"2008","3":"fertility","4":"NA","5":"1.23"},{"1":"Germany","2":"2008","3":"life","4":"expectancy","5":"80.00"},{"1":"South Korea","2":"2008","3":"life","4":"expectancy","5":"79.80"},{"1":"Germany","2":"2009","3":"fertility","4":"NA","5":"1.38"},{"1":"South Korea","2":"2009","3":"fertility","4":"NA","5":"1.25"},{"1":"Germany","2":"2009","3":"life","4":"expectancy","5":"80.10"},{"1":"South Korea","2":"2009","3":"life","4":"expectancy","5":"80.10"},{"1":"Germany","2":"2010","3":"fertility","4":"NA","5":"1.39"},{"1":"South Korea","2":"2010","3":"fertility","4":"NA","5":"1.27"},{"1":"Germany","2":"2010","3":"life","4":"expectancy","5":"80.30"},{"1":"South Korea","2":"2010","3":"life","4":"expectancy","5":"80.40"},{"1":"Germany","2":"2011","3":"fertility","4":"NA","5":"1.40"},{"1":"South Korea","2":"2011","3":"fertility","4":"NA","5":"1.29"},{"1":"Germany","2":"2011","3":"life","4":"expectancy","5":"80.50"},{"1":"South Korea","2":"2011","3":"life","4":"expectancy","5":"80.60"},{"1":"Germany","2":"2012","3":"fertility","4":"NA","5":"1.41"},{"1":"South Korea","2":"2012","3":"fertility","4":"NA","5":"1.30"},{"1":"Germany","2":"2012","3":"life","4":"expectancy","5":"80.60"},{"1":"South Korea","2":"2012","3":"life","4":"expectancy","5":"80.70"},{"1":"Germany","2":"2013","3":"fertility","4":"NA","5":"1.42"},{"1":"South Korea","2":"2013","3":"fertility","4":"NA","5":"1.32"},{"1":"Germany","2":"2013","3":"life","4":"expectancy","5":"80.70"},{"1":"South Korea","2":"2013","3":"life","4":"expectancy","5":"80.90"},{"1":"Germany","2":"2014","3":"fertility","4":"NA","5":"1.43"},{"1":"South Korea","2":"2014","3":"fertility","4":"NA","5":"1.34"},{"1":"Germany","2":"2014","3":"life","4":"expectancy","5":"80.70"},{"1":"South Korea","2":"2014","3":"life","4":"expectancy","5":"80.90"},{"1":"Germany","2":"2015","3":"fertility","4":"NA","5":"1.44"},{"1":"South Korea","2":"2015","3":"fertility","4":"NA","5":"1.36"},{"1":"Germany","2":"2015","3":"life","4":"expectancy","5":"80.80"},{"1":"South Korea","2":"2015","3":"life","4":"expectancy","5":"81.00"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>We can achieve the same final result by uniting the second and third columns, then spreading the columns and renaming <code>fertility_NA</code> to <code>fertility</code>:</p>
<pre class="r"><code>dat %&gt;% 
  separate(key, var_names, fill = &quot;right&quot;) %&gt;%
  unite(variable_name, first_variable_name, second_variable_name) %&gt;%
  spread(variable_name, value) %&gt;%
  rename(fertility = fertility_NA)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["country"],"name":[1],"type":["chr"],"align":["left"]},{"label":["year"],"name":[2],"type":["chr"],"align":["left"]},{"label":["fertility"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["life_expectancy"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Germany","2":"1960","3":"2.41","4":"69.26"},{"1":"Germany","2":"1961","3":"2.44","4":"69.85"},{"1":"Germany","2":"1962","3":"2.47","4":"70.01"},{"1":"Germany","2":"1963","3":"2.49","4":"70.10"},{"1":"Germany","2":"1964","3":"2.49","4":"70.66"},{"1":"Germany","2":"1965","3":"2.48","4":"70.65"},{"1":"Germany","2":"1966","3":"2.44","4":"70.77"},{"1":"Germany","2":"1967","3":"2.37","4":"70.99"},{"1":"Germany","2":"1968","3":"2.28","4":"70.64"},{"1":"Germany","2":"1969","3":"2.17","4":"70.48"},{"1":"Germany","2":"1970","3":"2.04","4":"70.72"},{"1":"Germany","2":"1971","3":"1.92","4":"70.94"},{"1":"Germany","2":"1972","3":"1.80","4":"71.16"},{"1":"Germany","2":"1973","3":"1.70","4":"71.41"},{"1":"Germany","2":"1974","3":"1.62","4":"71.71"},{"1":"Germany","2":"1975","3":"1.56","4":"71.56"},{"1":"Germany","2":"1976","3":"1.53","4":"72.02"},{"1":"Germany","2":"1977","3":"1.50","4":"72.63"},{"1":"Germany","2":"1978","3":"1.49","4":"72.60"},{"1":"Germany","2":"1979","3":"1.48","4":"72.96"},{"1":"Germany","2":"1980","3":"1.47","4":"73.14"},{"1":"Germany","2":"1981","3":"1.47","4":"73.37"},{"1":"Germany","2":"1982","3":"1.46","4":"73.69"},{"1":"Germany","2":"1983","3":"1.46","4":"73.97"},{"1":"Germany","2":"1984","3":"1.46","4":"74.44"},{"1":"Germany","2":"1985","3":"1.45","4":"74.55"},{"1":"Germany","2":"1986","3":"1.44","4":"74.75"},{"1":"Germany","2":"1987","3":"1.43","4":"75.15"},{"1":"Germany","2":"1988","3":"1.41","4":"75.33"},{"1":"Germany","2":"1989","3":"1.38","4":"75.51"},{"1":"Germany","2":"1990","3":"1.36","4":"75.40"},{"1":"Germany","2":"1991","3":"1.34","4":"75.60"},{"1":"Germany","2":"1992","3":"1.32","4":"76.00"},{"1":"Germany","2":"1993","3":"1.31","4":"76.10"},{"1":"Germany","2":"1994","3":"1.31","4":"76.40"},{"1":"Germany","2":"1995","3":"1.31","4":"76.60"},{"1":"Germany","2":"1996","3":"1.32","4":"76.90"},{"1":"Germany","2":"1997","3":"1.33","4":"77.30"},{"1":"Germany","2":"1998","3":"1.34","4":"77.60"},{"1":"Germany","2":"1999","3":"1.35","4":"77.80"},{"1":"Germany","2":"2000","3":"1.35","4":"78.10"},{"1":"Germany","2":"2001","3":"1.35","4":"78.40"},{"1":"Germany","2":"2002","3":"1.35","4":"78.60"},{"1":"Germany","2":"2003","3":"1.35","4":"78.80"},{"1":"Germany","2":"2004","3":"1.35","4":"79.20"},{"1":"Germany","2":"2005","3":"1.35","4":"79.40"},{"1":"Germany","2":"2006","3":"1.36","4":"79.70"},{"1":"Germany","2":"2007","3":"1.36","4":"79.90"},{"1":"Germany","2":"2008","3":"1.37","4":"80.00"},{"1":"Germany","2":"2009","3":"1.38","4":"80.10"},{"1":"Germany","2":"2010","3":"1.39","4":"80.30"},{"1":"Germany","2":"2011","3":"1.40","4":"80.50"},{"1":"Germany","2":"2012","3":"1.41","4":"80.60"},{"1":"Germany","2":"2013","3":"1.42","4":"80.70"},{"1":"Germany","2":"2014","3":"1.43","4":"80.70"},{"1":"Germany","2":"2015","3":"1.44","4":"80.80"},{"1":"South Korea","2":"1960","3":"6.16","4":"53.02"},{"1":"South Korea","2":"1961","3":"5.99","4":"53.75"},{"1":"South Korea","2":"1962","3":"5.79","4":"54.51"},{"1":"South Korea","2":"1963","3":"5.57","4":"55.27"},{"1":"South Korea","2":"1964","3":"5.36","4":"56.04"},{"1":"South Korea","2":"1965","3":"5.16","4":"56.84"},{"1":"South Korea","2":"1966","3":"4.99","4":"57.67"},{"1":"South Korea","2":"1967","3":"4.85","4":"58.54"},{"1":"South Korea","2":"1968","3":"4.73","4":"59.44"},{"1":"South Korea","2":"1969","3":"4.62","4":"60.35"},{"1":"South Korea","2":"1970","3":"4.53","4":"61.22"},{"1":"South Korea","2":"1971","3":"4.41","4":"62.02"},{"1":"South Korea","2":"1972","3":"4.27","4":"62.73"},{"1":"South Korea","2":"1973","3":"4.09","4":"63.34"},{"1":"South Korea","2":"1974","3":"3.87","4":"63.84"},{"1":"South Korea","2":"1975","3":"3.62","4":"64.26"},{"1":"South Korea","2":"1976","3":"3.36","4":"64.62"},{"1":"South Korea","2":"1977","3":"3.11","4":"64.95"},{"1":"South Korea","2":"1978","3":"2.88","4":"65.31"},{"1":"South Korea","2":"1979","3":"2.69","4":"65.70"},{"1":"South Korea","2":"1980","3":"2.52","4":"66.15"},{"1":"South Korea","2":"1981","3":"2.38","4":"66.66"},{"1":"South Korea","2":"1982","3":"2.24","4":"67.21"},{"1":"South Korea","2":"1983","3":"2.11","4":"67.78"},{"1":"South Korea","2":"1984","3":"1.98","4":"68.37"},{"1":"South Korea","2":"1985","3":"1.86","4":"68.98"},{"1":"South Korea","2":"1986","3":"1.75","4":"69.58"},{"1":"South Korea","2":"1987","3":"1.67","4":"70.18"},{"1":"South Korea","2":"1988","3":"1.63","4":"70.75"},{"1":"South Korea","2":"1989","3":"1.61","4":"71.29"},{"1":"South Korea","2":"1990","3":"1.61","4":"71.80"},{"1":"South Korea","2":"1991","3":"1.63","4":"72.20"},{"1":"South Korea","2":"1992","3":"1.65","4":"72.70"},{"1":"South Korea","2":"1993","3":"1.66","4":"73.10"},{"1":"South Korea","2":"1994","3":"1.65","4":"73.60"},{"1":"South Korea","2":"1995","3":"1.63","4":"74.00"},{"1":"South Korea","2":"1996","3":"1.59","4":"74.50"},{"1":"South Korea","2":"1997","3":"1.54","4":"74.90"},{"1":"South Korea","2":"1998","3":"1.48","4":"75.40"},{"1":"South Korea","2":"1999","3":"1.41","4":"75.80"},{"1":"South Korea","2":"2000","3":"1.35","4":"76.30"},{"1":"South Korea","2":"2001","3":"1.30","4":"76.70"},{"1":"South Korea","2":"2002","3":"1.25","4":"77.10"},{"1":"South Korea","2":"2003","3":"1.22","4":"77.70"},{"1":"South Korea","2":"2004","3":"1.20","4":"78.20"},{"1":"South Korea","2":"2005","3":"1.20","4":"78.70"},{"1":"South Korea","2":"2006","3":"1.20","4":"79.10"},{"1":"South Korea","2":"2007","3":"1.21","4":"79.40"},{"1":"South Korea","2":"2008","3":"1.23","4":"79.80"},{"1":"South Korea","2":"2009","3":"1.25","4":"80.10"},{"1":"South Korea","2":"2010","3":"1.27","4":"80.40"},{"1":"South Korea","2":"2011","3":"1.29","4":"80.60"},{"1":"South Korea","2":"2012","3":"1.30","4":"80.70"},{"1":"South Korea","2":"2013","3":"1.32","4":"80.90"},{"1":"South Korea","2":"2014","3":"1.34","4":"80.90"},{"1":"South Korea","2":"2015","3":"1.36","4":"81.00"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>The <code>separate()</code> function splits one column into two or more columns at a specified character that separates the variables.</p></li>
<li><p>When there is an extra separation in some of the entries, use fill=“right” to pad missing values with NAs, or use extra=“merge” to keep extra elements together.</p></li>
<li><p>The <code>unite()</code> function combines two columns and adds a separating character.</p></li>
</ul>
</div>
</div>
<div id="section-assessment-part-1-reshaping-data" class="section level3">
<h3>2.1 Assessment Part 1: Reshaping Data</h3>
<p>Insert Assessment here</p>
</div>
<div id="section-assessment-part-1-reshaping-data-1" class="section level3">
<h3>2.2 Assessment Part 1: Reshaping Data</h3>
<p>Insert Assessment here</p>
</div>
<div id="section-combining-tables" class="section level3">
<h3>Combining Tables</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/joining-tables.html">textbook section - 22 Joining tables</a>.</p>
</div>
<p>The information we need for a given analysis may not be just in one table. For example, when forecasting elections we used the function <code>left_join</code> to combine the information from two tables. Here we use a simpler example to illustrate the general challenge of combining tables.</p>
<p>Suppose we want to explore the relationship between population size for US states and electoral votes. We have the population size in this table:</p>
<pre class="r"><code>library(tidyverse)
library(dslabs)
data(murders)
head(murders)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["abb"],"name":[2],"type":["chr"],"align":["left"]},{"label":["region"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["population"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["total"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Alabama","2":"AL","3":"South","4":"4779736","5":"135","_rn_":"1"},{"1":"Alaska","2":"AK","3":"West","4":"710231","5":"19","_rn_":"2"},{"1":"Arizona","2":"AZ","3":"West","4":"6392017","5":"232","_rn_":"3"},{"1":"Arkansas","2":"AR","3":"South","4":"2915918","5":"93","_rn_":"4"},{"1":"California","2":"CA","3":"West","4":"37253956","5":"1257","_rn_":"5"},{"1":"Colorado","2":"CO","3":"West","4":"5029196","5":"65","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>and electoral votes in this one:</p>
<pre class="r"><code>data(polls_us_election_2016)
head(results_us_election_2016)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["electoral_votes"],"name":[2],"type":["int"],"align":["right"]},{"label":["clinton"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["trump"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["others"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"California","2":"55","3":"61.7","4":"31.6","5":"6.7","_rn_":"1"},{"1":"Texas","2":"38","3":"43.2","4":"52.2","5":"4.5","_rn_":"2"},{"1":"Florida","2":"29","3":"47.8","4":"49.0","5":"3.2","_rn_":"3"},{"1":"New York","2":"29","3":"59.0","4":"36.5","5":"4.5","_rn_":"4"},{"1":"Illinois","2":"20","3":"55.8","4":"38.8","5":"5.4","_rn_":"5"},{"1":"Pennsylvania","2":"20","3":"47.9","4":"48.6","5":"3.6","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Just concatenating these two tables together will not work since the order of the states is not the same.</p>
<pre class="r"><code>identical(results_us_election_2016$state, murders$state)</code></pre>
<pre><code>## [1] FALSE</code></pre>
<p>The <em>join</em> functions, described below, are designed to handle this challenge.</p>
</div>
<div id="section-joins" class="section level3">
<h3>Joins</h3>
<p>The <em>join</em> functions in the <strong>dplyr</strong> package make sure that the tables are combined so that matching rows are together. If you know SQL, you will see that the approach and syntax is very similar. The general idea is that one needs to identify one or more columns that will serve to match the two tables. Then a new table with the combined information is returned. Notice what happens if we join the two tables above by state using <code>left_join</code> (we will remove the <code>others</code> column and rename <code>electoral_votes</code> so that the tables fit on the page):</p>
<pre class="r"><code>tab &lt;- left_join(murders, results_us_election_2016, by = &quot;state&quot;) %&gt;%
  select(-others) %&gt;% rename(ev = electoral_votes)
head(tab)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["abb"],"name":[2],"type":["chr"],"align":["left"]},{"label":["region"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["population"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["total"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["ev"],"name":[6],"type":["int"],"align":["right"]},{"label":["clinton"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["trump"],"name":[8],"type":["dbl"],"align":["right"]}],"data":[{"1":"Alabama","2":"AL","3":"South","4":"4779736","5":"135","6":"9","7":"34.4","8":"62.1","_rn_":"1"},{"1":"Alaska","2":"AK","3":"West","4":"710231","5":"19","6":"3","7":"36.6","8":"51.3","_rn_":"2"},{"1":"Arizona","2":"AZ","3":"West","4":"6392017","5":"232","6":"11","7":"45.1","8":"48.7","_rn_":"3"},{"1":"Arkansas","2":"AR","3":"South","4":"2915918","5":"93","6":"6","7":"33.7","8":"60.6","_rn_":"4"},{"1":"California","2":"CA","3":"West","4":"37253956","5":"1257","6":"55","7":"61.7","8":"31.6","_rn_":"5"},{"1":"Colorado","2":"CO","3":"West","4":"5029196","5":"65","6":"9","7":"48.2","8":"43.3","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The data has been successfully joined and we can now, for example, make a plot to explore the relationship:</p>
<pre class="r"><code>library(ggrepel)
tab %&gt;% ggplot(aes(population/10^6, ev, label = abb)) +
  geom_point() +
  geom_text_repel() + 
  scale_x_continuous(trans = &quot;log2&quot;) +
  scale_y_continuous(trans = &quot;log2&quot;) +
  geom_smooth(method = &quot;lm&quot;, se = FALSE)</code></pre>
<p><img src="datsci_06_files/figure-html/ev-vs-population-1.png" width="700px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /></p>
<p>We see the relationship is close to linear with about 2 electoral votes for every million persons, but with very small states getting higher ratios.</p>
<p>In practice, it is not always the case that each row in one table has a matching row in the other. For this reason, we have several versions of join. To illustrate this challenge, we will take subsets of the tables above. We create the tables <code>tab1</code> and <code>tab2</code> so that they have some states in common but not all:</p>
<pre class="r"><code>tab_1 &lt;- slice(murders, 1:6) %&gt;% select(state, population)
tab_1</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["population"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Alabama","2":"4779736"},{"1":"Alaska","2":"710231"},{"1":"Arizona","2":"6392017"},{"1":"Arkansas","2":"2915918"},{"1":"California","2":"37253956"},{"1":"Colorado","2":"5029196"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>tab_2 &lt;- results_us_election_2016 %&gt;% 
  filter(state%in%c(&quot;Alabama&quot;, &quot;Alaska&quot;, &quot;Arizona&quot;, 
                    &quot;California&quot;, &quot;Connecticut&quot;, &quot;Delaware&quot;)) %&gt;% 
  select(state, electoral_votes) %&gt;% rename(ev = electoral_votes)
tab_2</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["ev"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"California","2":"55"},{"1":"Arizona","2":"11"},{"1":"Alabama","2":"9"},{"1":"Connecticut","2":"7"},{"1":"Alaska","2":"3"},{"1":"Delaware","2":"3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>We will use these two tables as examples in the next sections.</p>
</div>
<div id="section-left-join" class="section level3">
<h3>Left join</h3>
<p>Suppose we want a table like <code>tab_1</code>, but adding electoral votes to whatever states we have available. For this, we use <code>left_join</code> with <code>tab_1</code> as the first argument. We specify which column to use to match with the <code>by</code> argument.</p>
<pre class="r"><code>left_join(tab_1, tab_2, by = &quot;state&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["population"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["ev"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"Alabama","2":"4779736","3":"9"},{"1":"Alaska","2":"710231","3":"3"},{"1":"Arizona","2":"6392017","3":"11"},{"1":"Arkansas","2":"2915918","3":"NA"},{"1":"California","2":"37253956","3":"55"},{"1":"Colorado","2":"5029196","3":"NA"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Note that <code>NA</code>s are added to the two states not appearing in <code>tab_2</code>. Also, notice that this function, as well as all the other joins, can receive the first arguments through the pipe:</p>
<pre class="r"><code>tab_1 %&gt;% left_join(tab_2, by = &quot;state&quot;)</code></pre>
</div>
<div id="section-right-join" class="section level3">
<h3>Right join</h3>
<p>If instead of a table with the same rows as first table, we want one with the same rows as second table, we can use <code>right_join</code>:</p>
<pre class="r"><code>tab_1 %&gt;% right_join(tab_2, by = &quot;state&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["population"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["ev"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"Alabama","2":"4779736","3":"9"},{"1":"Alaska","2":"710231","3":"3"},{"1":"Arizona","2":"6392017","3":"11"},{"1":"California","2":"37253956","3":"55"},{"1":"Connecticut","2":"NA","3":"7"},{"1":"Delaware","2":"NA","3":"3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Now the NAs are in the column coming from <code>tab_1</code>.</p>
</div>
<div id="section-inner-join" class="section level3">
<h3>Inner join</h3>
<p>If we want to keep only the rows that have information in both tables, we use <code>inner_join</code>. You can think of this as an intersection:</p>
<pre class="r"><code>inner_join(tab_1, tab_2, by = &quot;state&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["population"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["ev"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"Alabama","2":"4779736","3":"9"},{"1":"Alaska","2":"710231","3":"3"},{"1":"Arizona","2":"6392017","3":"11"},{"1":"California","2":"37253956","3":"55"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="section-full-join" class="section level3">
<h3>Full join</h3>
<p>If we want to keep all the rows and fill the missing parts with NAs, we can use <code>full_join</code>. You can think of this as a union:</p>
<pre class="r"><code>full_join(tab_1, tab_2, by = &quot;state&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["population"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["ev"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"Alabama","2":"4779736","3":"9"},{"1":"Alaska","2":"710231","3":"3"},{"1":"Arizona","2":"6392017","3":"11"},{"1":"Arkansas","2":"2915918","3":"NA"},{"1":"California","2":"37253956","3":"55"},{"1":"Colorado","2":"5029196","3":"NA"},{"1":"Connecticut","2":"NA","3":"7"},{"1":"Delaware","2":"NA","3":"3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="section-semi-join" class="section level3">
<h3>Semi join</h3>
<p>The <code>semi_join</code> function lets us keep the part of first table for which we have information in the second. It does not add the columns of the second:</p>
<pre class="r"><code>semi_join(tab_1, tab_2, by = &quot;state&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["population"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Alabama","2":"4779736"},{"1":"Alaska","2":"710231"},{"1":"Arizona","2":"6392017"},{"1":"California","2":"37253956"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="section-anti-join" class="section level3">
<h3>Anti join</h3>
<p>The function <code>anti_join</code> is the opposite of <code>semi_join</code>. It keeps the elements of the first table for which there is no information in the second:</p>
<pre class="r"><code>anti_join(tab_1, tab_2, by = &quot;state&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["population"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"Arkansas","2":"2915918"},{"1":"Colorado","2":"5029196"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The following diagram summarizes the above joins:</p>
<p><img src="images/joins.png" width="40%" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /> (Image courtesy of <a href="https://github.com/rstudio/cheatsheets">RStudio</a>. <a href="https://github.com/rstudio/cheatsheets/blob/master/LICENSE">CC-BY-4.0 license</a>. Cropped from original.)</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>The join functions in the <strong>dplyr</strong> package combine two tables such that matching rows are together.</p></li>
<li><p><code>left_join()</code> only keeps rows that have information in the first table.</p></li>
<li><p><code>right_join()</code> only keeps rows that have information in the second table.</p></li>
<li><p><code>inner_join()</code> only keeps rows that have information in both tables.</p></li>
<li><p><code>full_join()</code> keeps all rows from both tables.</p></li>
<li><p><code>semi_join()</code> keeps the part of first table for which we have information in the second.</p></li>
<li><p><code>anti_join()</code> keeps the elements of the first table for which there is no information in the second.</p></li>
</ul>
</div>
</div>
<div id="section-binding" class="section level3">
<h3>Binding</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/joining-tables.html#binding">textbook section - 22.2 Binding</a>.</p>
</div>
<p>Although we have yet to use it in this course, another common way in which datasets are combined is by <em>binding</em> them. Unlike the join function, the binding functions do not try to match by a variable, but instead simply combine datasets. If the datasets don’t match by the appropriate dimensions, one obtains an error.</p>
</div>
<div id="section-binding-columns" class="section level3">
<h3>Binding columns</h3>
<p>The <strong>dplyr</strong> function <em>bind_cols</em> binds two objects by making them columns in a tibble. For example, we quickly want to make a data frame consisting of numbers we can use.</p>
<pre class="r"><code>bind_cols(a = 1:3, b = 4:6)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["a"],"name":[1],"type":["int"],"align":["right"]},{"label":["b"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"1","2":"4"},{"1":"2","2":"5"},{"1":"3","2":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>This function requires that we assign names to the columns. Here we chose <code>a</code> and <code>b</code>.</p>
<p>Note that there is an R-base function <code>cbind</code> with the exact same functionality. An important difference is that <code>cbind</code> can create different types of objects, while <code>bind_cols</code> always produces a data frame.</p>
<p><code>bind_cols</code> can also bind two different data frames. For example, here we break up the <code>tab</code> data frame and then bind them back together:</p>
<pre class="r"><code>tab_1 &lt;- tab[, 1:3]
tab_2 &lt;- tab[, 4:6]
tab_3 &lt;- tab[, 7:8]
new_tab &lt;- bind_cols(tab_1, tab_2, tab_3)
head(new_tab)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["abb"],"name":[2],"type":["chr"],"align":["left"]},{"label":["region"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["population"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["total"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["ev"],"name":[6],"type":["int"],"align":["right"]},{"label":["clinton"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["trump"],"name":[8],"type":["dbl"],"align":["right"]}],"data":[{"1":"Alabama","2":"AL","3":"South","4":"4779736","5":"135","6":"9","7":"34.4","8":"62.1","_rn_":"1"},{"1":"Alaska","2":"AK","3":"West","4":"710231","5":"19","6":"3","7":"36.6","8":"51.3","_rn_":"2"},{"1":"Arizona","2":"AZ","3":"West","4":"6392017","5":"232","6":"11","7":"45.1","8":"48.7","_rn_":"3"},{"1":"Arkansas","2":"AR","3":"South","4":"2915918","5":"93","6":"6","7":"33.7","8":"60.6","_rn_":"4"},{"1":"California","2":"CA","3":"West","4":"37253956","5":"1257","6":"55","7":"61.7","8":"31.6","_rn_":"5"},{"1":"Colorado","2":"CO","3":"West","4":"5029196","5":"65","6":"9","7":"48.2","8":"43.3","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="section-binding-by-rows" class="section level3">
<h3>Binding by rows</h3>
<p>The <code>bind_rows</code> function is similar to <code>bind_cols</code>, but binds rows instead of columns:</p>
<pre class="r"><code>tab_1 &lt;- tab[1:2,]
tab_2 &lt;- tab[3:4,]
bind_rows(tab_1, tab_2)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["abb"],"name":[2],"type":["chr"],"align":["left"]},{"label":["region"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["population"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["total"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["ev"],"name":[6],"type":["int"],"align":["right"]},{"label":["clinton"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["trump"],"name":[8],"type":["dbl"],"align":["right"]}],"data":[{"1":"Alabama","2":"AL","3":"South","4":"4779736","5":"135","6":"9","7":"34.4","8":"62.1"},{"1":"Alaska","2":"AK","3":"West","4":"710231","5":"19","6":"3","7":"36.6","8":"51.3"},{"1":"Arizona","2":"AZ","3":"West","4":"6392017","5":"232","6":"11","7":"45.1","8":"48.7"},{"1":"Arkansas","2":"AR","3":"South","4":"2915918","5":"93","6":"6","7":"33.7","8":"60.6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>This is based on an R-base function <code>rbind</code>.</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>Unlike the join functions, the binding functions do not try to match by a variable, but rather just combine datasets.</p></li>
<li><p><code>bind_cols()</code> binds two objects by making them columns in a tibble. The R-base function <code>cbind()</code> binds columns but makes a data frame or matrix instead.</p></li>
<li><p>The <code>bind_rows()</code> function is similar but binds rows instead of columns. The R-base function <code>rbind()</code> binds rows but makes a data frame or matrix instead.</p></li>
</ul>
</div>
</div>
<div id="section-set-operators" class="section level3">
<h3>Set Operators</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/joining-tables.html#set-operators">textbook section - 22.3 Set operators</a>.</p>
</div>
<p>Another set of commands useful for combining datasets are the set operators. When applied to vectors, these behave as their names suggest. Examples are <code>intersect</code>, <code>union</code>, <code>setdiff</code>, and <code>setequal</code>. However, if the <strong>tidyverse</strong>, or more specifically <strong>dplyr</strong>, is loaded, these functions can be used on data frames as opposed to just on vectors.</p>
</div>
<div id="section-intersect" class="section level3">
<h3>Intersect</h3>
<p>You can take intersections of vectors of any type, such as numeric:</p>
<pre class="r"><code>intersect(1:10, 6:15)</code></pre>
<pre><code>## [1]  6  7  8  9 10</code></pre>
<p>or characters:</p>
<pre class="r"><code>intersect(c(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;), c(&quot;b&quot;,&quot;c&quot;,&quot;d&quot;))</code></pre>
<pre><code>## [1] &quot;b&quot; &quot;c&quot;</code></pre>
<p>The <strong>dplyr</strong> package includes an <code>intersect</code> function that can be applied to tables with the same column names. This function returns the rows in common between two tables. To make sure we use the <strong>dplyr</strong> version of <code>intersect</code> rather than the base package version, we can use <code>dplyr::intersect</code> like this:</p>
<pre class="r"><code>tab_1 &lt;- tab[1:5,]
tab_2 &lt;- tab[3:7,]
dplyr::intersect(tab_1, tab_2)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["abb"],"name":[2],"type":["chr"],"align":["left"]},{"label":["region"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["population"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["total"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["ev"],"name":[6],"type":["int"],"align":["right"]},{"label":["clinton"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["trump"],"name":[8],"type":["dbl"],"align":["right"]}],"data":[{"1":"Arizona","2":"AZ","3":"West","4":"6392017","5":"232","6":"11","7":"45.1","8":"48.7"},{"1":"Arkansas","2":"AR","3":"South","4":"2915918","5":"93","6":"6","7":"33.7","8":"60.6"},{"1":"California","2":"CA","3":"West","4":"37253956","5":"1257","6":"55","7":"61.7","8":"31.6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="section-union" class="section level3">
<h3>Union</h3>
<p>Similarly <em>union</em> takes the union of vectors. For example:</p>
<pre class="r"><code>union(1:10, 6:15)</code></pre>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15</code></pre>
<pre class="r"><code>union(c(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;), c(&quot;b&quot;,&quot;c&quot;,&quot;d&quot;))</code></pre>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot;</code></pre>
<p>The <strong>dplyr</strong> package includes a version of <code>union</code> that combines all the rows of two tables with the same column names.</p>
<pre class="r"><code>tab_1 &lt;- tab[1:5,]
tab_2 &lt;- tab[3:7,]
dplyr::union(tab_1, tab_2) </code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["abb"],"name":[2],"type":["chr"],"align":["left"]},{"label":["region"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["population"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["total"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["ev"],"name":[6],"type":["int"],"align":["right"]},{"label":["clinton"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["trump"],"name":[8],"type":["dbl"],"align":["right"]}],"data":[{"1":"Alabama","2":"AL","3":"South","4":"4779736","5":"135","6":"9","7":"34.4","8":"62.1"},{"1":"Alaska","2":"AK","3":"West","4":"710231","5":"19","6":"3","7":"36.6","8":"51.3"},{"1":"Arizona","2":"AZ","3":"West","4":"6392017","5":"232","6":"11","7":"45.1","8":"48.7"},{"1":"Arkansas","2":"AR","3":"South","4":"2915918","5":"93","6":"6","7":"33.7","8":"60.6"},{"1":"California","2":"CA","3":"West","4":"37253956","5":"1257","6":"55","7":"61.7","8":"31.6"},{"1":"Colorado","2":"CO","3":"West","4":"5029196","5":"65","6":"9","7":"48.2","8":"43.3"},{"1":"Connecticut","2":"CT","3":"Northeast","4":"3574097","5":"97","6":"7","7":"54.6","8":"40.9"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="section-setdiff" class="section level3">
<h3><strong><code>setdiff</code></strong></h3>
<p>The set difference between a first and second argument can be obtained with <code>setdiff</code>. Unlike <code>intersect</code> and <code>union</code>, this function is not symmetric:</p>
<pre class="r"><code>setdiff(1:10, 6:15)</code></pre>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<pre class="r"><code>setdiff(6:15, 1:10)</code></pre>
<pre><code>## [1] 11 12 13 14 15</code></pre>
<p>As with the functions shown above, <strong>dplyr</strong> has a version for data frames:</p>
<pre class="r"><code>tab_1 &lt;- tab[1:5,]
tab_2 &lt;- tab[3:7,]
dplyr::setdiff(tab_1, tab_2)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["abb"],"name":[2],"type":["chr"],"align":["left"]},{"label":["region"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["population"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["total"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["ev"],"name":[6],"type":["int"],"align":["right"]},{"label":["clinton"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["trump"],"name":[8],"type":["dbl"],"align":["right"]}],"data":[{"1":"Alabama","2":"AL","3":"South","4":"4779736","5":"135","6":"9","7":"34.4","8":"62.1"},{"1":"Alaska","2":"AK","3":"West","4":"710231","5":"19","6":"3","7":"36.6","8":"51.3"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="section-setequal" class="section level3">
<h3><strong><code>setequal</code></strong></h3>
<p>Finally, the function <code>setequal</code> tells us if two sets are the same, regardless of order. So notice that:</p>
<pre class="r"><code>setequal(1:5, 1:6)</code></pre>
<pre><code>## [1] FALSE</code></pre>
<p>but:</p>
<pre class="r"><code>setequal(1:5, 5:1)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>When applied to data frames that are not equal, regardless of order, the <strong>dplyr</strong> version provides a useful message letting us know how the sets are different:</p>
<pre class="r"><code>dplyr::setequal(tab_1, tab_2)</code></pre>
<pre><code>## [1] FALSE</code></pre>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>By default, the set operators in R-base work on vectors. If <strong>tidyverse/dplyr</strong> are loaded, they also work on data frames.</p></li>
<li><p>You can take intersections of vectors using <code>intersect()</code>. This returns the elements common to both sets.</p></li>
<li><p>You can take the union of vectors using <code>union()</code>. This returns the elements that are in either set.</p></li>
<li><p>The set difference between a first and second argument can be obtained with <code>setdiff()</code>. Note that this function is not symmetric.</p></li>
<li><p>The function <code>set_equal()</code> tells us if two sets are the same, regardless of the order of elements.</p></li>
</ul>
</div>
</div>
<div id="section-assessment-combining-tables" class="section level3">
<h3>2.2 Assessment: Combining Tables</h3>
<p>Insert Assessment here</p>
</div>
<div id="section-web-scraping" class="section level3">
<h3>Web Scraping</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/web-scraping.html">textbook section - 23 Web scraping</a> through <a href="https://rafalab.github.io/dsbook/web-scraping.html#the-rvest-package">textbook section - 23.2 The rvest package</a>.</p>
</div>
<p>The data we need to answer a question is not always in a spreadsheet ready for us to read. For example, the US murders dataset we used in the R Basics section originally comes from this Wikipedia page:</p>
<pre class="r"><code>url &lt;- paste0(&quot;https://en.wikipedia.org/w/index.php?title=&quot;,
              &quot;Gun_violence_in_the_United_States_by_state&quot;,
              &quot;&amp;direction=prev&amp;oldid=810166167&quot;)</code></pre>
<p>You can see the data table when you visit the webpage:</p>
<p><img src="images/murders-data-wiki-page.png" width="700px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /></p>
<p>(Web page courtesy of <a href="https://en.wikipedia.org/w/index.php?title=Gun_violence_in_the_United_States_by_state&amp;direction=prev&amp;oldid=810166167">Wikipedia</a>. <a href="https://en.wikipedia.org/wiki/Wikipedia:Text_of_Creative_Commons_Attribution-ShareAlike_3.0_Unported_License">CC-BY-SA-3.0 license</a>. Screenshot of part of the page.)</p>
<p>Unfortunately, there is no link to a data file. To make the data frame that is loaded when we type <code>data(murders)</code>, we had to do some <em>web scraping</em>.</p>
<p><em>Web scraping</em>, or <em>web harvesting</em>, is the term we use to describe the process of extracting data from a website. The reason we can do this is because the information used by a browser to render webpages is received as a text file from a server. The text is code written in hyper text markup language (HTML). Every browser has a way to show the html source code for a page, each one different. On Chrome, you can use Control-U on a PC and command+alt+U on a Mac. You will see something like this:</p>
<p><img src="images/html-code.png" width="700px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /></p>
</div>
<div id="section-html" class="section level3">
<h3>HTML</h3>
<p>Because this code is accessible, we can download the HTML file, import it into R, and then write programs to extract the information we need from the page. However, once we look at HTML code, this might seem like a daunting task. But we will show you some convenient tools to facilitate the process. To get an idea of how it works, here are a few lines of code from the Wikipedia page that provides the US murders data:</p>
<pre><code>&lt;table class=&quot;wikitable sortable&quot;&gt;
&lt;tr&gt;
&lt;th&gt;State&lt;/th&gt;
&lt;th&gt;&lt;a href=&quot;/wiki/List_of_U.S._states_and_territories_by_population&quot; 
title=&quot;List of U.S. states and territories by population&quot;&gt;Population&lt;/a&gt;&lt;br /&gt;
&lt;small&gt;(total inhabitants)&lt;/small&gt;&lt;br /&gt;
&lt;small&gt;(2015)&lt;/small&gt; &lt;sup id=&quot;cite_ref-1&quot; class=&quot;reference&quot;&gt;
&lt;a href=&quot;#cite_note-1&quot;&gt;[1]&lt;/a&gt;&lt;/sup&gt;&lt;/th&gt;
&lt;th&gt;Murders and Nonnegligent
&lt;p&gt;Manslaughter&lt;br /&gt;
&lt;small&gt;(total deaths)&lt;/small&gt;&lt;br /&gt;
&lt;small&gt;(2015)&lt;/small&gt; &lt;sup id=&quot;cite_ref-2&quot; class=&quot;reference&quot;&gt;
&lt;a href=&quot;#cite_note-2&quot;&gt;[2]&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;/th&gt;
&lt;th&gt;Murder and Nonnegligent
&lt;p&gt;Manslaughter Rate&lt;br /&gt;
&lt;small&gt;(per 100,000 inhabitants)&lt;/small&gt;&lt;br /&gt;
&lt;small&gt;(2015)&lt;/small&gt;&lt;/p&gt;
&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;/wiki/Alabama&quot; title=&quot;Alabama&quot;&gt;Alabama&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;4,853,875&lt;/td&gt;
&lt;td&gt;348&lt;/td&gt;
&lt;td&gt;7.2&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;/wiki/Alaska&quot; title=&quot;Alaska&quot;&gt;Alaska&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;737,709&lt;/td&gt;
&lt;td&gt;59&lt;/td&gt;
&lt;td&gt;8.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;</code></pre>
<p>You can actually see the data, except data values are surrounded by html code such as <code>&lt;td&gt;</code>. We can also see a pattern of how it is stored. If you know HTML, you can write programs that leverage knowledge of these patterns to extract what we want. We also take advantage of a language widely used to make webpages look “pretty” called Cascading Style Sheets (CSS). We say more about this in the textbook <a href="https://rafalab.github.io/dsbook/web-scraping.html#css-selectors">(Section - 23.3 CSS selectors)</a>.</p>
<p>Although we provide tools that make it possible to scrape data without knowing HTML, as a data scientist it is quite useful to learn some HTML and CSS. Not only does this improve your scraping skills, but it might come in handy if you are creating a webpage to showcase your work. There are plenty of online courses and tutorials for learning these. Two examples are <a href="https://www.codecademy.com/learn/learn-html">Codeacademy</a> and <a href="https://www.w3schools.com/">W3schools</a>.</p>
</div>
<div id="section-the-rvest-package" class="section level3">
<h3>The <code>rvest</code> package</h3>
<p>The <strong>tidyverse</strong> provides a web harvesting package called <strong>rvest</strong>. The first step using this package is to import the webpage into R. The package makes this quite simple:</p>
<pre class="r"><code>library(tidyverse)
library(rvest)
h &lt;- read_html(url)</code></pre>
<p>Note that the entire Murders in the US Wikipedia webpage is now contained in <code>h</code>. The class of this object is:</p>
<pre class="r"><code>class(h)</code></pre>
<pre><code>## [1] &quot;xml_document&quot; &quot;xml_node&quot;</code></pre>
<p>The <strong>rvest</strong> package is actually more general; it handles XML documents. XML is a general markup language (that’s what the ML stands for) that can be used to represent any kind of data. HTML is a specific type of XML specifically developed for representing webpages. Here we focus on HTML documents.</p>
<p>Now, how do we extract the table from the object <code>h</code>? If we print <code>h</code>, we don’t really see much:</p>
<pre class="r"><code>h</code></pre>
<pre><code>## {html_document}
## &lt;html class=&quot;client-nojs&quot; lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;
## [1] &lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8 ...
## [2] &lt;body class=&quot;mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject  ...</code></pre>
<p>We can see all the code that defines the downloaded webpage using the <code>html_text</code> function like this:</p>
<pre class="r"><code>html_text(h)</code></pre>
<p>We don’t show the output here because it includes thousands of characters, but if we look at it, we can see the data we are after are stored in an HTML table: you can see this in this line of the HTML code above <code>&lt;table class="wikitable sortable"&gt;</code>. The different parts of an HTML document, often defined with a message in between <code>&lt;</code> and <code>&gt;</code> are referred to as <em>nodes</em>. The <strong>rvest</strong> package includes functions to extract nodes of an HTML document: <code>html_nodes</code> extracts all nodes of different types and <code>html_node</code> extracts the first one. To extract the tables from the html code we use:</p>
<pre class="r"><code>tab &lt;- h %&gt;% html_nodes(&quot;table&quot;)</code></pre>
<p>Now, instead of the entire webpage, we just have the html code for the tables in the page:</p>
<pre class="r"><code>tab</code></pre>
<pre><code>## {xml_nodeset (2)}
## [1] &lt;table class=&quot;wikitable sortable&quot;&gt;&lt;tbody&gt;\n&lt;tr&gt;\n&lt;th&gt;State\n&lt;/th&gt;\n&lt;th&gt;\n ...
## [2] &lt;table class=&quot;nowraplinks hlist mw-collapsible mw-collapsed navbox-inner&quot; ...</code></pre>
<p>The table we are interested is the first one:</p>
<pre class="r"><code>tab[[1]]</code></pre>
<pre><code>## {html_node}
## &lt;table class=&quot;wikitable sortable&quot;&gt;
## [1] &lt;tbody&gt;\n&lt;tr&gt;\n&lt;th&gt;State\n&lt;/th&gt;\n&lt;th&gt;\n&lt;a href=&quot;/wiki/List_of_U.S._states ...</code></pre>
<p>This is clearly not a tidy dataset, not even a data frame. In the code above, you can definitely see a pattern and writing code to extract just the data is very doable. In fact, <strong>rvest</strong> includes a function just for converting HTML tables into data frames:</p>
<pre class="r"><code>tab &lt;- tab[[1]] %&gt;% html_table
class(tab)</code></pre>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>We are now much closer to having a usable data table:</p>
<pre class="r"><code>tab &lt;- tab %&gt;% setNames(c(&quot;state&quot;, &quot;population&quot;, &quot;total&quot;, &quot;murder_rate&quot;)) 
head(tab)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["population"],"name":[2],"type":["chr"],"align":["left"]},{"label":["total"],"name":[3],"type":["chr"],"align":["left"]},{"label":["murder_rate"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Alabama","2":"4,853,875","3":"348","4":"7.2","_rn_":"1"},{"1":"Alaska","2":"737,709","3":"59","4":"8.0","_rn_":"2"},{"1":"Arizona","2":"6,817,565","3":"309","4":"4.5","_rn_":"3"},{"1":"Arkansas","2":"2,977,853","3":"181","4":"6.1","_rn_":"4"},{"1":"California","2":"38,993,940","3":"1,861","4":"4.8","_rn_":"5"},{"1":"Colorado","2":"5,448,819","3":"176","4":"3.2","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>We still have some wrangling to do. For example, we need to remove the commas and turn characters into numbers. Before continuing with this, we will learn a more general approach to extracting information from web sites.</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>Web scraping is extracting data from a website.</p></li>
<li><p>The <strong>rvest</strong> web harvesting package includes functions to extract nodes of an HTML document: <code>html_nodes()</code>extracts all nodes of different types, and <code>html_node()</code> extracts the first node.</p></li>
<li><p><code>html_table()</code> converts an HTML table to a data frame.</p></li>
</ul>
</div>
</div>
<div id="section-css-selectors" class="section level3">
<h3>CSS Selectors</h3>
<div class="infobox">
<p><strong>Textbook link</strong> This page correnponds to the <a href="https://rafalab.github.io/dsbook/web-scraping.html#css-selectors">textbook section - 23.3 CSS selectors</a></p>
</div>
<p>The default look of a webpage made with the most basic HTML is quite unattractive. The aesthetically pleasing pages we see today are made using CSS to define the look and style of webpages. The fact that all pages for a company have the same style usually results from their use of the same CSS file to define the style. The general way these CSS files work is by defining how each of the elements of a webpage will look. The title, headings, itemized lists, tables, and links, for example, each receive their own style including font, color, size, and distance from the margin. CSS does this by leveraging patterns used to define these elements, referred to as <em>selectors</em>. An example of such a pattern, which we used above, is <code>table</code>, but there are many, many more.</p>
<p>If we want to grab data from a webpage and we happen to know a selector that is unique to the part of the page containing this data, we can use the <code>html_nodes</code> function. However, knowing which selector can be quite complicated. In fact, the complexity of webpages has been increasing as they become more sophisticated. For some of the more advanced ones, it seems almost impossible to find the nodes that define a particular piece of data. However, selector gadgets actually make this possible.</p>
<p><a href="http://selectorgadget.com/">SelectorGadget</a> is piece of software that allows you to interactively determine what CSS selector you need to extract specific components from the webpage. If you plan on scraping data other than tables from html pages, we highly recommend you install it. A Chrome extension is available which permits you to turn on the gadget and then, as you click through the page, it highlights parts and shows you the selector you need to extract these parts. There are various demos of how to do this including <strong>rvest</strong> author [Hadley Wickham’s vignette]/<a href="https://cran.r-project.org/web/packages/rvest/vignettes/selectorgadget.html" class="uri">https://cran.r-project.org/web/packages/rvest/vignettes/selectorgadget.html</a>) and other <a href="https://stat4701.github.io/edav/2015/04/02/rvest_tutorial/">tutorials based on the vignette</a> and <a href="https://www.analyticsvidhya.com/blog/2017/03/beginners-guide-on-web-scraping-in-r-using-rvest-with-hands-on-knowledge/">here</a>.</p>
<p>There are several other powerful tools provided by <strong>rvest</strong>. For example, the functions <code>html_form()</code>, <code>set_values()</code>, and <code>submit_form()</code> permit you to query a webpage from <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>. This is a more advanced topic not covered here.</p>
</div>
<div id="section-json" class="section level3">
<h3>JSON</h3>
<p>Sharing data on the internet has become more and more common. Unfortunately, providers use different formats, which makes it harder for data scientists to wrangle data into R. Yet there are some standards that are also becoming more common. Currently, a format that is widely being adopted is the JavaScript Object Notation or JSON. Because this format is very general, it is nothing like a spreadsheet. This JSON file looks more like the code you use to define a list. Here is an example of information stored in a JSON format:</p>
<pre><code>## [
##   {
##     &quot;name&quot;: &quot;Miguel&quot;,
##     &quot;student_id&quot;: 1,
##     &quot;exam_1&quot;: 85,
##     &quot;exam_2&quot;: 86
##   },
##   {
##     &quot;name&quot;: &quot;Sofia&quot;,
##     &quot;student_id&quot;: 2,
##     &quot;exam_1&quot;: 94,
##     &quot;exam_2&quot;: 93
##   },
##   {
##     &quot;name&quot;: &quot;Aya&quot;,
##     &quot;student_id&quot;: 3,
##     &quot;exam_1&quot;: 87,
##     &quot;exam_2&quot;: 88
##   },
##   {
##     &quot;name&quot;: &quot;Cheng&quot;,
##     &quot;student_id&quot;: 4,
##     &quot;exam_1&quot;: 90,
##     &quot;exam_2&quot;: 91
##   }
## ]</code></pre>
<p>The file above actually represents a data frame. To read it, we can use the function <code>fromJSON</code> from the <strong>jsonlite</strong> package. Note that JSON files are often made available via the internet. Several organizations provide a JSON API or a web service that you can connect directly to and obtain data. Here is an example:</p>
<pre class="r"><code>library(jsonlite)
citi_bike &lt;- fromJSON(&quot;http://citibikenyc.com/stations/json&quot;)</code></pre>
<p>This downloads a list. The first argument tells you when you downloaded it:</p>
<pre class="r"><code>citi_bike$executionTime</code></pre>
<p>and the second is a data table:</p>
<pre class="r"><code>citi_bike$stationBeanList %&gt;% as_tibble() </code></pre>
<p>You can learn much more by examining tutorials and help files from the <strong>jsonlite</strong> package. This package is intended for relatively simple tasks such as converging data into tables. For more flexibility, we recommend <code>rjson</code>.</p>
</div>
<div id="section-assessment-web-scraping" class="section level3">
<h3>2.3 Assessment: Web Scraping</h3>
<p>Insert Assessment here</p>
</div>
</div>
<div id="section-section-3-string-processing" class="section level2">
<h2>Section 3: String Processing</h2>
<p>In the <strong>String Processing</strong> section, we use case studies that help demonstrate how string processing is a powerful tool useful for overcoming many data wrangling challenges. You will see how the original <strong>raw</strong> data was processed to create the data frames we have used in courses throughout this series.</p>
<p>This section is divided into three parts. There are comprehension checks at the end of each of the three parts.</p>
<p>After completing the <strong>String Processing</strong> section, you will be able to:</p>
<ul>
<li><strong>Remove</strong> unwanted characters from text.</li>
<li><strong>Extract numeric</strong> values from text.</li>
<li><strong>Find</strong> and <strong>replace</strong> characters.</li>
<li><strong>Extract specific</strong> parts of strings.</li>
<li><strong>Convert</strong> free form text into more uniform formats.</li>
<li><strong>Split strings</strong> into multiple values.</li>
<li>Use <strong>regular expressions (regex)</strong> to process strings.</li>
</ul>
<p>We encourage you to use <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg> to interactively test out your answers and further your own learning.</p>
<div id="section-string-parsing" class="section level3">
<h3>String Parsing</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/string-processing.html">textbook section - 24 String processing</a>.</p>
</div>
<p>One of the most common data wrangling challenges involves extracting numeric data contained in character strings and converting them into the numeric representations required to make plots, compute summaries, or fit models in R. Also common is processing unorganized text into meaningful variable names or categorical variables. Many of the string processing challenges a data scientist faces are unique and often unexpected. It is therefore quite ambitious to write a comprehensive section on this topic. Here we use a series of case studies that help us demonstrate how string processing is a necessary step for many data wrangling challenges. Specifically, we describe the process of converting the not yet shown original <em>raw</em> data from which we extracted the <code>murders</code>, <code>heights</code>, and <code>research_funding_rates</code> example into the data frames we have studied in this course.</p>
<p>By going over these case studies, we will cover some of the most common tasks in string processing including extracting numbers from strings, removing unwanted characters from text, finding and replacing characters, extracting specific parts of strings, converting free form text to more uniform formats, and splitting strings into multiple values.</p>
<p>Base R includes functions to perform all these tasks. However, they don’t follow a unifying convention, which makes them a bit hard to memorize and use. The <strong>stringr</strong> package basically repackages this functionality, but uses a more consistent approach of naming functions and ordering their arguments. For example, in <strong>stringr</strong>, all the string processing functions start with <code>str_</code>. This means that if you type <code>str_</code> and hit tab, R will auto-complete and show all the available functions. As a result, we don’t necessarily have to memorize all the function names. Another advantage is that in the functions in this package the string being processed is always the first argument, which means we can more easily use the pipe. Therefore, we will start by describing how to use the functions in the <strong>stringr</strong> package.</p>
<p>Most of the examples will come from the second case study which deals with self-reported heights by students and most of the section is dedicated to learning regular expressions (regex), and functions in the <strong>stringr</strong> package.</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>The most common tasks in string processing include:</p>
<ul>
<li><p>extracting numbers from strings</p></li>
<li><p>removing unwanted characters from text</p></li>
<li><p>finding and replacing characters</p></li>
<li><p>extracting specific parts of strings</p></li>
<li><p>converting free form text to more uniform formats</p></li>
<li><p>splitting strings into multiple values</p></li>
</ul></li>
<li><p>The <strong>stringr</strong> package in the <strong>tidyverse</strong> contains string processing functions that follow a similar naming format (str_functionname) and are compatible with the pipe.</p></li>
</ul>
</div>
</div>
<div id="section-defining-strings-single-and-double-quotes-and-how-to-escape" class="section level3">
<h3>Defining Strings: Single and Double Quotes and How to Escape</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/string-processing.html#how-to-escape-when-defining-strings">textbook section - 24.4 How to escape when defining strings</a>.</p>
</div>
<p>To define strings in R, we can use either double quotes:</p>
<pre class="r"><code>s &lt;- &quot;Hello!&quot;</code></pre>
<p>or single quotes:</p>
<pre class="r"><code>s &lt;- &#39;Hello!&#39;</code></pre>
<p>Make sure you choose the correct single quote since using the back quote will give you an error:</p>
<pre class="r"><code>s &lt;- `Hello`</code></pre>
<pre><code>Error: object &#39;Hello&#39; not found</code></pre>
<p>Now, what happens if the string we want to define includes double quotes? For example, if we want to write 10 inches like this <code>10"</code>? In this case you can’t use:</p>
<pre class="r"><code>s &lt;- &quot;10&quot;&quot;</code></pre>
<p>because this is just the string <code>10</code> followed by a double quote. If you type this into R, you get an error because you have an <em>unclosed</em> double quote. To avoid this, we can use the single quotes:</p>
<pre class="r"><code>s &lt;- &#39;10&quot;&#39;</code></pre>
<p>If we print out <code>s</code> we see that the double quotes are <em>escaped</em> with the backslash <code>\</code>.</p>
<pre class="r"><code>s</code></pre>
<pre><code>## [1] &quot;10\&quot;&quot;</code></pre>
<p>In fact, escaping with the backslash provides a way to define the string while still using the double quotes to define strings:</p>
<pre class="r"><code>s &lt;- &quot;10\&quot;&quot;</code></pre>
<p>In R, the function <code>cat</code> lets us see what the string actually looks like:</p>
<pre class="r"><code>cat(s)</code></pre>
<pre><code>## 10&quot;</code></pre>
<p>Now, what if we want our string to be 5 feet written like this <code>5'</code>? In this case, we can use the double quotes:</p>
<pre class="r"><code>s &lt;- &quot;5&#39;&quot;
cat(s)</code></pre>
<pre><code>## 5&#39;</code></pre>
<p>So we’ve learned how to write 5 feet and 10 inches separately, but what if we want to write them together to represent <em>5 feet and 10 inches</em> like this <code>5'10"</code>? In this case, neither the single nor double quotes will work. This:</p>
<pre class="r"><code>s &lt;- &#39;5&#39;10&quot;&#39;</code></pre>
<p>closes the string after 5 and this:</p>
<pre class="r"><code>s &lt;- &quot;5&#39;10&quot;&quot;</code></pre>
<p>closes the string after 10. Keep in mind that if we type one of the above code snippets into R, it will get stuck waiting for you to close the open quote and you will have to exit the execution with the <em>esc</em> button.</p>
<p>In this situation, we need to escape the function of the quotes with the backslash <code>\</code>. You can escape either character like this:</p>
<pre class="r"><code>s &lt;- &#39;5\&#39;10&quot;&#39;
cat(s)</code></pre>
<pre><code>## 5&#39;10&quot;</code></pre>
<p>or like this:</p>
<pre class="r"><code>s &lt;- &quot;5&#39;10\&quot;&quot;
cat(s)</code></pre>
<pre><code>## 5&#39;10&quot;</code></pre>
<p>Escaping characters is something we often have to use when processing strings.</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>Define a string by surrounding text with either single quotes or double quotes.</p></li>
<li><p>To include a single quote inside a string, use double quotes on the outside. To include a double quote inside a string, use single quotes on the outside.</p></li>
<li><p>The <code>cat()</code> function displays a string as it is represented inside <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>.</p></li>
<li><p>To include a double quote inside of a string surrounded by double quotes, use the backslash () to escape the double quote. Escape a single quote to include it inside of a string defined by single quotes.</p></li>
<li><p>We will see additional uses of the escape later.</p></li>
</ul>
</div>
</div>
<div id="section-stringr-package" class="section level3">
<h3>stringr Package</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/string-processing.html#stringr">textbook section - 24.1 The stringr package</a>.</p>
</div>
<pre class="r"><code>library(tidyverse)
library(stringr)</code></pre>
<p>In general, string processing tasks can be divided into <strong>detecting</strong>, <strong>locating</strong>, <strong>extracting</strong>, or <strong>replacing</strong> patterns in strings. We will see several examples. The table below includes the functions available to you in the <strong>stringr</strong> package. We split them by task. We also include the R-base equivalent when available.</p>
<p>All these functions take a character vector as first argument. Also, for each function, operations are vectorized: the operation gets applied to each string in the vector.</p>
<p>Finally, note that in this table we mention <em>groups</em>. These will be explained in the textbook <a href="https://rafalab.github.io/dsbook/string-processing.html#groups">(Section - 24.5.9 Groups)</a>.</p>
<table>
<colgroup>
<col width="19%" />
<col width="13%" />
<col width="50%" />
<col width="17%" />
</colgroup>
<thead>
<tr class="header">
<th>stringr</th>
<th>Task</th>
<th>Description</th>
<th>R-base</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>str_detect</code></td>
<td>Detect</td>
<td>Is the pattern in the string?</td>
<td><code>grepl</code></td>
</tr>
<tr class="even">
<td><code>str_which</code></td>
<td>Detect</td>
<td>Returns the index of entries that contain the pattern.</td>
<td><code>grep</code></td>
</tr>
<tr class="odd">
<td><code>str_subset</code></td>
<td>Detect</td>
<td>Returns the subset of strings that contain the pattern.</td>
<td><code>grep</code> with <code>value = TRUE</code></td>
</tr>
<tr class="even">
<td><code>str_locate</code></td>
<td>Locate</td>
<td>Returns positions of first occurrence of pattern in a string.</td>
<td><code>regexpr</code></td>
</tr>
<tr class="odd">
<td><code>str_locate_all</code></td>
<td>Locate</td>
<td>Returns position of all occurrences of pattern in a string.</td>
<td><code>gregexpr</code></td>
</tr>
<tr class="even">
<td><code>str_view</code></td>
<td>Locate</td>
<td>Show the first part of the string that matches pattern.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>str_view_all</code></td>
<td>Locate</td>
<td>Show me all the parts of the string that match the pattern.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_extract</code></td>
<td>Extract</td>
<td>Extract the first part of the string that matches the pattern.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>str_extract_all</code></td>
<td>Extract</td>
<td>Extract all parts of the string that match the pattern.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_match</code></td>
<td>Extract</td>
<td>Extract first part of the string that matches the groups and the patterns defined by the groups.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>str_match_all</code></td>
<td>Extract</td>
<td>Extract all parts of the string that matches the groups and the patterns defined by the groups.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_sub</code></td>
<td>Extract</td>
<td>Extract a substring.</td>
<td><code>substring</code></td>
</tr>
<tr class="odd">
<td><code>str_split</code></td>
<td>Extract</td>
<td>Split a string into a list with parts separated by pattern.</td>
<td><code>strsplit</code></td>
</tr>
<tr class="even">
<td><code>str_split_fixed</code></td>
<td>Extract</td>
<td>Split a string into a matrix with parts separated by pattern.</td>
<td><code>strsplit</code> with <code>fixed = TRUE</code></td>
</tr>
<tr class="odd">
<td><code>str_count</code></td>
<td>Describe</td>
<td>Count number of times a pattern appears in a string.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_length</code></td>
<td>Describe</td>
<td>Number of character in string.</td>
<td><code>nchar</code></td>
</tr>
<tr class="odd">
<td><code>str_replace</code></td>
<td>Replace</td>
<td>Replace first part of a string matching a pattern with another.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_replace_all</code></td>
<td>Replace</td>
<td>Replace all parts of a string matching a pattern with another.</td>
<td><code>gsub</code></td>
</tr>
<tr class="odd">
<td><code>str_to_upper</code></td>
<td>Replace</td>
<td>Change all characters to upper case.</td>
<td><code>toupper</code></td>
</tr>
<tr class="even">
<td><code>str_to_lower</code></td>
<td>Replace</td>
<td>Change all characters to lower case.</td>
<td><code>tolower</code></td>
</tr>
<tr class="odd">
<td><code>str_to_title</code></td>
<td>Replace</td>
<td>Change first character to upper and rest to lower.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_replace_na</code></td>
<td>Replace</td>
<td>Replace all <code>NA</code>s to a new value.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>str_trim</code></td>
<td>Replace</td>
<td>Remove white space from start and end of string.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_c</code></td>
<td>Manipulate</td>
<td>Join multiple strings.</td>
<td><code>paste0</code></td>
</tr>
<tr class="odd">
<td><code>str_conv</code></td>
<td>Manipulate</td>
<td>Change the encoding of the string.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_sort</code></td>
<td>Manipulate</td>
<td>Sort the vector in alphabetical order.</td>
<td><code>sort</code></td>
</tr>
<tr class="odd">
<td><code>str_order</code></td>
<td>Manipulate</td>
<td>Index needed to order the vector in alphabetical order.</td>
<td><code>order</code></td>
</tr>
<tr class="even">
<td><code>str_trunc</code></td>
<td>Manipulate</td>
<td>Truncate a string to a fixed size.</td>
<td></td>
</tr>
<tr class="odd">
<td><code>str_pad</code></td>
<td>Manipulate</td>
<td>Add white space to string to make it a fixed size.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_dup</code></td>
<td>Manipulate</td>
<td>Repeat a string.</td>
<td><code>rep</code> then <code>paste</code></td>
</tr>
<tr class="odd">
<td><code>str_wrap</code></td>
<td>Manipulate</td>
<td>Wrap things into formatted paragraphs.</td>
<td></td>
</tr>
<tr class="even">
<td><code>str_interp</code></td>
<td>Manipulate</td>
<td>String interpolation.</td>
<td><code>sprintf</code></td>
</tr>
</tbody>
</table>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>The main types of string processing tasks are detecting, locating, extracting and replacing elements of strings.</p></li>
<li><p>The <strong>stringr</strong> package from the <strong>tidyverse</strong> includes a variety of string processing functions that begin with str_ and take the string as the first argument, which makes them compatible with the pipe.</p></li>
</ul>
</div>
</div>
<div id="section-case-study-1-us-murders-data" class="section level3">
<h3>Case Study 1: US Murders Data</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/string-processing.html#case-study-1-us-murders-data">textbook section - 24.2 Case study 1: US murders data</a>.</p>
</div>
</div>
<div id="section-note" class="section level3">
<h3>Note</h3>
<p>The Wikipedia page with US murder data has been updated since this section was created and is no longer easily converted with <code>as.numeric()</code> due to inclusion of endnote links. We will learn more string processing methods later that can be used to remove these endnotes.</p>
<p>In this section we introduce some of the more simple string processing challenges with the following datasets as an example:</p>
<pre class="r"><code>library(rvest)
url &lt;- paste0(&quot;https://en.wikipedia.org/w/index.php?title=&quot;,
              &quot;Gun_violence_in_the_United_States_by_state&quot;,
              &quot;&amp;direction=prev&amp;oldid=810166167&quot;)
murders_raw &lt;- read_html(url) %&gt;%
  html_node(&quot;table&quot;) %&gt;%
  html_table() %&gt;%
  setNames(c(&quot;state&quot;, &quot;population&quot;, &quot;total&quot;, &quot;murder_rate&quot;))</code></pre>
<p>The code above shows the first step in constructing the dataset</p>
<pre class="r"><code>library(dslabs)
data(murders)</code></pre>
<p>from the raw data, which was extracted from a Wikipedia page.</p>
<p>In general, string processing involves a string and a pattern. In R, we usually store strings in a character vector such as <code>murders$population</code>. The first three strings in this vector defined by the population variable are:</p>
<pre class="r"><code>murders_raw$population[1:3]</code></pre>
<pre><code>## [1] &quot;4,853,875&quot; &quot;737,709&quot;   &quot;6,817,565&quot;</code></pre>
<p>The usual coercion does not work here:</p>
<pre class="r"><code>as.numeric(murders_raw$population[1:3])</code></pre>
<pre><code>## [1] NA NA NA</code></pre>
<p>This is because of the commas <code>,</code>. The string processing we want to do here is remove the <strong>pattern</strong>, <code>,</code>, from the <strong>strings</strong> in <code>murders_raw$population</code> and then coerce to numbers. We can use the <code>str_detect</code> function to see that two of the three columns have commas in the entries:</p>
<pre class="r"><code>commas &lt;- function(x) any(str_detect(x, &quot;,&quot;))
murders_raw %&gt;% summarize_all(commas)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state"],"name":[1],"type":["lgl"],"align":["right"]},{"label":["population"],"name":[2],"type":["lgl"],"align":["right"]},{"label":["total"],"name":[3],"type":["lgl"],"align":["right"]},{"label":["murder_rate"],"name":[4],"type":["lgl"],"align":["right"]}],"data":[{"1":"FALSE","2":"TRUE","3":"TRUE","4":"FALSE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>We can then use the <code>str_replace_all</code> function to remove them:</p>
<pre class="r"><code>test_1 &lt;- str_replace_all(murders_raw$population, &quot;,&quot;, &quot;&quot;)
test_1 &lt;- as.numeric(test_1)</code></pre>
<p>We can then use <code>mutate_all</code> to apply this operation to each column, since it won’t affect the columns without commas.</p>
<p>It turns out that this operation is so common that <code>readr</code> includes the function <code>parse_number</code> specifically meant to remove non-numeric characters before coercing:</p>
<pre class="r"><code>test_2 &lt;- parse_number(murders_raw$population)
identical(test_1, test_2)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>So we can obtain our desired table using:</p>
<pre class="r"><code>murders_new &lt;- murders_raw %&gt;% mutate_at(2:3, parse_number)
head(murders_new)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["population"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["total"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["murder_rate"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"Alabama","2":"4853875","3":"348","4":"7.2","_rn_":"1"},{"1":"Alaska","2":"737709","3":"59","4":"8.0","_rn_":"2"},{"1":"Arizona","2":"6817565","3":"309","4":"4.5","_rn_":"3"},{"1":"Arkansas","2":"2977853","3":"181","4":"6.1","_rn_":"4"},{"1":"California","2":"38993940","3":"1861","4":"4.8","_rn_":"5"},{"1":"Colorado","2":"5448819","3":"176","4":"3.2","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>This case is relatively simple compared to the string processing challenges that we typically face in data science. The next example is a rather complex one and it provides several challenges that will permit us to learn many string processing techniques.</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>Use the <code>str_detect()</code> function to determine whether a string contains a certain pattern.</p></li>
<li><p>Use the <code>str_replace_all()</code> function to replace all instances of one pattern with another pattern. To remove a pattern, replace with the empty string (" ").</p></li>
<li><p>The <code>parse_number()</code> function removes punctuation from strings and converts them to numeric.</p></li>
<li><p><code>mutate_at()</code> performs the same transformation on the specified column numbers.</p></li>
</ul>
</div>
</div>
<div id="section-assessment-string-processing-part-1" class="section level3">
<h3>3. Assessment: String Processing Part 1</h3>
<p>Insert Assessment here</p>
</div>
<div id="section-case-study-2-reported-heights" class="section level3">
<h3>Case Study 2: Reported Heights</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/string-processing.html#case-study-2-self-reported-heights">textbook section - 24.3 Case study 2: self-reported heights</a>.</p>
</div>
<p>The <strong>dslabs</strong> package includes the raw data from which the heights dataset was obtained. You can load it like this:</p>
<pre class="r"><code>data(reported_heights)</code></pre>
<p>These heights were obtained using a web form in which students were asked to enter their heights. They could enter anything, but the instructions asked for <em>height in inches</em>, a number. We compiled 1,095 submissions, but unfortunately the column vector with the reported heights had several non-numeric entries and as a result became a character vector:</p>
<pre class="r"><code>class(reported_heights$height)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>If we try to parse it into numbers, we get a warning:</p>
<pre class="r"><code>x &lt;- as.numeric(reported_heights$height)</code></pre>
<p>Although most values appear to be height in inches as requested:</p>
<pre class="r"><code>head(x)</code></pre>
<pre><code>## [1] 75 70 68 74 61 65</code></pre>
<p>we do end up with many <code>NA</code>s:</p>
<pre class="r"><code>sum(is.na(x))</code></pre>
<pre><code>## [1] 81</code></pre>
<p>We can see some of the entries that are not successfully converted by using <code>filter</code> to keep only the entries resulting in <code>NA</code>s:</p>
<pre class="r"><code>reported_heights %&gt;% 
  mutate(new_height = as.numeric(height)) %&gt;%
  filter(is.na(new_height)) %&gt;% 
  head(n=10)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["time_stamp"],"name":[1],"type":["chr"],"align":["left"]},{"label":["sex"],"name":[2],"type":["chr"],"align":["left"]},{"label":["height"],"name":[3],"type":["chr"],"align":["left"]},{"label":["new_height"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"2014-09-02 15:16:28","2":"Male","3":"5' 4\"","4":"NA","_rn_":"1"},{"1":"2014-09-02 15:16:37","2":"Female","3":"165cm","4":"NA","_rn_":"2"},{"1":"2014-09-02 15:16:52","2":"Male","3":"5'7","4":"NA","_rn_":"3"},{"1":"2014-09-02 15:16:56","2":"Male","3":">9000","4":"NA","_rn_":"4"},{"1":"2014-09-02 15:16:56","2":"Male","3":"5'7\"","4":"NA","_rn_":"5"},{"1":"2014-09-02 15:17:09","2":"Female","3":"5'3\"","4":"NA","_rn_":"6"},{"1":"2014-09-02 15:18:00","2":"Male","3":"5 feet and 8.11 inches","4":"NA","_rn_":"7"},{"1":"2014-09-02 15:19:48","2":"Male","3":"5'11","4":"NA","_rn_":"8"},{"1":"2014-09-04 00:46:45","2":"Male","3":"5'9''","4":"NA","_rn_":"9"},{"1":"2014-09-04 10:29:44","2":"Male","3":"5'10''","4":"NA","_rn_":"10"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>We immediately see what is happening. Some of the students did not report their heights in inches as requested. We could discard these data and continue. However, many of the entries follow patterns that, in principle, we can easily convert to inches. For example, in the output above, we see various cases that use the format <code>x'y''</code> with <code>x</code> and <code>y</code> representing feet and inches, respectively. Each one of these cases can be read and converted to inches by a human, for example <code>5'4''</code> is <code>5*12 + 4 = 64</code>. So we could fix all the problematic entries <em>by hand</em>. However, humans are prone to making mistakes, so an automated approach is preferable. Also, because we plan on continuing to collect data, it will be convenient to write code that automatically does this.</p>
<p>A first step in this type of task is to survey the problematic entries and try to define specific patterns followed by a large groups of entries. The larger these groups, the more entries we can fix with a single programmatic approach. We want to find patterns that can be accurately described with a rule, such as “a digit, followed by a feet symbol, followed by one or two digits, followed by an inches symbol”.</p>
<p>To look for such patterns, it helps to remove the entries that are consistent with being in inches and to view only the problematic entries. We thus write a function to automatically do this. We keep entries that either result in <code>NA</code>s when applying <code>as.numeric</code> or are outside a range of plausible heights. We permit a range that covers about 99.9999% of the adult population. We also use <code>suppressWarnings</code> to avoid the warning message we know <code>as.numeric</code> will gives us.</p>
<pre class="r"><code>not_inches &lt;- function(x, smallest = 50, tallest = 84){
  inches &lt;- suppressWarnings(as.numeric(x))
  ind &lt;- is.na(inches) | inches &lt; smallest | inches &gt; tallest
  ind
}</code></pre>
<p>We apply this function and find the number of problematic entries:</p>
<pre class="r"><code>problems &lt;- reported_heights %&gt;% 
  filter(not_inches(height)) %&gt;%
  pull(height)
length(problems)</code></pre>
<pre><code>## [1] 292</code></pre>
<p>We can now view all the cases by simply printing them. We don’t do that here because there are <code>length(problems)</code>, but after surveying them carefully, we see that three patterns can be used to define three large groups within these exceptions.</p>
<p>1. A pattern of the form <code>x'y</code> or <code>x' y''</code> or <code>x'y"</code> with <code>x</code> and <code>y</code> representing feet and inches, respectively. Here are ten examples:</p>
<pre><code>## 5&#39; 4&quot; 5&#39;7 5&#39;7&quot; 5&#39;3&quot; 5&#39;11 5&#39;9&#39;&#39; 5&#39;10&#39;&#39; 5&#39; 10 5&#39;5&quot; 5&#39;2&quot;</code></pre>
<p>2. A pattern of the form <code>x.y</code> or <code>x,y</code> with <code>x</code> feet and <code>y</code> inches. Here are ten examples:</p>
<pre><code>## 5.3 5.5 6.5 5.8 5.6 5,3 5.9 6,8 5.5 6.2</code></pre>
<p>3. Entries that were reported in centimeters rather than inches. Here are ten examples:</p>
<pre><code>## 150 175 177 178 163 175 178 165 165 180</code></pre>
<p>Once we see these large groups following specific patterns, we can develop a plan of attack. Remember that there is rarely just one way to perform these tasks. Here we pick one that helps us teach several useful techniques. But surely there is a more efficient way of performing the task.</p>
<p><strong>Plan of attack</strong>: we will convert entries fitting the first two patterns into a standardized one. We will then leverage the standardization to extract the feet and inches and convert to inches. We will then define a procedure for identifying entries that are in centimeters and convert them to inches. After applying these steps, we will then check again to see what entries were not fixed and see if we can tweak our approach to be more comprehensive.</p>
<p>At the end, we hope to have a script that makes web-based data collection methods robust to the most common user mistakes.</p>
<p>To achieve our goal, we will use a technique that enables us to accurately detect patterns and extract the parts we want: <em>regular expressions</em> (regex). But first, we quickly describe how to <em>escape</em> the function of certain characters so that they can be included in strings.</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>In the raw heights data, many students did not report their height as the number of inches as requested. There are many entries with real height information but in the wrong format, which we can extract with string processing.</p></li>
<li><p>When there are both text and numeric entries in a column, the column will be a character vector. Converting this column to numeric will result in NAs for some entries.</p></li>
<li><p>To correct problematic entries, look for patterns that are shared across large numbers of entries, then define rules that identify those patterns and use these rules to write string processing tasks.</p></li>
<li><p>Use <code>suppressWarnings()</code> to hide warning messages for a function.</p></li>
</ul>
</div>
</div>
<div id="section-regex" class="section level3">
<h3>Regex</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/string-processing.html#regular-expressions">textbook section - 24.5 Regular expressions</a> through <a href="https://rafalab.github.io/dsbook/string-processing.html#special-characters">textbook section - 24.5.2 Special characters</a>.</p>
</div>
<p>A regular expression (regex) is a way to describe specific patterns of characters of text. They can be used to determine if a given string matches the pattern. A set of rules has been defined to do this efficiently and precisely and here we show some examples. We can learn more about these rules by reading a <a href="https://www.regular-expressions.info/tutorial.html">detailed tutorials</a> <a href="http://r4ds.had.co.nz/strings.html#matching-patterns-with-regular-expressions">or here</a>. This <a href="https://www.rstudio.com/wp-content/uploads/2016/09/RegExCheatsheet.pdf">RStudio cheat sheet</a> is also very useful.</p>
<p>The patterns supplied to the <strong>stringr</strong> functions can be a regex rather than a standard string. We will learn how this works through a series of examples.</p>
<p>Throughout this section you will see that we create strings to test out our regex. To do this, we define patterns that we know should match and also patterns that we know should not. We will call them <code>yes</code> and <code>no</code>, respectively. This permits us to check for the two types of errors: failing to match and incorrectly matching.</p>
</div>
<div id="section-strings-are-a-regex" class="section level3">
<h3>Strings are a regex</h3>
<p>Technically any string is a regex, perhaps the simplest example is a single character. So the comma <code>,</code> used in the next code example is a simple example of searching with regex.</p>
<pre class="r"><code>pattern &lt;- &quot;,&quot;
str_detect(murders_raw$total, pattern) </code></pre>
<p>We suppress the output which is logical vector telling us which entries have commas.</p>
<p>Above, we noted that an entry included a <code>cm</code>. This is also a simple example of a regex. We can show all the entries that used <code>cm</code> like this:</p>
<pre class="r"><code>str_subset(reported_heights$height, &quot;cm&quot;)</code></pre>
<pre><code>## [1] &quot;165cm&quot;  &quot;170 cm&quot;</code></pre>
</div>
<div id="section-special-characters" class="section level3">
<h3>Special characters</h3>
<p>Now let’s consider a slightly more complicated example. Which of the following strings contain the pattern <code>cm</code> or <code>inches</code>?</p>
<pre class="r"><code>yes &lt;- c(&quot;180 cm&quot;, &quot;70 inches&quot;)
no &lt;- c(&quot;180&quot;, &quot;70&#39;&#39;&quot;)
s &lt;- c(yes, no)</code></pre>
<pre class="r"><code>str_detect(s, &quot;cm&quot;) | str_detect(s, &quot;inches&quot;)</code></pre>
<pre><code>## [1]  TRUE  TRUE FALSE FALSE</code></pre>
<p>However, we don’t need to do this. The main feature that distinguishes the regex <em>language</em> from plain strings is that we can use special characters. These are characters with a meaning. We start by introducing <code>|</code> which means <em>or</em>. So if we want to know if either <code>cm</code> or <code>inches</code> appears in the strings, we can use the regex <code>cm|inches</code>:</p>
<pre class="r"><code>str_detect(s, &quot;cm|inches&quot;)</code></pre>
<pre><code>## [1]  TRUE  TRUE FALSE FALSE</code></pre>
<p>and obtain the correct answer.</p>
<p>Another special character that will be useful for identifying feet and inches values is <code>\d</code> which means any digit: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9. The backslash is used to distinguish it from the character <code>d</code>. In R, we have to <em>escape</em> the backslash <code>\</code> so we actually have to use <code>\\d</code> to represent digits. Here is an example:</p>
<pre class="r"><code>yes &lt;- c(&quot;5&quot;, &quot;6&quot;, &quot;5&#39;10&quot;, &quot;5 feet&quot;, &quot;4&#39;11&quot;)
no &lt;- c(&quot;&quot;, &quot;.&quot;, &quot;Five&quot;, &quot;six&quot;)
s &lt;- c(yes, no)
pattern &lt;- &quot;\\d&quot;
str_detect(s, pattern)</code></pre>
<pre><code>## [1]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE</code></pre>
<p>We take this opportunity to introduce the <code>str_view</code> function, which is helpful for troubleshooting as it shows us the first match for each string:</p>
<pre class="r"><code>str_view(s, pattern)</code></pre>
<p><img src="images/str_view-1.png" width="700px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /></p>
<p>and <code>str_view_all</code> shows us all the matches, so <code>3'2</code> has two matches and <code>5'10</code> has three.</p>
<pre class="r"><code>str_view_all(s, pattern)</code></pre>
<p><img src="images/str_view-2.png" width="700px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /></p>
<p>There are many other special characters. We will learn some others below, but you can see most or all of them in the <a href="https://www.rstudio.com/wp-content/uploads/2016/09/RegExCheatsheet.pdf">cheat sheet</a> mentioned earlier.</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>A regular expression (regex) is a way to describe a specific pattern of characters of text. A set of rules has been designed to do this specifically and efficiently.</p></li>
<li><p><strong>stringr</strong> functions can take a regex as a pattern.</p></li>
<li><p><code>str_detect()</code> indicates whether a pattern is present in a string.</p></li>
<li><p>The main difference between a regex and a regular string is that a regex can include special characters.</p></li>
<li><p>The | symbol inside a regex means “or”.</p></li>
<li><p>Use ‘\d’ to represent digits. The backlash is used to distinguish it from the character ‘d’. In R, you must use two backslashes for digits in regular expressions; in some other languages, you will only use one backslash for regex special characters.</p></li>
<li><p><code>str_view()</code> highlights the first occurrence of a pattern, and the <code>str_view_all()</code> function highlights all occurrences of the pattern.</p></li>
</ul>
</div>
</div>
<div id="section-character-classes-anchors-and-quantifiers" class="section level3">
<h3>Character Classes, Anchors and Quantifiers</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/string-processing.html#character-classes">textbook section - 24.5.3 Character classes</a>, and <a href="https://rafalab.github.io/dsbook/string-processing.html#anchors">textbook section - 24.5.4 Anchors</a>, and <a href="https://rafalab.github.io/dsbook/string-processing.html#quantifiers">textbook section - 24.5.5 Quantifiers</a>.</p>
</div>
<p>Character classes are used to define a series of characters that can be matched. We define character classes with square brackets <code>[]</code>. So, for example, if we want the pattern to match only if we have a <code>5</code> or a <code>6</code>, we use the regex <code>[56]</code>:</p>
<pre class="r"><code>str_view(s, &quot;[56]&quot;)</code></pre>
<p><img src="images/str_view-3.png" width="700px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /></p>
<p>Suppose we want to match values between 4 and 7. A common way to define character classes is with ranges. So, for example, <code>[0-9]</code> is equivalent to <code>\\d</code>. The pattern we want is therefore <code>[4-7]</code>.</p>
<pre class="r"><code>yes &lt;- as.character(4:7)
no &lt;- as.character(1:3)
s &lt;- c(yes, no)
str_detect(s, &quot;[4-7]&quot;)</code></pre>
<pre><code>## [1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE</code></pre>
<p>However, it is important to know that in regex everything is a character; there are no numbers. So <code>4</code> is the character <code>4</code> not the number four. Notice, for example, that <code>[1-20]</code> does <strong>not</strong> mean 1 through 20, it means the characters 1 through 2 or the character 0. So <code>[1-20]</code> simply means the character class composed of 0, 1, and 2.</p>
<p>Keep in mind that characters do have an order and the digits do follow the numeric order. So <code>0</code> comes before <code>1</code> which comes before <code>2</code> and so on. For the same reason, we can define lower case letters as <code>[a-z]</code>, upper case letters as <code>[A-Z]</code>, and <code>[a-zA-z]</code> as both.</p>
</div>
<div id="section-anchors" class="section level3">
<h3>Anchors</h3>
<p>What if we want a match when we have exactly 1 digit? This will be useful in our case study since feet are never more than 1 digit so a restriction will help us. One way to do this with regex is by using <em>anchors</em>, which let us define patterns that must start or end at a specific place. The two most common anchors are <code>^</code> and <code>$</code> which represent the beginning and end of a string, respectively. So the pattern <code>^\\d$</code> is read as “start of the string followed by one digit followed by end of string”.</p>
<p>This pattern now only detects the strings with exactly one digit:</p>
<pre class="r"><code>pattern &lt;- &quot;^\\d$&quot;
yes &lt;- c(&quot;1&quot;, &quot;5&quot;, &quot;9&quot;)
no &lt;- c(&quot;12&quot;, &quot;123&quot;, &quot; 1&quot;, &quot;a4&quot;, &quot;b&quot;)
s &lt;- c(yes, no)
str_view_all(s, pattern)</code></pre>
<p><img src="images/str_view-4.png" width="700px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /></p>
<p>The <code>1</code> does not match because it does not start with the digit but rather with a space, which is actually not easy to see.</p>
</div>
<div id="section-quantifiers" class="section level3">
<h3>Quantifiers</h3>
<p>For the inches part, we can have one or two digits. This can be specified in regex with <em>quantifiers</em>. This is done by following the pattern with curly brackets containing the number of times the previous entry can be repeated. We use an example to illustrate. The pattern for one or two digits is:</p>
<pre class="r"><code>pattern &lt;- &quot;^\\d{1,2}$&quot;
yes &lt;- c(&quot;1&quot;, &quot;5&quot;, &quot;9&quot;, &quot;12&quot;)
no &lt;- c(&quot;123&quot;, &quot;a4&quot;, &quot;b&quot;)
str_view(c(yes, no), pattern)</code></pre>
<p><img src="images/str_view-5.png" width="700px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /></p>
<p>In this case, <code>123</code> does <strong>not</strong> match, but <code>12</code> does. So to look for our feet and inches pattern, we can add the symbols for feet <code>'</code> and inches <code>"</code> after the digits.</p>
<p>With what we have learned, we can now construct an example for the pattern <code>x'y\"</code> with <code>x</code> feet and <code>y</code> inches.</p>
<pre class="r"><code>pattern &lt;- &quot;^[4-7]&#39;\\d{1,2}\&quot;$&quot;</code></pre>
<p>The pattern is now getting complex, but you can look at it carefully and break it down:</p>
<ul>
<li><code>^</code> = start of the string</li>
<li><code>[4-7]</code> = one digit, either 4,5,6 or 7</li>
<li><code>'</code> = feet symbol</li>
<li><code>\\d{1,2}</code> = one or two digits</li>
<li><code>\"</code> = inches symbol</li>
<li><code>$</code> = end of the string</li>
</ul>
<p>Let’s test it out:</p>
<pre class="r"><code>yes &lt;- c(&quot;5&#39;7\&quot;&quot;, &quot;6&#39;2\&quot;&quot;,  &quot;5&#39;12\&quot;&quot;)
no &lt;- c(&quot;6,2\&quot;&quot;, &quot;6.2\&quot;&quot;,&quot;I am 5&#39;11\&quot;&quot;, &quot;3&#39;2\&quot;&quot;, &quot;64&quot;)
str_detect(yes, pattern)</code></pre>
<pre><code>## [1] TRUE TRUE TRUE</code></pre>
<pre class="r"><code>str_detect(no, pattern)</code></pre>
<pre><code>## [1] FALSE FALSE FALSE FALSE FALSE</code></pre>
<p>For now, we are permitting the inches to be 12 or larger. We will add a restriction later as the regex for this is a bit more complex than we are ready to show.</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>Define strings to test your regular expressions, including some elements that match and some that do not. This allows you to check for the two types of errors: failing to match and matching incorrectly.</p></li>
<li><p>Square brackets define character classes: groups of characters that count as matching the pattern. You can use ranges to define character classes, such as [0-9] for digits and [a-zA-Z] for all letters.</p></li>
<li><p>Anchors define patterns that must start or end at specific places. ^ and $ represent the beginning and end of the string respectively.</p></li>
<li><p>Curly braces are quantifiers that state how many times a certain character can be repeated in the pattern. \d{1,2} matches exactly 1 or 2 consecutive digits.</p></li>
</ul>
</div>
</div>
<div id="section-search-and-replace-with-regex" class="section level3">
<h3>Search and Replace with Regex</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the</p>
<ul>
<li><p><a href="https://rafalab.github.io/dsbook/string-processing.html#search-and-replace-with-regex">textbook section - 24.6 Search and replace with regex</a>,</p></li>
<li><p><a href="https://rafalab.github.io/dsbook/string-processing.html#white-space-s">textbook section - 24.5.6 White space </a></p></li>
<li><p><a href="https://rafalab.github.io/dsbook/string-processing.html#quantifiers-1">textbook section - 24.5.7 Quantifiers: *, ?, +</a>.</p></li>
</ul>
</div>
<p>Earlier we defined the object <code>problems</code> containing the strings that do not appear to be in inches. We can see that not too many of our problematic strings match the pattern:</p>
<pre class="r"><code>pattern &lt;- &quot;^[4-7]&#39;\\d{1,2}\&quot;$&quot;
sum(str_detect(problems, pattern))</code></pre>
<pre><code>## [1] 14</code></pre>
<p>To see why this is, we show some examples that expose why we don’t have more matches:</p>
<pre class="r"><code>problems[c(2, 10, 11, 12, 15)] %&gt;% str_view(pattern)</code></pre>
<p><img src="images/str_view-6.png" width="700px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /> An initial problem we see immediately is that some students wrote out the words “feet” and “inches”. We can see the entries that did this with the <code>str_subset</code> function:</p>
<pre class="r"><code>str_subset(problems, &quot;inches&quot;)</code></pre>
<pre><code>## [1] &quot;5 feet and 8.11 inches&quot; &quot;Five foot eight inches&quot; &quot;5 feet 7inches&quot;        
## [4] &quot;5ft 9 inches&quot;           &quot;5 ft 9 inches&quot;          &quot;5 feet 6 inches&quot;</code></pre>
<p>We also see that some entries used two single quotes <code>''</code> instead of a double quote <code>"</code>.</p>
<pre class="r"><code>str_subset(problems, &quot;&#39;&#39;&quot;)</code></pre>
<pre><code>##  [1] &quot;5&#39;9&#39;&#39;&quot;   &quot;5&#39;10&#39;&#39;&quot;  &quot;5&#39;10&#39;&#39;&quot;  &quot;5&#39;3&#39;&#39;&quot;   &quot;5&#39;7&#39;&#39;&quot;   &quot;5&#39;6&#39;&#39;&quot;   &quot;5&#39;7.5&#39;&#39;&quot;
##  [8] &quot;5&#39;7.5&#39;&#39;&quot; &quot;5&#39;10&#39;&#39;&quot;  &quot;5&#39;11&#39;&#39;&quot;  &quot;5&#39;10&#39;&#39;&quot;  &quot;5&#39;5&#39;&#39;&quot;</code></pre>
<p>To correct this, we can replace the different ways of representing inches and feet with a uniform symbol. We will use <code>'</code> for feet, whereas for inches we will simply not use a symbol since some entries were of the form <code>x'y</code>. Now, if we no longer use the inches symbol, we have to change our pattern accordingly:</p>
<pre class="r"><code>pattern &lt;- &quot;^[4-7]&#39;\\d{1,2}$&quot;</code></pre>
<p>If we do this replacement before the matching, we get many more matches:</p>
<pre class="r"><code>problems %&gt;% 
  str_replace(&quot;feet|ft|foot&quot;, &quot;&#39;&quot;) %&gt;% # replace feet, ft, foot with &#39; 
  str_replace(&quot;inches|in|&#39;&#39;|\&quot;&quot;, &quot;&quot;) %&gt;% # remove all inches symbols
  str_detect(pattern) %&gt;% 
  sum()</code></pre>
<pre><code>## [1] 48</code></pre>
<p>However, we still have many cases to go.</p>
<p>Note that in the code above, we leveraged the <strong>stringr</strong> consistency and used the pipe.</p>
<p>For now, we improve our pattern by adding <code>\\s*</code> in front of and after the feet symbol <code>'</code> to permit space between the feet symbol and the numbers. Now we match a few more entries:</p>
<pre class="r"><code>pattern &lt;- &quot;^[4-7]\\s*&#39;\\s*\\d{1,2}$&quot;
problems %&gt;% 
  str_replace(&quot;feet|ft|foot&quot;, &quot;&#39;&quot;) %&gt;% # replace feet, ft, foot with &#39; 
  str_replace(&quot;inches|in|&#39;&#39;|\&quot;&quot;, &quot;&quot;) %&gt;% # remove all inches symbols
  str_detect(pattern) %&gt;% 
  sum</code></pre>
<pre><code>## [1] 53</code></pre>
</div>
<div id="section-white-space-s" class="section level3">
<h3>White space <code>\s</code></h3>
<p>Another problem we have are spaces. For example, our pattern does not match <code>5' 4"</code> because there is a space between <code>'</code> and <code>4</code> which our pattern does not permit. Spaces are characters and R does not ignore them:</p>
<pre class="r"><code>identical(&quot;Hi&quot;, &quot;Hi &quot;)</code></pre>
<pre><code>## [1] FALSE</code></pre>
<p>In regex, <code>\s</code> represents white space. To find patterns like <code>5' 4</code>, we can change our pattern to:</p>
<pre class="r"><code>pattern_2 &lt;- &quot;^[4-7]&#39;\\s\\d{1,2}\&quot;$&quot;
str_subset(problems, pattern_2)</code></pre>
<pre><code>## [1] &quot;5&#39; 4\&quot;&quot;  &quot;5&#39; 11\&quot;&quot; &quot;5&#39; 7\&quot;&quot;</code></pre>
<p>However, this will not match the patterns with no space. So do we need more than one regex pattern? It turns out we can use a quantifier for this as well.</p>
</div>
<div id="section-quantifiers-1" class="section level3">
<h3>Quantifiers: <code>*</code>, <code>?</code>, <code>+</code></h3>
<p>We want the pattern to permit spaces but not require them. Even if there are several spaces, like in this example <code>5'   4</code>, we still want it to match. There is a quantifier for exactly this purpose. In regex, the character <code>*</code> means zero or more instances of the previous character. Here is an example:</p>
<pre class="r"><code>yes &lt;- c(&quot;AB&quot;, &quot;A1B&quot;, &quot;A11B&quot;, &quot;A111B&quot;, &quot;A1111B&quot;)
no &lt;- c(&quot;A2B&quot;, &quot;A21B&quot;)
str_detect(yes, &quot;A1*B&quot;)</code></pre>
<pre><code>## [1] TRUE TRUE TRUE TRUE TRUE</code></pre>
<pre class="r"><code>str_detect(no, &quot;A1*B&quot;)</code></pre>
<pre><code>## [1] FALSE FALSE</code></pre>
<p>The above matches the first string which has zero 1s and all the strings with one or more 1. We can then improve our pattern by adding the <code>*</code> after the space character <code>\s</code>.</p>
<p>There are two other similar quantifiers. For none or once, we can use <code>?</code>, and for one or more, we can use <code>+</code>. You can see how they differ with this example:</p>
<pre class="r"><code>data.frame(string = c(&quot;AB&quot;, &quot;A1B&quot;, &quot;A11B&quot;, &quot;A111B&quot;, &quot;A1111B&quot;),
           none_or_more = str_detect(yes, &quot;A1*B&quot;),
           nore_or_once = str_detect(yes, &quot;A1?B&quot;),
           once_or_more = str_detect(yes, &quot;A1+B&quot;))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["string"],"name":[1],"type":["chr"],"align":["left"]},{"label":["none_or_more"],"name":[2],"type":["lgl"],"align":["right"]},{"label":["nore_or_once"],"name":[3],"type":["lgl"],"align":["right"]},{"label":["once_or_more"],"name":[4],"type":["lgl"],"align":["right"]}],"data":[{"1":"AB","2":"TRUE","3":"TRUE","4":"FALSE"},{"1":"A1B","2":"TRUE","3":"TRUE","4":"TRUE"},{"1":"A11B","2":"TRUE","3":"FALSE","4":"TRUE"},{"1":"A111B","2":"TRUE","3":"FALSE","4":"TRUE"},{"1":"A1111B","2":"TRUE","3":"FALSE","4":"TRUE"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>We will actually use all three in our reported heights example, but we will see these in a later section.</p>
<p>We might be tempted to avoid doing this by removing all the spaces with <code>str_replace_all</code>. However, when doing such an operation we need to make sure that it does not have unintended effects. In our reported heights examples, this will be a problem because some entries are of the form <code>x y</code> with space separating the feet from the inches. If we remove all spaces, we will incorrectly turn <code>x y</code> into <code>xy</code> which implies that a <code>6 1</code> would become <code>61</code> inches instead of <code>73</code> inches.</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p><code>str_replace()</code> replaces the first instance of the detected pattern with a specified string.</p></li>
<li><p>Spaces are characters and R does not ignore them. Spaces are specified by the special character \s.</p></li>
<li><p>Additional quantifiers include <em>, + and ?. </em> means 0 or more instances of the previous character. ? means 0 or 1 instances. + means 1 or more instances.</p></li>
<li><p>Before removing characters from strings with functions like <code>str_replace()</code> and <code>str_replace_all()</code>, consider whether that replacement would have unintended effects.</p></li>
</ul>
</div>
</div>
<div id="section-groups-with-regex" class="section level3">
<h3>Groups with Regex</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content is discussed within the <a href="https://rafalab.github.io/dsbook/string-processing.html#groups">textbook section - 24.5.9 Groups</a></p>
</div>
<p>The second large type of problematic entries were of the form <code>x.y</code>, <code>x,y</code> and <code>x y</code>. We want to change all these to our common format <code>x'y</code>. But we can’t just do a search and replace because we would change values such as <code>70.5</code> into <code>70'5</code>. Our strategy will therefore be to search for a very specific pattern that assures us feet and inches are being provided and then, for those that match, replace appropriately.</p>
<p>Another powerful aspect of groups is that you can refer to the extracted values in a regex when searching and replacing.</p>
<p>The regex special character for the <code>i</code>-th group is <code>\\i</code>. So <code>\\1</code> is the value extracted from the first group, <code>\\2</code> the value from the second and so on. As a simple example, note that the following code will replace a comma with period, but only if it is between two digits:</p>
<pre class="r"><code>pattern_with_groups &lt;-  &quot;^([4-7]),(\\d*)$&quot;
yes &lt;- c(&quot;5,9&quot;, &quot;5,11&quot;, &quot;6,&quot;, &quot;6,1&quot;)
no &lt;- c(&quot;5&#39;9&quot;, &quot;,&quot;, &quot;2,8&quot;, &quot;6.1.1&quot;)
s &lt;- c(yes, no)
str_replace(s, pattern_with_groups, &quot;\\1&#39;\\2&quot;)</code></pre>
<pre><code>## [1] &quot;5&#39;9&quot;   &quot;5&#39;11&quot;  &quot;6&#39;&quot;    &quot;6&#39;1&quot;   &quot;5&#39;9&quot;   &quot;,&quot;     &quot;2,8&quot;   &quot;6.1.1&quot;</code></pre>
<p>We can use this to convert cases in our reported heights.</p>
<p>We are now ready to define a pattern that helps us convert all the <code>x.y</code>, <code>x,y</code> and <code>x y</code> to our preferred format. We need to adapt <code>pattern_with_groups</code> to be a bit more flexible and capture all the cases.</p>
<pre class="r"><code>pattern_with_groups &lt;-&quot;^([4-7])\\s*[,\\.\\s+]\\s*(\\d*)$&quot;</code></pre>
<p>Let’s break this one down:</p>
<ul>
<li><code>^</code> = start of the string</li>
<li><code>[4-7]</code> = one digit, either 4, 5, 6, or 7</li>
<li><code>\\s*</code> = none or more white space</li>
<li><code>[,\\.\\s+]</code> = feet symbol is either <code>,</code>, <code>.</code> or at least one space</li>
<li><code>\\s*</code> = none or more white space</li>
<li><code>\\d*</code> = none or more digits</li>
<li><code>$</code> = end of the string</li>
</ul>
<p>We can see that it appears to be working:</p>
<pre class="r"><code>str_subset(problems, pattern_with_groups) %&gt;% head()</code></pre>
<pre><code>## [1] &quot;5.3&quot;  &quot;5.25&quot; &quot;5.5&quot;  &quot;6.5&quot;  &quot;5.8&quot;  &quot;5.6&quot;</code></pre>
<p>and will be able to perform the search and replace:</p>
<pre class="r"><code>str_subset(problems, pattern_with_groups) %&gt;% 
  str_replace(pattern_with_groups, &quot;\\1&#39;\\2&quot;) %&gt;% head</code></pre>
<pre><code>## [1] &quot;5&#39;3&quot;  &quot;5&#39;25&quot; &quot;5&#39;5&quot;  &quot;6&#39;5&quot;  &quot;5&#39;8&quot;  &quot;5&#39;6&quot;</code></pre>
<p>Again, we will deal with the inches-larger-than-twelve challenge later.</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>Groups are defined using parentheses.</p></li>
<li><p>Once we define groups, we can use the function <code>str_match()</code> to extract the values these groups define. <code>str_extract()</code> extracts only strings that match a pattern, not the values defined by groups.</p></li>
<li><p>You can refer to the ith group with \i. For example, refer to the value in the second group with \2.</p></li>
</ul>
</div>
</div>
<div id="section-testing-and-improving" class="section level3">
<h3>Testing and Improving</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content corresponds to the <a href="https://rafalab.github.io/dsbook/string-processing.html#testing-and-improving">textbook section - 24.7 Testing and improving</a></p>
</div>
<p>Developing the right regex on the first try is often difficult. Trial and error is a common approach to finding the regex pattern that satisfies all desired conditions. In the previous sections, we have developed a powerful string processing technique that can help us catch many of the problematic entries. Here we will test our approach, search for further problems, and tweak our approach for possible improvements. Let’s write a function that captures all the entries that can’t be converted into numbers remembering that some are in centimeters (we will deal with those later):</p>
<pre class="r"><code>not_inches_or_cm &lt;- function(x, smallest = 50, tallest = 84){
  inches &lt;- suppressWarnings(as.numeric(x))
  ind &lt;- !is.na(inches) &amp; 
    ((inches &gt;= smallest &amp; inches &lt;= tallest) |
       (inches/2.54 &gt;= smallest &amp; inches/2.54 &lt;= tallest))
  !ind
}

problems &lt;- reported_heights %&gt;% 
  filter(not_inches_or_cm(height)) %&gt;%
  pull(height)
length(problems)</code></pre>
<pre><code>## [1] 200</code></pre>
<p>Let’s see what proportion of these fit our pattern after the processing steps we developed above:</p>
<pre class="r"><code>converted &lt;- problems %&gt;% 
  str_replace(&quot;feet|foot|ft&quot;, &quot;&#39;&quot;) %&gt;% # convert feet symbols to &#39;
  str_replace(&quot;inches|in|&#39;&#39;|\&quot;&quot;, &quot;&quot;) %&gt;%  # remove inches symbols
  str_replace(&quot;^([4-7])\\s*[,\\.\\s+]\\s*(\\d*)$&quot;, &quot;\\1&#39;\\2&quot;)# change format

pattern &lt;- &quot;^[4-7]\\s*&#39;\\s*\\d{1,2}$&quot;
index &lt;- str_detect(converted, pattern)
mean(index)</code></pre>
<pre><code>## [1] 0.615</code></pre>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>Wrangling with regular expressions is often an iterative process of testing the approach, looking for problematic entries, and improving the patterns.</p></li>
<li><p>Use the pipe to connect <strong>stringr</strong> functions.</p></li>
<li><p>It may not be worth writing code to correct every unique problem in the data, but string processing techniques are flexible enough for most needs.</p></li>
</ul>
</div>
</div>
<div id="section-assessment-string-processing-part-2" class="section level3">
<h3>3.2 Assessment: String Processing Part 2</h3>
<p>Insert assessment here</p>
</div>
<div id="section-separate-with-regex" class="section level3">
<h3>3.3 Separate with Regex</h3>
<div class="infobox">
<p><strong>Textbook link</strong> The content corresponds to the <a href="https://rafalab.github.io/dsbook/string-processing.html#the-extract-function">textbook section - 24.10.1 The extract function</a></p>
</div>
<p>The <code>extract</code> function is a useful <strong>tidyverse</strong> function for string processing that we will use in our final solution, so we introduce it here. In a previous section, we constructed a regex that lets us identify which elements of a character vector match the feet and inches pattern. However, we want to do more. We want to extract and save the feet and number values so that we can convert them to inches when appropriate.</p>
<p>If we have a simpler case like this:</p>
<pre class="r"><code>s &lt;- c(&quot;5&#39;10&quot;, &quot;6&#39;1&quot;)
tab &lt;- data.frame(x = s)</code></pre>
<p>In the textbook <a href="https://rafalab.github.io/dsbook/reshaping-data.html#separate">(Section - 21.3 separate)</a> we learned about the <code>separate</code> function, which can be used to achieve our current goal:</p>
<pre class="r"><code>tab %&gt;% separate(x, c(&quot;feet&quot;, &quot;inches&quot;), sep = &quot;&#39;&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["feet"],"name":[1],"type":["chr"],"align":["left"]},{"label":["inches"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"5","2":"10"},{"1":"6","2":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>The <code>extract</code> function from the <strong>tidyr</strong> package lets us use regex groups to extract the desired values. Here is the equivalent to the code above using <code>separate</code> but using <code>extract</code>:</p>
<pre class="r"><code>library(tidyr)
tab %&gt;% extract(x, c(&quot;feet&quot;, &quot;inches&quot;), regex = &quot;(\\d)&#39;(\\d{1,2})&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["feet"],"name":[1],"type":["chr"],"align":["left"]},{"label":["inches"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"5","2":"10"},{"1":"6","2":"1"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>So why do we even need the new function <code>extract</code>? We have seen how small changes can throw off exact pattern matching. Groups in regex give us more flexibility. For example, if we define:</p>
<pre class="r"><code>s &lt;- c(&quot;5&#39;10&quot;, &quot;6&#39;1\&quot;&quot;,&quot;5&#39;8inches&quot;)
tab &lt;- data.frame(x = s)</code></pre>
<p>and we only want the numbers, <code>separate</code> fails:</p>
<pre class="r"><code>tab %&gt;% separate(x, c(&quot;feet&quot;,&quot;inches&quot;), sep = &quot;&#39;&quot;, fill = &quot;right&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["feet"],"name":[1],"type":["chr"],"align":["left"]},{"label":["inches"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"5","2":"10"},{"1":"6","2":"1\""},{"1":"5","2":"8inches"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>However, we can use <code>extract</code>. The regex here is a bit more complicated since we have to permit <code>'</code> with spaces and <code>feet</code>. We also do not want the <code>"</code> included in the value, so we do not include that in the group:</p>
<pre class="r"><code>tab %&gt;% extract(x, c(&quot;feet&quot;, &quot;inches&quot;), regex = &quot;(\\d)&#39;(\\d{1,2})&quot;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["feet"],"name":[1],"type":["chr"],"align":["left"]},{"label":["inches"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"5","2":"10"},{"1":"6","2":"1"},{"1":"5","2":"8"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li>The <code>extract()</code> function behaves similarly to the <code>separate()</code> function but allows extraction of groups from regular expressions.</li>
</ul>
</div>
</div>
<div id="section-using-groups-and-quantifiers" class="section level3">
<h3>Using Groups and Quantifiers</h3>
<div class="infobox">
<p><strong>Textbook link</strong> This page corresponds to material in <a href="https://rafalab.github.io/dsbook/string-processing.html#testing-and-improving">textbook sections - 24.7 through 24.10</a></p>
</div>
<p>Four clear patterns of entries have arisen along with some other minor problems:</p>
<ul>
<li><p>Many students measuring exactly 5 or 6 feet did not enter any inches. For example, <strong>6’</strong> - our pattern requires that inches be included.</p></li>
<li><p>Some students measuring exactly 5 or 6 feet entered just that number.</p></li>
<li><p>Some of the inches were entered with decimal points. For example <strong>5’7.5’’</strong>. Our pattern only looks for two digits.</p></li>
<li><p>Some entries have spaces at the end, for example <strong>5 ’ 9</strong>.</p></li>
<li><p>Some entries are in meters and some of these use European decimals: <strong>1.6, 1,7</strong>.</p></li>
<li><p>Two students added <strong>cm</strong>.</p></li>
<li><p>One student spelled out the numbers: <strong>Five foot eight inches</strong>.</p></li>
</ul>
<p>It is not necessarily clear that it is worth writing code to handle all these cases since they might be rare enough. However, some give us an opportunity to learn some more regex techniques so we will build a fix.</p>
</div>
<div id="section-case-1" class="section level3">
<h3>Case 1</h3>
<p>For case 1, if we add a ’0 to, for example, convert all 6 to 6’0, then our pattern will match. This can be done using groups using the following code:</p>
<pre class="r"><code>yes &lt;- c(&quot;5&quot;, &quot;6&quot;, &quot;5&quot;)
no &lt;- c(&quot;5&#39;&quot;, &quot;5&#39;&#39;&quot;, &quot;5&#39;4&quot;)
s &lt;- c(yes, no)
str_replace(s, &quot;^([4-7])$&quot;, &quot;\\1&#39;0&quot;)</code></pre>
<p>The pattern says it has to start (^), be followed with a digit between 4 and 7, and then end there (<strong>$</strong>). The parenthesis defines the group that we pass as <strong>\1</strong> to the replace regex.</p>
</div>
<div id="section-cases-2-and-4" class="section level3">
<h3>Cases 2 and 4</h3>
<p>We can adapt this code slightly to handle case 2 as well which covers the entry <strong>5’</strong>. Note that the <strong>5’</strong> is left untouched by the code above. This is because the extra ’ makes the pattern not match since we have to end with a 5 or 6. To handle case 2, we want to permit the 5 or 6 to be followed by no or one symbol for feet. So we can simply add ‘<strong>{0,1}</strong> after the’ to do this. We can also use the none or once special character ?. As we saw previously, this is different from * which is none or more. We now see that this code also handles the fourth case as well:</p>
<pre class="r"><code>str_replace(s, &quot;^([56])&#39;?$&quot;, &quot;\\1&#39;0&quot;)</code></pre>
<p>Note that here we only permit 5 and 6 but not 4 and 7. This is because heights of exactly 5 and exactly 6 feet tall are quite common, so we assume those that typed 5 or 6 really meant either 60 or 72 inches. However, heights of exactly 4 or exactly 7 feet tall are so rare that, although we accept 84 as a valid entry, we assume that a 7 was entered in error.</p>
</div>
<div id="section-case-3" class="section level3">
<h3>Case 3</h3>
<p>We can use quantifiers to deal with case 3. These entries are not matched because the inches include decimals and our pattern does not permit this. We need allow the second group to include decimals and not just digits. This means we must permit zero or one period . followed by zero or more digits. So we will use both <strong>?</strong> and *. Also remember that for this particular case, the period needs to be escaped since it is a special character (it means any character except a line break).</p>
<p>So we can adapt our pattern, currently <code>^[4-7]\\s*'\\s*\\d{1,2}$</code>, to permit a decimal at the end:</p>
<pre class="r"><code>pattern &lt;- &quot;^[4-7]\\s*&#39;\\s*(\\d+\\.?\\d*)$&quot;</code></pre>
</div>
<div id="section-case-5" class="section level3">
<h3>Case 5</h3>
<p>Case 5, meters using commas, we can approach similarly to how we converted the x.y to x’y. A difference is that we require that the first digit is 1 or 2:</p>
<pre class="r"><code>yes &lt;- c(&quot;1,7&quot;, &quot;1, 8&quot;, &quot;2, &quot; )
no &lt;- c(&quot;5,8&quot;, &quot;5,3,2&quot;, &quot;1.7&quot;)
s &lt;- c(yes, no)
str_replace(s, &quot;^([12])\\s*,\\s*(\\d*)$&quot;, &quot;\\1\\.\\2&quot;)</code></pre>
<p>We will later check if the entries are meters using their numeric values.</p>
</div>
<div id="section-trimming" class="section level3">
<h3>Trimming</h3>
<p>In general, spaces at the start or end of the string are uninformative. These can be particularly deceptive because sometimes they can be hard to see:</p>
<pre class="r"><code>s &lt;- &quot;Hi &quot;
cat(s)
identical(s, &quot;Hi&quot;)</code></pre>
<p>This is a general enough problem that there is a function dedicated to removing them: <code>str_trim</code>.</p>
<pre class="r"><code>str_trim(&quot;5 &#39; 9 &quot;)</code></pre>
</div>
<div id="section-to-upper-and-to-lower-case" class="section level3">
<h3>To upper and to lower case</h3>
<p>One of the entries writes out numbers as words: <strong>Five foot eight inches</strong>. Although not efficient, we could add 12 extra <strong>str_replace</strong> to convert <strong>zero</strong> to <strong>0</strong>, one to <strong>1</strong>, and so on. To avoid having to write two separate operations for <strong>Zero</strong> and <strong>zero</strong>, <strong>One</strong> and <strong>one</strong>, etc., we can use the <code>str_to_lower()</code> function to make all words lower case first:</p>
<pre class="r"><code>s &lt;- c(&quot;Five feet eight inches&quot;)
str_to_lower(s)</code></pre>
</div>
<div id="section-putting-it-into-a-function" class="section level3">
<h3>Putting it into a function</h3>
<p>We are now ready to define a procedure that handles converting all the problematic cases.</p>
<p>We can now put all this together into a function that takes a string vector and tries to convert as many strings as possible to a single format. Below is a function that puts together the previous code replacements:</p>
<pre class="r"><code>convert_format &lt;- function(s){
  s %&gt;%
    str_replace(&quot;feet|foot|ft&quot;, &quot;&#39;&quot;) %&gt;% #convert feet symbols to &#39;
    str_replace_all(&quot;inches|in|&#39;&#39;|\&quot;|cm|and&quot;, &quot;&quot;) %&gt;%  #remove inches and other symbols
    str_replace(&quot;^([4-7])\\s*[,\\.\\s+]\\s*(\\d*)$&quot;, &quot;\\1&#39;\\2&quot;) %&gt;% #change x.y, x,y x y
    str_replace(&quot;^([56])&#39;?$&quot;, &quot;\\1&#39;0&quot;) %&gt;% #add 0 when to 5 or 6
    str_replace(&quot;^([12])\\s*,\\s*(\\d*)$&quot;, &quot;\\1\\.\\2&quot;) %&gt;% #change european decimal
    str_trim() #remove extra space
}</code></pre>
<p>We can also write a function that converts words to numbers:</p>
<pre class="r"><code>words_to_numbers &lt;- function(s){
  str_to_lower(s) %&gt;%  
    str_replace_all(&quot;zero&quot;, &quot;0&quot;) %&gt;%
    str_replace_all(&quot;one&quot;, &quot;1&quot;) %&gt;%
    str_replace_all(&quot;two&quot;, &quot;2&quot;) %&gt;%
    str_replace_all(&quot;three&quot;, &quot;3&quot;) %&gt;%
    str_replace_all(&quot;four&quot;, &quot;4&quot;) %&gt;%
    str_replace_all(&quot;five&quot;, &quot;5&quot;) %&gt;%
    str_replace_all(&quot;six&quot;, &quot;6&quot;) %&gt;%
    str_replace_all(&quot;seven&quot;, &quot;7&quot;) %&gt;%
    str_replace_all(&quot;eight&quot;, &quot;8&quot;) %&gt;%
    str_replace_all(&quot;nine&quot;, &quot;9&quot;) %&gt;%
    str_replace_all(&quot;ten&quot;, &quot;10&quot;) %&gt;%
    str_replace_all(&quot;eleven&quot;, &quot;11&quot;)
}</code></pre>
<p>Now we can see which problematic entries remain:</p>
<pre class="r"><code>converted &lt;- problems %&gt;% words_to_numbers %&gt;% convert_format
remaining_problems &lt;- converted[not_inches_or_cm(converted)]
pattern &lt;- &quot;^[4-7]\\s*&#39;\\s*\\d+\\.?\\d*$&quot;
index &lt;- str_detect(remaining_problems, pattern)
remaining_problems[!index]</code></pre>
</div>
<div id="section-putting-it-all-together" class="section level3">
<h3>Putting it All Together</h3>
<p>We are now ready to put everything we’ve done so far together and wrangle our reported heights data as we try to recover as many heights as possible. The code is complex but we will break it down into parts.</p>
<p>We start by cleaning up the height column so that the heights are closer to a feet’inches format. We added an original heights column so we can compare before and after.</p>
<p>Let’s start by writing a function that cleans up strings so that all the feet and inches formats use the same x’y format when appropriate.</p>
<pre class="r"><code>pattern &lt;- &quot;^([4-7])\\s*&#39;\\s*(\\d+\\.?\\d*)$&quot;

smallest &lt;- 50
tallest &lt;- 84
new_heights &lt;- reported_heights %&gt;% 
  mutate(original = height, 
         height = words_to_numbers(height) %&gt;% convert_format()) %&gt;%
  extract(height, c(&quot;feet&quot;, &quot;inches&quot;), regex = pattern, remove = FALSE) %&gt;% 
  mutate_at(c(&quot;height&quot;, &quot;feet&quot;, &quot;inches&quot;), as.numeric) %&gt;%
  mutate(guess = 12*feet + inches) %&gt;%
  mutate(height = case_when(
    !is.na(height) &amp; between(height, smallest, tallest) ~ height, #inches 
    !is.na(height) &amp; between(height/2.54, smallest, tallest) ~ height/2.54, #centimeters
    !is.na(height) &amp; between(height*100/2.54, smallest, tallest) ~ height*100/2.54, #meters
    !is.na(guess) &amp; inches &lt; 12 &amp; between(guess, smallest, tallest) ~ guess, #feet&#39;inches
    TRUE ~ as.numeric(NA))) %&gt;%
  select(-guess)</code></pre>
<p>We can check all the entries we converted using the following code:</p>
<pre class="r"><code>new_heights %&gt;%
  filter(not_inches(original)) %&gt;%
  select(original, height) %&gt;% 
  arrange(height) %&gt;%
  View()</code></pre>
<p>Let’s take a look at the shortest students in our dataset using the following code:</p>
<pre class="r"><code>new_heights %&gt;% arrange(height) %&gt;% head(n=7)</code></pre>
<p>We see heights of 53, 54, and 55. In the original heights column, we also have 51 and 52. These short heights are very rare and it is likely that the students actually meant 5’1, 5’2, 5’3, 5’4, and 5’5. But because we are not completely sure, we will leave them as reported.</p>
</div>
<div id="section-string-splitting" class="section level3">
<h3>String Splitting</h3>
<div class="infobox">
<p><strong>Textbook link</strong> This section corresponds to the <a href="https://rafalab.github.io/dsbook/string-processing.html#string-splitting">textbook section - 24.11 String splitting</a></p>
</div>
<p>Another very common data wrangling operation is string splitting. To illustrate how this comes up, we start with an illustrative example. Suppose we did not have the function <code>read_csv</code> or <code>read.csv</code> available to us. We instead have to read a csv file using the base R function <code>readLines</code> like this:</p>
<pre class="r"><code>filename &lt;- system.file(&quot;extdata/murders.csv&quot;, package = &quot;dslabs&quot;)
lines &lt;- readLines(filename)</code></pre>
<p>This function reads-in the data line-by-line to create a vector of strings. In this case, one string for each row in the spreadsheet. The first six lines are:</p>
<pre class="r"><code>lines %&gt;% head()</code></pre>
<pre><code>## [1] &quot;state,abb,region,population,total&quot; &quot;Alabama,AL,South,4779736,135&quot;     
## [3] &quot;Alaska,AK,West,710231,19&quot;          &quot;Arizona,AZ,West,6392017,232&quot;      
## [5] &quot;Arkansas,AR,South,2915918,93&quot;      &quot;California,CA,West,37253956,1257&quot;</code></pre>
<p>We want to extract the values that are separated by a comma for each string in the vector. The command <code>str_split</code> does exactly this:</p>
<pre class="r"><code>x &lt;- str_split(lines, &quot;,&quot;) 
x %&gt;% head(2)</code></pre>
<pre><code>## [[1]]
## [1] &quot;state&quot;      &quot;abb&quot;        &quot;region&quot;     &quot;population&quot; &quot;total&quot;     
## 
## [[2]]
## [1] &quot;Alabama&quot; &quot;AL&quot;      &quot;South&quot;   &quot;4779736&quot; &quot;135&quot;</code></pre>
<p>Note that the first entry has the column names, so we can separate that out:</p>
<pre class="r"><code>col_names &lt;- x[[1]]
x &lt;- x[-1]</code></pre>
<p>To convert our list into a data frame, we can use a shortcut provided by the <code>map</code> functions in the <strong>purrr</strong> package. The map function applies the same function to each element in a list. So if we want to extract the first entry of each element in <code>x</code>, we can write:</p>
<pre class="r"><code>library(purrr)
map(x, function(y) y[1]) %&gt;% head(2)</code></pre>
<pre><code>## [[1]]
## [1] &quot;Alabama&quot;
## 
## [[2]]
## [1] &quot;Alaska&quot;</code></pre>
<p>However, because this is such a common task, <strong>purrr</strong> provides a shortcut. If the second argument receives an integer instead of a function, it assumes we want that entry. So the code above can be written more efficiently like this:</p>
<pre class="r"><code>map(x, 1)</code></pre>
<p>To force <code>map</code> to return a character vector instead of a list, we can use <code>map_chr</code>. Similarly, <code>map_int</code> returns integers. So to create our data frame, we can use:</p>
<pre class="r"><code>dat &lt;- tibble(map_chr(x, 1),  
              map_chr(x, 2),
              map_chr(x, 3),
              map_chr(x, 4),
              map_chr(x, 5)) %&gt;%
  mutate_all(parse_guess) %&gt;%
  setNames(col_names)
dat %&gt;% head</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["abb"],"name":[2],"type":["chr"],"align":["left"]},{"label":["region"],"name":[3],"type":["chr"],"align":["left"]},{"label":["population"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["total"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Alabama","2":"AL","3":"South","4":"4779736","5":"135"},{"1":"Alaska","2":"AK","3":"West","4":"710231","5":"19"},{"1":"Arizona","2":"AZ","3":"West","4":"6392017","5":"232"},{"1":"Arkansas","2":"AR","3":"South","4":"2915918","5":"93"},{"1":"California","2":"CA","3":"West","4":"37253956","5":"1257"},{"1":"Colorado","2":"CO","3":"West","4":"5029196","5":"65"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>If you learn more about the <strong>purrr</strong> package, you will learn that you perform the above with the following, more efficient, code:</p>
<pre class="r"><code>dat &lt;- x %&gt;%
  transpose() %&gt;%
  map( ~ parse_guess(unlist(.))) %&gt;%
  setNames(col_names) %&gt;% 
  as_tibble() </code></pre>
<p>It turns out that we can avoid all the work shown above after the call to <code>str_split</code>. Specifically, if we know that the data we are extracting can be represented as a table, we can use the argument <code>simplify=TRUE</code> and <code>str_split</code> returns a matrix instead of a list:</p>
<pre class="r"><code>x &lt;- str_split(lines, &quot;,&quot;, simplify = TRUE) 
col_names &lt;- x[1,]
x &lt;- x[-1,]
colnames(x) &lt;- col_names
x %&gt;% as_tibble() %&gt;%
  mutate_all(parse_guess) %&gt;%
  head(5)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["state"],"name":[1],"type":["chr"],"align":["left"]},{"label":["abb"],"name":[2],"type":["chr"],"align":["left"]},{"label":["region"],"name":[3],"type":["chr"],"align":["left"]},{"label":["population"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["total"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"Alabama","2":"AL","3":"South","4":"4779736","5":"135"},{"1":"Alaska","2":"AK","3":"West","4":"710231","5":"19"},{"1":"Arizona","2":"AZ","3":"West","4":"6392017","5":"232"},{"1":"Arkansas","2":"AR","3":"South","4":"2915918","5":"93"},{"1":"California","2":"CA","3":"West","4":"37253956","5":"1257"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>The function <code>str_split()</code> splits a string into a character vector on a delimiter (such as a comma, space or underscore). By default, <code>str_split()</code> generates a list with one element for each original string. Use the function argument <code>simplify=TRUE</code> to have <code>str_split()</code> return a matrix instead.</p></li>
<li><p>The <code>map()</code> function from the <strong>purrr</strong> package applies the same function to each element of a list. To extract the ith entry of each element x, use map(x, i).</p></li>
<li><p><code>map()</code> always returns a list. Use <code>map_chr()</code> to return a character vector and <code>map_int()</code> to return an integer.</p></li>
</ul>
</div>
</div>
<div id="section-case-study-extracting-a-table-from-a-pdf" class="section level3">
<h3>Case Study: Extracting a Table from a PDF</h3>
<div class="infobox">
<p><strong>Textbook link</strong> This section corresponds to the <a href="https://rafalab.github.io/dsbook/string-processing.html#case-study-3-extracting-tables-from-a-pdf">textbook section - 24.12 Case study 3: extracting tables from a PDF</a></p>
</div>
<p>One of the datasets provided in dslabs shows scientific funding rates by gender in the Netherlands:</p>
<pre class="r"><code>library(dslabs)
data(&quot;research_funding_rates&quot;)
research_funding_rates </code></pre>
<p>The data come from a <a href="https://www.pnas.org/content/112/40/12349.abstract">paper</a> published in the prestigious journal PNAS. However, the data are not provided in a spreadsheet; they are in a table in a PDF document. We could extract the numbers by hand, but this could lead to human error. Instead we can try to wrangle the data using R.</p>
</div>
<div id="section-downloading-the-data" class="section level3">
<h3>Downloading the data</h3>
<p>We start by downloading the PDF document then importing it into R using the following code:</p>
<pre class="r"><code>library(&quot;pdftools&quot;)
temp_file &lt;- tempfile()
url &lt;- &quot;http://www.pnas.org/content/suppl/2015/09/16/1510159112.DCSupplemental/pnas.201510159SI.pdf&quot;
download.file(url, temp_file)
txt &lt;- pdf_text(temp_file)
file.remove(temp_file)</code></pre>
<p>If we examine the object text we notice that it is a character vector with an entry for each page. So we keep the page we want using the following code:</p>
<pre class="r"><code>raw_data_research_funding_rates &lt;- txt[2]</code></pre>
<p>The steps above can actually be skipped because we include the raw data in the dslabs package as well:</p>
<pre class="r"><code>data(&quot;raw_data_research_funding_rates&quot;)</code></pre>
</div>
<div id="section-looking-at-the-download" class="section level3">
<h3>Looking at the download</h3>
<p>Examining this object,</p>
<pre class="r"><code>raw_data_research_funding_rates %&gt;% head</code></pre>
<p>we see that it is a long string. Each line on the page, including the table rows, is separated by the symbol for newline: .</p>
<p>We can therefore can create a list with the lines of the text as elements:</p>
<pre class="r"><code>tab &lt;- str_split(raw_data_research_funding_rates, &quot;\n&quot;)</code></pre>
<p>Because we start off with just one element in the string, we end up with a list with just one entry:</p>
<pre class="r"><code>tab &lt;- tab[[1]]</code></pre>
<p>By examining this object,</p>
<pre class="r"><code>tab %&gt;% head</code></pre>
<p>we see that the information for the column names is the third and fourth entires:</p>
<pre class="r"><code>the_names_1 &lt;- tab[3]
the_names_2 &lt;- tab[4]</code></pre>
<p>In the table, the column information is spread across two lines. We want to create one vector with one name for each column. We can do this using some of the functions we have just learned.</p>
</div>
<div id="section-extracting-the-table-data" class="section level3">
<h3>Extracting the table data</h3>
<p>Let’s start with the first line:</p>
<pre class="r"><code>the_names_1</code></pre>
<p>We want to remove the leading space and everything following the comma. We can use regex for the latter. Then we can obtain the elements by splitting using the space. We want to split only when there are 2 or more spaces to avoid splitting success rate. So we use the regex \s{2,} as follows:</p>
<pre class="r"><code>the_names_1 &lt;- the_names_1 %&gt;%
  str_trim() %&gt;%
  str_replace_all(&quot;,\\s.&quot;, &quot;&quot;) %&gt;%
  str_split(&quot;\\s{2,}&quot;, simplify = TRUE)
the_names_1</code></pre>
<p>Now let’s look at the second line:</p>
<pre class="r"><code>the_names_2</code></pre>
<p>Here we want to trim the leading space and then split by space as we did for the first line:</p>
<pre class="r"><code>the_names_2 &lt;- the_names_2 %&gt;%
  str_trim() %&gt;%
  str_split(&quot;\\s+&quot;, simplify = TRUE)
the_names_2</code></pre>
<p>Now we can join these to generate one name for each column:</p>
<pre class="r"><code>tmp_names &lt;- str_c(rep(the_names_1, each = 3), the_names_2[-1], sep = &quot;_&quot;)
the_names &lt;- c(the_names_2[1], tmp_names) %&gt;%
  str_to_lower() %&gt;%
  str_replace_all(&quot;\\s&quot;, &quot;_&quot;)
the_names</code></pre>
<p>Now we are ready to get the actual data. By examining the tab object, we notice that the information is in lines 6 through 14. We can use <code>str_split()</code> again to achieve our goal:</p>
<pre class="r"><code>new_research_funding_rates &lt;- tab[6:14] %&gt;%
  str_trim %&gt;%
  str_split(&quot;\\s{2,}&quot;, simplify = TRUE) %&gt;%
  data.frame(stringsAsFactors = FALSE) %&gt;%
  setNames(the_names) %&gt;%
  mutate_at(-1, parse_number)
new_research_funding_rates %&gt;% head()</code></pre>
<p>We can see that the objects are identical:</p>
<pre class="r"><code>identical(research_funding_rates, new_research_funding_rates)</code></pre>
</div>
<div id="section-recoding" class="section level3">
<h3>Recoding</h3>
<div class="infobox">
<p><strong>Textbook link</strong> This content corresponds to the <a href="https://rafalab.github.io/dsbook/string-processing.html#recode">textbook section - 24.13 Recoding</a></p>
</div>
<p>Another common operation involving strings is recoding the names of categorical variables. Let’s say you have really long names for your levels and you will be displaying them in plots, you might want to use shorter versions of these names. For example, in character vectors with country names, you might want to change “United States of America” to “USA” and “United Kingdom” to UK, and so on. We can do this with <code>case_when</code>, although the <strong>tidyverse</strong> offers an option that is specifically designed for this task: the <code>recode</code> function.</p>
<p>Here is an example that shows how to rename countries with long names:</p>
<pre class="r"><code>library(dslabs)
data(&quot;gapminder&quot;)</code></pre>
<p>Suppose we want to show life expectancy time series by country for the Caribbean:</p>
<pre class="r"><code>gapminder %&gt;% 
  filter(region == &quot;Caribbean&quot;) %&gt;%
  ggplot(aes(year, life_expectancy, color = country)) +
  geom_line()</code></pre>
<p><img src="datsci_06_files/figure-html/caribbean-1.png" width="700px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /></p>
<p>The plot is what we want, but much of the space is wasted to accommodate some of the long country names.</p>
<p>We have four countries with names longer than 12 characters. These names appear once for each year in the Gapminder dataset. Once we pick nicknames, we need to change them all consistently. The <code>recode</code> function can be used to do this:</p>
<pre class="r"><code>gapminder %&gt;% filter(region==&quot;Caribbean&quot;) %&gt;%
  mutate(country = recode(country, 
                          `Antigua and Barbuda` = &quot;Barbuda&quot;,
                          `Dominican Republic` = &quot;DR&quot;,
                          `St. Vincent and the Grenadines` = &quot;St. Vincent&quot;,
                          `Trinidad and Tobago` = &quot;Trinidad&quot;)) %&gt;%
  ggplot(aes(year, life_expectancy, color = country)) +
  geom_line()</code></pre>
<p><img src="datsci_06_files/figure-html/caribbean-with-nicknames-1.png" width="700px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /></p>
<p>There are other similar functions in other R packages, such as <code>recode_factor</code> and <code>fct_recoder</code> in the <strong>forcats</strong> package.</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>Change long factor names with the <code>recode()</code> function from the <strong>tidyverse</strong>.</p></li>
<li><p>Other similar functions include <code>recode_factor()</code> and <code>fct_recoder()</code> in the <strong>forcats</strong> package in the <strong>tidyverse</strong>. The same result could be obtained using the <code>case_when()</code> function, but <code>recode()</code> is more efficient to write.</p></li>
</ul>
</div>
</div>
<div id="section-assessment-part-1-string-processing-part-3" class="section level3">
<h3>3.3 Assessment Part 1: String Processing Part 3</h3>
<p>Insert assessment here</p>
</div>
<div id="section-assessment-part-2-string-processing-part-3" class="section level3">
<h3>3.3 Assessment Part 2: String Processing Part 3</h3>
<p>Insert assessment here</p>
</div>
</div>
<div id="section-section-4-dates-times-and-text-mining" class="section level2">
<h2>Section 4: Dates, Times, and Text Mining</h2>
<p>In the <strong>Dates, Times, and Text Mining</strong> section, you will learn how to deal with dates and times in <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg> and also how to generate numerical summaries from text data.</p>
<p>After completing this section, you will be able to:</p>
<ul>
<li><p>Handle <strong>dates</strong> and <strong>times</strong> in <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>.</p></li>
<li><p>Use the <strong>lubridate</strong> package to parse dates and times in different formats.</p></li>
<li><p>Generate <strong>numerical summaries from text data</strong> and apply data visualization and analysis techniques to those data.</p></li>
</ul>
<p>There is a comprehension check at the end of the section.</p>
<p>We encourage you to use <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg> to interactively test out your answers and further your own learning.</p>
<div id="section-dates-and-times" class="section level3">
<h3>Dates and Times</h3>
<div class="infobox">
<p><strong>Textbook link</strong> This content corresponds to the <a href="https://rafalab.github.io/dsbook/parsing-dates-and-times.html">textbook section - 25 Parsing dates and times</a></p>
</div>
<p>We have described three main types of vectors: numeric, character, and logical. In data science projects, we very often encounter variables that are dates. Although we can represent a date with a string, for example <code>November 2, 2017</code>, once we pick a reference day, referred to as the <em>epoch</em>, they can be converted to numbers by calculating the number of days since the epoch. Computer languages usually use January 1, 1970, as the epoch. So, for example, January 2, 2017 is day 1, December 31, 1969 is day -1, and November 2, 2017, is day 17,204.</p>
<p>Now how should we represent dates and times when analyzing data in R? We could just use days since the epoch, but then it is almost impossible to interpret. If I tell you it’s November 2, 2017, you know what this means immediately. If I tell you it’s day 17,204, you will be quite confused. Similar problems arise with times and even more complications can appear due to time zones.</p>
<p>For this reason, R defines a data type just for dates and times. We saw an example in the polls data:</p>
<pre class="r"><code>library(tidyverse)
library(dslabs)
data(&quot;polls_us_election_2016&quot;)
polls_us_election_2016$startdate %&gt;% head</code></pre>
<pre><code>## [1] &quot;2016-11-03&quot; &quot;2016-11-01&quot; &quot;2016-11-02&quot; &quot;2016-11-04&quot; &quot;2016-11-03&quot;
## [6] &quot;2016-11-03&quot;</code></pre>
<p>These look like strings, but they are not:</p>
<pre class="r"><code>class(polls_us_election_2016$startdate)</code></pre>
<pre><code>## [1] &quot;Date&quot;</code></pre>
<p>Look at what happens when we convert them to numbers:</p>
<pre class="r"><code>as.numeric(polls_us_election_2016$startdate) %&gt;% head</code></pre>
<pre><code>## [1] 17108 17106 17107 17109 17108 17108</code></pre>
<p>It turns them into days since the epoch. The <code>as.Date</code> function can convert a character into a date. So to see that the epoch is day 0 we can type</p>
<pre class="r"><code>as.Date(&quot;1970-01-01&quot;) %&gt;% as.numeric</code></pre>
<pre><code>## [1] 0</code></pre>
<p>Plotting functions, such as those in ggplot, are aware of the date format. This means that, for example, a scatterplot can use the numeric representation to decide on the position of the point, but include the string in the labels:</p>
<pre class="r"><code>polls_us_election_2016 %&gt;% filter(pollster == &quot;Ipsos&quot; &amp; state ==&quot;U.S.&quot;) %&gt;%
  ggplot(aes(startdate, rawpoll_trump)) +
  geom_line()</code></pre>
<p><img src="datsci_06_files/figure-html/rawpolls-vs-time-1.png" width="700px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /></p>
<p>Note in particular that the month names are displayed, a very convenient feature.</p>
</div>
<div id="section-the-lubridate-package" class="section level3">
<h3>The lubridate package</h3>
<p>The <strong>tidyverse</strong> includes functionality for dealing with dates through the <strong>lubridate</strong> package.</p>
<pre class="r"><code>library(lubridate)</code></pre>
<p>We will take a random sample of dates to show some of the useful things one can do:</p>
<pre class="r"><code>set.seed(2002)
dates &lt;- sample(polls_us_election_2016$startdate, 10) %&gt;% sort
dates</code></pre>
<pre><code>##  [1] &quot;2016-05-31&quot; &quot;2016-08-08&quot; &quot;2016-08-19&quot; &quot;2016-09-22&quot; &quot;2016-09-27&quot;
##  [6] &quot;2016-10-12&quot; &quot;2016-10-24&quot; &quot;2016-10-26&quot; &quot;2016-10-29&quot; &quot;2016-10-30&quot;</code></pre>
<p>The functions <code>year</code>, <code>month</code> and <code>day</code> extract those values:</p>
<pre class="r"><code>tibble(date = dates, 
       month = month(dates),
       day = day(dates),
       year = year(dates))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["date"],"name":[1],"type":["date"],"align":["right"]},{"label":["month"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["day"],"name":[3],"type":["int"],"align":["right"]},{"label":["year"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"2016-05-31","2":"5","3":"31","4":"2016"},{"1":"2016-08-08","2":"8","3":"8","4":"2016"},{"1":"2016-08-19","2":"8","3":"19","4":"2016"},{"1":"2016-09-22","2":"9","3":"22","4":"2016"},{"1":"2016-09-27","2":"9","3":"27","4":"2016"},{"1":"2016-10-12","2":"10","3":"12","4":"2016"},{"1":"2016-10-24","2":"10","3":"24","4":"2016"},{"1":"2016-10-26","2":"10","3":"26","4":"2016"},{"1":"2016-10-29","2":"10","3":"29","4":"2016"},{"1":"2016-10-30","2":"10","3":"30","4":"2016"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>We can also extract the month labels:</p>
<pre class="r"><code>month(dates, label = TRUE)</code></pre>
<pre><code>##  [1] May Aug Aug Sep Sep Oct Oct Oct Oct Oct
## 12 Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; ... &lt; Dec</code></pre>
<p>Another useful set of functions are the <em>parsers</em> that convert strings into dates. The function <code>ymd</code> assumes the dates are in the format YYYY-MM-DD and tries to parse as well as possible.</p>
<pre class="r"><code>x &lt;- c(20090101, &quot;2009-01-02&quot;, &quot;2009 01 03&quot;, &quot;2009-1-4&quot;,
       &quot;2009-1, 5&quot;, &quot;Created on 2009 1 6&quot;, &quot;200901 !!! 07&quot;)
ymd(x)</code></pre>
<pre><code>## [1] &quot;2009-01-01&quot; &quot;2009-01-02&quot; &quot;2009-01-03&quot; &quot;2009-01-04&quot; &quot;2009-01-05&quot;
## [6] &quot;2009-01-06&quot; &quot;2009-01-07&quot;</code></pre>
<p>A further complication comes from the fact that dates often come in different formats in which the order of year, month, and day are different. The preferred format is to show year (with all four digits), month (two digits), and then day, or what is called the ISO 8601. Specifically we use YYYY-MM-DD so that if we order the string, it will be ordered by date. You can see the function <code>ymd</code> returns them in this format.</p>
<p>But, what if you encounter dates such as “09/01/02”? This could be September 1, 2002 or January 2, 2009 or January 9, 2002. In these cases, examining the entire vector of dates will help you determine what format it is by process of elimination. Once you know, you can use the many parses provided by <strong>lubridate</strong>.</p>
<p>For example, if the string is:</p>
<pre class="r"><code>x &lt;- &quot;09/01/02&quot;</code></pre>
<p>The <code>ymd</code> function assumes the first entry is the year, the second is the month, and the third is the day, so it converts it to:</p>
<pre class="r"><code>ymd(x)</code></pre>
<pre><code>## [1] &quot;2009-01-02&quot;</code></pre>
<p>The <code>mdy</code> function assumes the first entry is the month, then the day, then the year:</p>
<pre class="r"><code>mdy(x)</code></pre>
<pre><code>## [1] &quot;2002-09-01&quot;</code></pre>
<p>The <em>lubridate</em> package provides a function for every possibility:</p>
<pre class="r"><code>ydm(x)</code></pre>
<pre><code>## [1] &quot;2009-02-01&quot;</code></pre>
<pre class="r"><code>myd(x)</code></pre>
<pre><code>## [1] &quot;2001-09-02&quot;</code></pre>
<pre class="r"><code>dmy(x)</code></pre>
<pre><code>## [1] &quot;2002-01-09&quot;</code></pre>
<pre class="r"><code>dym(x)</code></pre>
<pre><code>## [1] &quot;2001-02-09&quot;</code></pre>
<p>The <strong>lubridate</strong> package is also useful for dealing with times. In R base, you can get the current time typing <code>Sys.time()</code>. The <strong>lubridate</strong> package provides a slightly more advanced function, <code>now</code>, that permits you to define the time zone:</p>
<pre class="r"><code>now()</code></pre>
<pre><code>## [1] &quot;2020-10-07 16:38:21 BST&quot;</code></pre>
<pre class="r"><code>now(&quot;GMT&quot;)</code></pre>
<pre><code>## [1] &quot;2020-10-07 15:38:21 GMT&quot;</code></pre>
<p>You can see all the available time zones with <code>OlsonNames()</code> function.</p>
<p>We can also extract hours, minutes, and seconds:</p>
<pre class="r"><code>now() %&gt;% hour()</code></pre>
<pre><code>## [1] 16</code></pre>
<pre class="r"><code>now() %&gt;% minute()</code></pre>
<pre><code>## [1] 38</code></pre>
<pre class="r"><code>now() %&gt;% second()</code></pre>
<pre><code>## [1] 21.70498</code></pre>
<p>The package also includes a function to parse strings into times as well as parsers for time objects that include dates:</p>
<pre class="r"><code>x &lt;- c(&quot;12:34:56&quot;)
hms(x)</code></pre>
<pre><code>## [1] &quot;12H 34M 56S&quot;</code></pre>
<pre class="r"><code>x &lt;- &quot;Nov/2/2012 12:34:56&quot;
mdy_hms(x)</code></pre>
<pre><code>## [1] &quot;2012-11-02 12:34:56 UTC&quot;</code></pre>
<p>This package has many other useful functions. We describe two of these here that we find particularly useful.</p>
<p>The <code>make_date</code> function can be used to quickly create a date object. It takes three arguments: year, month, day, hour, minute, seconds, and time zone defaulting to the epoch values on UTC time. So create an date object representing, for example, July 6, 2019 we write:</p>
<pre class="r"><code>make_date(2019, 7, 6)</code></pre>
<pre><code>## [1] &quot;2019-07-06&quot;</code></pre>
<p>To make a vector of January 1 for the 80s we write:</p>
<pre class="r"><code>make_date(1980:1989)</code></pre>
<pre><code>##  [1] &quot;1980-01-01&quot; &quot;1981-01-01&quot; &quot;1982-01-01&quot; &quot;1983-01-01&quot; &quot;1984-01-01&quot;
##  [6] &quot;1985-01-01&quot; &quot;1986-01-01&quot; &quot;1987-01-01&quot; &quot;1988-01-01&quot; &quot;1989-01-01&quot;</code></pre>
<p>Another very useful function is the <code>round_date</code>. It can be used to <em>round</em> dates to nearest year, quarter, month, week, day, hour, minutes, or seconds. So if we want to group all the polls by week of the year we can do the following:</p>
<pre class="r"><code>polls_us_election_2016 %&gt;% 
  mutate(week = round_date(startdate, &quot;week&quot;)) %&gt;%
  group_by(week) %&gt;%
  summarize(margin = mean(rawpoll_clinton - rawpoll_trump)) %&gt;%
  qplot(week, margin, data = .)</code></pre>
<p><img src="datsci_06_files/figure-html/poll-margin-versus-week-1.png" width="700px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /></p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>Dates are a separate data type in <svg style="height: 1em; top:.04em; position: relative; fill: #136CB9;" viewBox="0 0 581 512"><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"/></svg>. The <strong>tidyverse</strong> includes functionality for dealing with dates through the <strong>lubridate</strong> package.</p></li>
<li><p>Extract the year, month and day from a date object with the <code>year()</code>, <code>month()</code> and <code>day()</code> functions.</p></li>
<li><p>Parsers convert strings into dates with the standard YYYY-MM-DD format (ISO 8601 format). Use the parser with the name corresponding to the string format of year, month and day (<code>ymd()</code>, <code>ydm()</code>, <code>myd()</code>, <code>mdy()</code>, <code>dmy()</code>, <code>dym()</code>).</p></li>
<li><p>Get the current time with the <code>Sys.time()</code> function. Use the <code>now()</code> function instead to specify a time zone.</p></li>
<li><p>You can extract values from time objects with the <code>hour()</code>, <code>minute()</code> and <code>second()</code> functions.</p></li>
<li><p>Parsers convert strings into times (for example, <code>hms()</code>). Parsers can also create combined date-time objects (for example, <code>mdy_hms()</code>).</p></li>
</ul>
</div>
</div>
<div id="section-text-mining" class="section level3">
<h3>Text Mining</h3>
<div class="infobox">
<p><strong>Textbook link</strong> This page corresponds to the <a href="https://rafalab.github.io/dsbook/text-mining.html">textbook section - Chapter 26 Text mining</a></p>
</div>
<p>With the exception of labels used to represent categorical data, we have focused on numerical data. But in many applications, data starts as text. Well-known examples are spam filtering, cyber-crime prevention, counter-terrorism and sentiment analysis. In all these cases, the raw data is composed of free form text. Our task is to extract insights from these data. In this section, we learn how to generate useful numerical summaries from text data to which we can apply some of the powerful data visualization and analysis techniques we have learned.</p>
</div>
<div id="section-case-study-trump-tweets" class="section level3">
<h3>Case study: Trump tweets</h3>
<p>During the 2016 US presidential election, then candidate Donald J. Trump used his twitter account as a way to communicate with potential voters. On August 6, 2016, <a href="https://twitter.com/tvaziri/status/762005541388378112/photo/1">Todd Vaziri tweeted</a> about Trump that “Every non-hyperbolic tweet is from iPhone (his staff). Every hyperbolic tweet is from Android (from him).” Data scientist <a href="http://varianceexplained.org/r/trump-tweets/">David Robinson conducted an analysis</a> to determine if data supported this assertion. Here, we go through David’s analysis to learn some of the basics of text mining. To learn more about text mining in R, we recommend the <a href="https://www.tidytextmining.com/">Text Mining with R book</a> by Julia Silge and David Robinson.</p>
<p>We will use the following libraries:</p>
<pre class="r"><code>library(tidyverse)
library(lubridate)
library(scales)</code></pre>
<p>In general, we can extract data directly from Twitter using the <strong>rtweet</strong> package. However, in this case, a group has already compiled data for us and made it available at <a href="http://www.trumptwitterarchive.com">http://www.trumptwitterarchive.com</a>. We can get the data from their JSON API using a script like this:</p>
<pre class="r"><code>url &lt;- &#39;http://www.trumptwitterarchive.com/data/realdonaldtrump/%s.json&#39;
trump_tweets &lt;- map(2009:2017, ~sprintf(url, .x)) %&gt;%
  map_df(jsonlite::fromJSON, simplifyDataFrame = TRUE) %&gt;%
  filter(!is_retweet &amp; !str_detect(text, &#39;^&quot;&#39;)) %&gt;%
  mutate(created_at = parse_date_time(created_at, 
                                      orders = &quot;a b! d! H!:M!:S! z!* Y!&quot;,
                                      tz=&quot;EST&quot;)) </code></pre>
<p>For convenience, we include the result of the code above in the <strong>dslabs</strong> package:</p>
<pre class="r"><code>library(dslabs)
data(&quot;trump_tweets&quot;)</code></pre>
<p>You can see the data frame with information about the tweets by typing</p>
<pre class="r"><code>head(trump_tweets)</code></pre>
<p>with the following variables included:</p>
<pre class="r"><code>names(trump_tweets)</code></pre>
<pre><code>## [1] &quot;source&quot;                  &quot;id_str&quot;                 
## [3] &quot;text&quot;                    &quot;created_at&quot;             
## [5] &quot;retweet_count&quot;           &quot;in_reply_to_user_id_str&quot;
## [7] &quot;favorite_count&quot;          &quot;is_retweet&quot;</code></pre>
<p>The help file <code>?trump_tweets</code> provides details on what each variable represents. The tweets are represented by the <code>text</code> variable:</p>
<pre class="r"><code>trump_tweets$text[16413] %&gt;% str_wrap(width = options()$width) %&gt;% cat</code></pre>
<pre><code>## Great to be back in Iowa! #TBT with @JerryJrFalwell joining me in Davenport-
## this past winter. #MAGA https://t.co/A5IF0QHnic</code></pre>
<p>and the source variable tells us which device was used to compose and upload each tweet:</p>
<pre class="r"><code>trump_tweets %&gt;% count(source) %&gt;% arrange(desc(n)) %&gt;% head(5)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["source"],"name":[1],"type":["chr"],"align":["left"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"Twitter Web Client","2":"10718","_rn_":"1"},{"1":"Twitter for Android","2":"4652","_rn_":"2"},{"1":"Twitter for iPhone","2":"3962","_rn_":"3"},{"1":"TweetDeck","2":"468","_rn_":"4"},{"1":"TwitLonger Beta","2":"288","_rn_":"5"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>We are interested in what happened during the campaign, so for this analysis we will focus on what was tweeted between the day Trump announced his campaign and election day. We define the following table containing just the tweets from that time period. Note that we use <code>extract</code> to remove the <code>Twitter for</code> part of the source and filter out retweets.</p>
<pre class="r"><code>campaign_tweets &lt;- trump_tweets %&gt;% 
  extract(source, &quot;source&quot;, &quot;Twitter for (.*)&quot;) %&gt;%
  filter(source %in% c(&quot;Android&quot;, &quot;iPhone&quot;) &amp;
           created_at &gt;= ymd(&quot;2015-06-17&quot;) &amp; 
           created_at &lt; ymd(&quot;2016-11-08&quot;)) %&gt;%
  filter(!is_retweet) %&gt;%
  arrange(created_at)</code></pre>
<p>We can now use data visualization to explore the possibility that two different groups were tweeting from these devices. For each tweet, we will extract the hour, East Coast time (EST), it was tweeted and then compute the proportion of tweets tweeted at each hour for each device:</p>
<pre class="r"><code>ds_theme_set()
campaign_tweets %&gt;%
  mutate(hour = hour(with_tz(created_at, &quot;EST&quot;))) %&gt;%
  count(source, hour) %&gt;%
  group_by(source) %&gt;%
  mutate(percent = n / sum(n)) %&gt;%
  ungroup %&gt;%
  ggplot(aes(hour, percent, color = source)) +
  geom_line() +
  geom_point() +
  scale_y_continuous(labels = percent_format()) +
  labs(x = &quot;Hour of day (EST)&quot;, y = &quot;% of tweets&quot;, color = &quot;&quot;)</code></pre>
<p><img src="datsci_06_files/figure-html/tweets-by-time-by-device-1.png" width="700px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" /></p>
<p>We notice a big peak for the Android in the early hours of the morning, between 6 and 8 AM. There seems to be a clear difference in these patterns. We will therefore assume that two different entities are using these two devices.</p>
<p>We will now study how the tweets differ when we compare Android to iPhone. To do this, we introduce the <strong>tidytext</strong> package.</p>
</div>
<div id="section-text-as-data" class="section level3">
<h3>Text as data</h3>
<p>The <strong>tidytext</strong> package helps us convert free form text into a tidy table. Having the data in this format greatly facilitates data visualization and the use of statistical techniques.</p>
<pre class="r"><code>library(tidytext)</code></pre>
<p>The main function needed to achieve this is <code>unnest_tokens</code>. A <em>token</em> refers to a unit that we are considering to be a data point. The most common <em>token</em> will be words, but they can also be single characters, ngrams, sentences, lines, or a pattern defined by a regex. The functions will take a vector of strings and extract the tokens so that each one gets a row in the new table. Here is a simple example:</p>
<pre class="r"><code>poem &lt;- c(&quot;Roses are red,&quot;, &quot;Violets are blue,&quot;, 
          &quot;Sugar is sweet,&quot;, &quot;And so are you.&quot;)
example &lt;- tibble(line = c(1, 2, 3, 4),
                      text = poem)
example</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["line"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["text"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"Roses are red,"},{"1":"2","2":"Violets are blue,"},{"1":"3","2":"Sugar is sweet,"},{"1":"4","2":"And so are you."}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>example %&gt;% unnest_tokens(word, text)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["line"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["word"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"1","2":"roses"},{"1":"1","2":"are"},{"1":"1","2":"red"},{"1":"2","2":"violets"},{"1":"2","2":"are"},{"1":"2","2":"blue"},{"1":"3","2":"sugar"},{"1":"3","2":"is"},{"1":"3","2":"sweet"},{"1":"4","2":"and"},{"1":"4","2":"so"},{"1":"4","2":"are"},{"1":"4","2":"you"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Now let’s look at an example from the tweets. We will look at tweet number 3008 because it will later permit us to illustrate a couple of points:</p>
<pre class="r"><code>i &lt;- 3008
campaign_tweets$text[i] %&gt;% str_wrap(width = 65) %&gt;% cat()</code></pre>
<pre><code>## Great to be back in Iowa! #TBT with @JerryJrFalwell joining me in
## Davenport- this past winter. #MAGA https://t.co/A5IF0QHnic</code></pre>
<pre class="r"><code>campaign_tweets[i,] %&gt;% 
  unnest_tokens(word, text) %&gt;%
  pull(word) </code></pre>
<pre><code>##  [1] &quot;great&quot;          &quot;to&quot;             &quot;be&quot;             &quot;back&quot;          
##  [5] &quot;in&quot;             &quot;iowa&quot;           &quot;tbt&quot;            &quot;with&quot;          
##  [9] &quot;jerryjrfalwell&quot; &quot;joining&quot;        &quot;me&quot;             &quot;in&quot;            
## [13] &quot;davenport&quot;      &quot;this&quot;           &quot;past&quot;           &quot;winter&quot;        
## [17] &quot;maga&quot;           &quot;https&quot;          &quot;t.co&quot;           &quot;a5if0qhnic&quot;</code></pre>
<p>Note that the function tries to convert tokens into words. To do this, however, it strips characters that are important in the context of twitter. Namely, the function removes all the <code>#</code> and <code>@</code>. A <em>token</em> in the context of Twitter is not the same as in the context of spoken or written English. For this reason, instead of using the default, words, we use the <code>tweets</code> token includes patterns that start with @ and #:</p>
<pre class="r"><code>campaign_tweets[i,] %&gt;% 
  unnest_tokens(word, text, token = &quot;tweets&quot;) %&gt;%
  pull(word)</code></pre>
<pre><code>##  [1] &quot;great&quot;                   &quot;to&quot;                     
##  [3] &quot;be&quot;                      &quot;back&quot;                   
##  [5] &quot;in&quot;                      &quot;iowa&quot;                   
##  [7] &quot;#tbt&quot;                    &quot;with&quot;                   
##  [9] &quot;@jerryjrfalwell&quot;         &quot;joining&quot;                
## [11] &quot;me&quot;                      &quot;in&quot;                     
## [13] &quot;davenport&quot;               &quot;this&quot;                   
## [15] &quot;past&quot;                    &quot;winter&quot;                 
## [17] &quot;#maga&quot;                   &quot;https://t.co/a5if0qhnic&quot;</code></pre>
<p>Another minor adjustment we want to make is to remove the links to pictures:</p>
<pre class="r"><code>links &lt;- &quot;https://t.co/[A-Za-z\\d]+|&amp;amp;&quot;
campaign_tweets[i,] %&gt;% 
  mutate(text = str_replace_all(text, links, &quot;&quot;))  %&gt;%
  unnest_tokens(word, text, token = &quot;tweets&quot;) %&gt;%
  pull(word)</code></pre>
<pre><code>##  [1] &quot;great&quot;           &quot;to&quot;              &quot;be&quot;              &quot;back&quot;           
##  [5] &quot;in&quot;              &quot;iowa&quot;            &quot;#tbt&quot;            &quot;with&quot;           
##  [9] &quot;@jerryjrfalwell&quot; &quot;joining&quot;         &quot;me&quot;              &quot;in&quot;             
## [13] &quot;davenport&quot;       &quot;this&quot;            &quot;past&quot;            &quot;winter&quot;         
## [17] &quot;#maga&quot;</code></pre>
<p>Now we are now ready to extract the words for all our tweets.</p>
<pre class="r"><code>tweet_words &lt;- campaign_tweets %&gt;% 
  mutate(text = str_replace_all(text, links, &quot;&quot;))  %&gt;%
  unnest_tokens(word, text, token = &quot;tweets&quot;) </code></pre>
<p>And we can now answer questions such as “what are the most commonly used words?”:</p>
<pre class="r"><code>tweet_words %&gt;% 
  count(word) %&gt;%
  arrange(desc(n))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["word"],"name":[1],"type":["chr"],"align":["left"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"the","2":"2329"},{"1":"to","2":"1410"},{"1":"and","2":"1239"},{"1":"in","2":"1185"},{"1":"i","2":"1143"},{"1":"a","2":"1112"},{"1":"you","2":"999"},{"1":"of","2":"982"},{"1":"is","2":"942"},{"1":"on","2":"874"},{"1":"will","2":"843"},{"1":"for","2":"736"},{"1":"thank","2":"712"},{"1":"be","2":"670"},{"1":"great","2":"641"},{"1":"at","2":"507"},{"1":"that","2":"484"},{"1":"me","2":"452"},{"1":"#trump2016","2":"414"},{"1":"hillary","2":"405"},{"1":"with","2":"385"},{"1":"it","2":"367"},{"1":"we","2":"359"},{"1":"are","2":"353"},{"1":"just","2":"349"},{"1":"have","2":"348"},{"1":"my","2":"336"},{"1":"so","2":"311"},{"1":"was","2":"311"},{"1":"he","2":"307"},{"1":"not","2":"305"},{"1":"people","2":"303"},{"1":"all","2":"295"},{"1":"#makeamericagreatagain","2":"294"},{"1":"by","2":"288"},{"1":"new","2":"285"},{"1":"am","2":"263"},{"1":"has","2":"255"},{"1":"america","2":"254"},{"1":"out","2":"246"},{"1":"very","2":"238"},{"1":"clinton","2":"237"},{"1":"our","2":"231"},{"1":"this","2":"228"},{"1":"make","2":"218"},{"1":"poll","2":"217"},{"1":"from","2":"216"},{"1":"again","2":"213"},{"1":"now","2":"206"},{"1":"crooked","2":"205"},{"1":"they","2":"203"},{"1":"big","2":"200"},{"1":"get","2":"197"},{"1":"trump","2":"195"},{"1":"who","2":"188"},{"1":"his","2":"179"},{"1":"she","2":"177"},{"1":"no","2":"176"},{"1":"about","2":"173"},{"1":"as","2":"167"},{"1":"her","2":"163"},{"1":"your","2":"162"},{"1":"but","2":"160"},{"1":"cruz","2":"159"},{"1":"join","2":"158"},{"1":"tonight","2":"154"},{"1":"us","2":"154"},{"1":"many","2":"143"},{"1":"do","2":"140"},{"1":"going","2":"137"},{"1":"said","2":"136"},{"1":"more","2":"135"},{"1":"time","2":"132"},{"1":"bad","2":"130"},{"1":"would","2":"130"},{"1":"iowa","2":"126"},{"1":"last","2":"126"},{"1":"today","2":"125"},{"1":"tomorrow","2":"123"},{"1":"like","2":"121"},{"1":"when","2":"120"},{"1":"enjoy","2":"119"},{"1":"president","2":"117"},{"1":"much","2":"116"},{"1":"one","2":"116"},{"1":"what","2":"115"},{"1":"back","2":"114"},{"1":"should","2":"114"},{"1":"vote","2":"113"},{"1":"if","2":"112"},{"1":"ted","2":"112"},{"1":"debate","2":"111"},{"1":"an","2":"109"},{"1":"amazing","2":"108"},{"1":"can","2":"108"},{"1":"never","2":"108"},{"1":"night","2":"108"},{"1":"@cnn","2":"107"},{"1":"@foxnews","2":"106"},{"1":"been","2":"106"},{"1":"up","2":"106"},{"1":"country","2":"104"},{"1":"crowd","2":"103"},{"1":"or","2":"102"},{"1":"win","2":"102"},{"1":"interviewed","2":"101"},{"1":"media","2":"101"},{"1":"had","2":"100"},{"1":"why","2":"99"},{"1":"watch","2":"98"},{"1":"carolina","2":"97"},{"1":"wow","2":"97"},{"1":"campaign","2":"95"},{"1":"their","2":"95"},{"1":"dont","2":"93"},{"1":"support","2":"92"},{"1":"how","2":"91"},{"1":"only","2":"91"},{"1":"really","2":"91"},{"1":"than","2":"91"},{"1":"see","2":"90"},{"1":"good","2":"86"},{"1":"them","2":"86"},{"1":"want","2":"85"},{"1":"hampshire","2":"84"},{"1":"ohio","2":"84"},{"1":"polls","2":"84"},{"1":"job","2":"83"},{"1":"totally","2":"83"},{"1":"morning","2":"82"},{"1":"soon","2":"82"},{"1":"him","2":"81"},{"1":"nice","2":"81"},{"1":"florida","2":"80"},{"1":"obama","2":"80"},{"1":"over","2":"79"},{"1":"rubio","2":"79"},{"1":"against","2":"78"},{"1":"jobs","2":"77"},{"1":"speech","2":"77"},{"1":"#maga","2":"76"},{"1":"did","2":"76"},{"1":"there","2":"76"},{"1":"way","2":"76"},{"1":"day","2":"75"},{"1":"even","2":"75"},{"1":"republican","2":"75"},{"1":"were","2":"74"},{"1":"show","2":"73"},{"1":"bernie","2":"72"},{"1":"#americafirst","2":"71"},{"1":"got","2":"71"},{"1":"go","2":"69"},{"1":"dishonest","2":"68"},{"1":"total","2":"68"},{"1":"money","2":"67"},{"1":"love","2":"66"},{"1":"rally","2":"66"},{"1":"jeb","2":"65"},{"1":"must","2":"65"},{"1":"because","2":"64"},{"1":"made","2":"64"},{"1":"south","2":"64"},{"1":"#draintheswamp","2":"63"},{"1":"down","2":"63"},{"1":"failing","2":"63"},{"1":"won","2":"63"},{"1":"doing","2":"60"},{"1":"years","2":"60"},{"1":"being","2":"59"},{"1":"cant","2":"59"},{"1":"state","2":"59"},{"1":"better","2":"58"},{"1":"isis","2":"58"},{"1":"marco","2":"58"},{"1":"look","2":"57"},{"1":"#votetrump","2":"56"},{"1":"after","2":"56"},{"1":"bush","2":"56"},{"1":"wonderful","2":"56"},{"1":"american","2":"55"},{"1":"numbers","2":"55"},{"1":"sad","2":"55"},{"1":"lost","2":"54"},{"1":"news","2":"54"},{"1":"together","2":"54"},{"1":"everyone","2":"53"},{"1":"national","2":"53"},{"1":"other","2":"53"},{"1":"run","2":"52"},{"1":"#imwithyou","2":"51"},{"1":"doesnt","2":"51"},{"1":"its","2":"51"},{"1":"say","2":"51"},{"1":"tickets","2":"51"},{"1":"beat","2":"50"},{"1":"first","2":"50"},{"1":"two","2":"50"},{"1":"video","2":"50"},{"1":"failed","2":"49"},{"1":"record","2":"49"},{"1":"another","2":"48"},{"1":"believe","2":"48"},{"1":"done","2":"48"},{"1":"immigration","2":"48"},{"1":"movement","2":"48"},{"1":"pennsylvania","2":"48"},{"1":"ratings","2":"48"},{"1":"wants","2":"48"},{"1":"words","2":"48"},{"1":"@nytimes","2":"47"},{"1":"saying","2":"47"},{"1":"special","2":"47"},{"1":"supporters","2":"47"},{"1":"take","2":"47"},{"1":"which","2":"47"},{"1":"illegal","2":"46"},{"1":"kasich","2":"46"},{"1":"know","2":"46"},{"1":"live","2":"46"},{"1":"off","2":"46"},{"1":"presidential","2":"46"},{"1":"remember","2":"46"},{"1":"well","2":"46"},{"1":"does","2":"45"},{"1":"into","2":"45"},{"1":"john","2":"45"},{"1":"sanders","2":"45"},{"1":"senator","2":"45"},{"1":"virginia","2":"45"},{"1":"ads","2":"44"},{"1":"cnn","2":"44"},{"1":"ever","2":"44"},{"1":"looking","2":"44"},{"1":"weak","2":"44"},{"1":"didnt","2":"43"},{"1":"getting","2":"43"},{"1":"honor","2":"43"},{"1":"nothing","2":"43"},{"1":"wall","2":"43"},{"1":"@foxandfriends","2":"42"},{"1":"fantastic","2":"42"},{"1":"massive","2":"42"},{"1":"where","2":"42"},{"1":"york","2":"42"},{"1":"guy","2":"41"},{"1":"north","2":"41"},{"1":"story","2":"41"},{"1":"think","2":"41"},{"1":"hard","2":"40"},{"1":"million","2":"40"},{"1":"nevada","2":"40"},{"1":"pm","2":"40"},{"1":"smart","2":"40"},{"1":"deal","2":"39"},{"1":"donald","2":"39"},{"1":"evening","2":"39"},{"1":"stop","2":"39"},{"1":"terrible","2":"39"},{"1":"candidate","2":"38"},{"1":"endorsement","2":"38"},{"1":"far","2":"38"},{"1":"making","2":"38"},{"1":"most","2":"38"},{"1":"need","2":"38"},{"1":"party","2":"38"},{"1":"safe","2":"38"},{"1":"talk","2":"38"},{"1":"too","2":"38"},{"1":"badly","2":"37"},{"1":"bill","2":"37"},{"1":"let","2":"37"},{"1":"little","2":"37"},{"1":"right","2":"37"},{"1":"watching","2":"37"},{"1":"@seanhannity","2":"36"},{"1":"arizona","2":"36"},{"1":"colorado","2":"36"},{"1":"election","2":"36"},{"1":"lightweight","2":"36"},{"1":"place","2":"36"},{"1":"such","2":"36"},{"1":"tough","2":"36"},{"1":"women","2":"36"},{"1":"world","2":"36"},{"1":"@oreillyfactor","2":"35"},{"1":"could","2":"35"},{"1":"fox","2":"35"},{"1":"strong","2":"35"},{"1":"then","2":"35"},{"1":"w","2":"35"},{"1":"while","2":"35"},{"1":"change","2":"34"},{"1":"forward","2":"34"},{"1":"governor","2":"34"},{"1":"law","2":"34"},{"1":"mexico","2":"34"},{"1":"millions","2":"34"},{"1":"voters","2":"34"},{"1":"work","2":"34"},{"1":"yesterday","2":"34"},{"1":"also","2":"33"},{"1":"carson","2":"33"},{"1":"emails","2":"33"},{"1":"every","2":"33"},{"1":"indiana","2":"33"},{"1":"lead","2":"33"},{"1":"leaving","2":"33"},{"1":"says","2":"33"},{"1":"talking","2":"33"},{"1":"things","2":"33"},{"1":"use","2":"33"},{"1":"700","2":"32"},{"1":"border","2":"32"},{"1":"disaster","2":"32"},{"1":"false","2":"32"},{"1":"heading","2":"32"},{"1":"interview","2":"32"},{"1":"keep","2":"32"},{"1":"negative","2":"32"},{"1":"next","2":"32"},{"1":"person","2":"32"},{"1":"put","2":"32"},{"1":"states","2":"32"},{"1":"wisconsin","2":"32"},{"1":"ad","2":"31"},{"1":"best","2":"31"},{"1":"happy","2":"31"},{"1":"here","2":"31"},{"1":"im","2":"31"},{"1":"lets","2":"31"},{"1":"lyin","2":"31"},{"1":"major","2":"31"},{"1":"rigged","2":"31"},{"1":"some","2":"31"},{"1":"spent","2":"31"},{"1":"#crookedhillary","2":"30"},{"1":"#fitn","2":"30"},{"1":"#gopdebate","2":"30"},{"1":"biased","2":"30"},{"1":"family","2":"30"},{"1":"proud","2":"30"},{"1":"romney","2":"30"},{"1":"trade","2":"30"},{"1":"worst","2":"30"},{"1":"before","2":"29"},{"1":"bring","2":"29"},{"1":"came","2":"29"},{"1":"clintons","2":"29"},{"1":"come","2":"29"},{"1":"hope","2":"29"},{"1":"michigan","2":"29"},{"1":"others","2":"29"},{"1":"phony","2":"29"},{"1":"radical","2":"29"},{"1":"thanks","2":"29"},{"1":"wont","2":"29"},{"1":"wrong","2":"29"},{"1":"zero","2":"29"},{"1":"@morningjoe","2":"28"},{"1":"#trumppence16","2":"28"},{"1":"crowds","2":"28"},{"1":"dc","2":"28"},{"1":"event","2":"28"},{"1":"lies","2":"28"},{"1":"long","2":"28"},{"1":"same","2":"28"},{"1":"texas","2":"28"},{"1":"told","2":"28"},{"1":"washington","2":"28"},{"1":"@megynkelly","2":"27"},{"1":"both","2":"27"},{"1":"convention","2":"27"},{"1":"dumb","2":"27"},{"1":"highly","2":"27"},{"1":"hit","2":"27"},{"1":"low","2":"27"},{"1":"meeting","2":"27"},{"1":"obamacare","2":"27"},{"1":"political","2":"27"},{"1":"press","2":"27"},{"1":"statement","2":"27"},{"1":"truly","2":"27"},{"1":"year","2":"27"},{"1":"fight","2":"26"},{"1":"post","2":"26"},{"1":"yet","2":"26"},{"1":"1","2":"25"},{"1":"almost","2":"25"},{"1":"california","2":"25"},{"1":"call","2":"25"},{"1":"center","2":"25"},{"1":"fix","2":"25"},{"1":"gave","2":"25"},{"1":"judgement","2":"25"},{"1":"order","2":"25"},{"1":"report","2":"25"},{"1":"reporting","2":"25"},{"1":"shows","2":"25"},{"1":"system","2":"25"},{"1":"times","2":"25"},{"1":"tv","2":"25"},{"1":"chris","2":"24"},{"1":"iran","2":"24"},{"1":"mitt","2":"24"},{"1":"police","2":"24"},{"1":"race","2":"24"},{"1":"released","2":"24"},{"1":"spending","2":"24"},{"1":"television","2":"24"},{"1":"true","2":"24"},{"1":"unbelievable","2":"24"},{"1":"under","2":"24"},{"1":"united","2":"24"},{"1":"7pm","2":"23"},{"1":"allowed","2":"23"},{"1":"always","2":"23"},{"1":"away","2":"23"},{"1":"crazy","2":"23"},{"1":"email","2":"23"},{"1":"incredible","2":"23"},{"1":"interest","2":"23"},{"1":"leadership","2":"23"},{"1":"nation","2":"23"},{"1":"politics","2":"23"},{"1":"these","2":"23"},{"1":"veterans","2":"23"},{"1":"via","2":"23"},{"1":"watched","2":"23"},{"1":"winning","2":"23"},{"1":"@abc","2":"22"},{"1":"#bigleaguetruth","2":"22"},{"1":"attack","2":"22"},{"1":"candidates","2":"22"},{"1":"coming","2":"22"},{"1":"enforcement","2":"22"},{"1":"history","2":"22"},{"1":"nobody","2":"22"},{"1":"old","2":"22"},{"1":"real","2":"22"},{"1":"running","2":"22"},{"1":"saturday","2":"22"},{"1":"thing","2":"22"},{"1":"those","2":"22"},{"1":"tremendous","2":"22"},{"1":"trying","2":"22"},{"1":"used","2":"22"},{"1":"week","2":"22"},{"1":"working","2":"22"},{"1":"worse","2":"22"},{"1":"#iacaucus","2":"21"},{"1":"12","2":"21"},{"1":"ago","2":"21"},{"1":"announced","2":"21"},{"1":"borders","2":"21"},{"1":"called","2":"21"},{"1":"end","2":"21"},{"1":"fact","2":"21"},{"1":"fast","2":"21"},{"1":"fun","2":"21"},{"1":"hillarys","2":"21"},{"1":"horrible","2":"21"},{"1":"interesting","2":"21"},{"1":"islamic","2":"21"},{"1":"left","2":"21"},{"1":"lot","2":"21"},{"1":"man","2":"21"},{"1":"officers","2":"21"},{"1":"thousands","2":"21"},{"1":"votes","2":"21"},{"1":"word","2":"21"},{"1":"#icymi","2":"20"},{"1":"1000","2":"20"},{"1":"book","2":"20"},{"1":"crime","2":"20"},{"1":"face","2":"20"},{"1":"killed","2":"20"},{"1":"knows","2":"20"},{"1":"leaders","2":"20"},{"1":"leading","2":"20"},{"1":"melania","2":"20"},{"1":"office","2":"20"},{"1":"pay","2":"20"},{"1":"politicians","2":"20"},{"1":"read","2":"20"},{"1":"top","2":"20"},{"1":"tuesday","2":"20"},{"1":"without","2":"20"},{"1":"3pm","2":"19"},{"1":"afternoon","2":"19"},{"1":"asked","2":"19"},{"1":"boring","2":"19"},{"1":"dems","2":"19"},{"1":"elizabeth","2":"19"},{"1":"energy","2":"19"},{"1":"fair","2":"19"},{"1":"hear","2":"19"},{"1":"looks","2":"19"},{"1":"nasty","2":"19"},{"1":"paul","2":"19"},{"1":"questions","2":"19"},{"1":"ready","2":"19"},{"1":"results","2":"19"},{"1":"street","2":"19"},{"1":"wallace","2":"19"},{"1":"wife","2":"19"},{"1":"#trumptrain","2":"18"},{"1":"close","2":"18"},{"1":"democrats","2":"18"},{"1":"during","2":"18"},{"1":"exciting","2":"18"},{"1":"forget","2":"18"},{"1":"fraud","2":"18"},{"1":"georgia","2":"18"},{"1":"happened","2":"18"},{"1":"having","2":"18"},{"1":"isnt","2":"18"},{"1":"november","2":"18"},{"1":"paid","2":"18"},{"1":"problem","2":"18"},{"1":"repeal","2":"18"},{"1":"tax","2":"18"},{"1":"taxes","2":"18"},{"1":"terrorism","2":"18"},{"1":"voting","2":"18"},{"1":"warren","2":"18"},{"1":"went","2":"18"},{"1":"@jebbush","2":"17"},{"1":"@mikepence","2":"17"},{"1":"any","2":"17"},{"1":"case","2":"17"},{"1":"cleveland","2":"17"},{"1":"club","2":"17"},{"1":"congratulations","2":"17"},{"1":"days","2":"17"},{"1":"delegates","2":"17"},{"1":"despite","2":"17"},{"1":"dopey","2":"17"},{"1":"else","2":"17"},{"1":"etc","2":"17"},{"1":"four","2":"17"},{"1":"given","2":"17"},{"1":"head","2":"17"},{"1":"help","2":"17"},{"1":"mike","2":"17"},{"1":"phoenix","2":"17"},{"1":"replace","2":"17"},{"1":"reporter","2":"17"},{"1":"respected","2":"17"},{"1":"still","2":"17"},{"1":"until","2":"17"},{"1":"usa","2":"17"},{"1":"voter","2":"17"},{"1":"vp","2":"17"},{"1":"waste","2":"17"},{"1":"#supertuesday","2":"16"},{"1":"agree","2":"16"},{"1":"air","2":"16"},{"1":"chance","2":"16"},{"1":"china","2":"16"},{"1":"conference","2":"16"},{"1":"dollars","2":"16"},{"1":"give","2":"16"},{"1":"goofy","2":"16"},{"1":"gop","2":"16"},{"1":"graham","2":"16"},{"1":"important","2":"16"},{"1":"joke","2":"16"},{"1":"loved","2":"16"},{"1":"miss","2":"16"},{"1":"pathetic","2":"16"},{"1":"please","2":"16"},{"1":"respect","2":"16"},{"1":"speak","2":"16"},{"1":"tune","2":"16"},{"1":"vegas","2":"16"},{"1":"victory","2":"16"},{"1":"@greta","2":"15"},{"1":"@karlrove","2":"15"},{"1":"@wsj","2":"15"},{"1":"2nd","2":"15"},{"1":"americans","2":"15"},{"1":"anything","2":"15"},{"1":"ben","2":"15"},{"1":"cannot","2":"15"},{"1":"clue","2":"15"},{"1":"correct","2":"15"},{"1":"endorsed","2":"15"},{"1":"expected","2":"15"},{"1":"friend","2":"15"},{"1":"gone","2":"15"},{"1":"growth","2":"15"},{"1":"hall","2":"15"},{"1":"high","2":"15"},{"1":"including","2":"15"},{"1":"incompetent","2":"15"},{"1":"instead","2":"15"},{"1":"killing","2":"15"},{"1":"las","2":"15"},{"1":"lie","2":"15"},{"1":"losing","2":"15"},{"1":"may","2":"15"},{"1":"mess","2":"15"},{"1":"nh","2":"15"},{"1":"packed","2":"15"},{"1":"prayers","2":"15"},{"1":"small","2":"15"},{"1":"strength","2":"15"},{"1":"taking","2":"15"},{"1":"tampa","2":"15"},{"1":"twitter","2":"15"},{"1":"wanted","2":"15"},{"1":"wednesday","2":"15"},{"1":"800","2":"14"},{"1":"able","2":"14"},{"1":"apologize","2":"14"},{"1":"beautiful","2":"14"},{"1":"behind","2":"14"},{"1":"biggest","2":"14"},{"1":"check","2":"14"},{"1":"dead","2":"14"},{"1":"easily","2":"14"},{"1":"easy","2":"14"},{"1":"everybody","2":"14"},{"1":"families","2":"14"},{"1":"fbi","2":"14"},{"1":"finally","2":"14"},{"1":"focus","2":"14"},{"1":"greatly","2":"14"},{"1":"group","2":"14"},{"1":"happen","2":"14"},{"1":"happening","2":"14"},{"1":"increase","2":"14"},{"1":"interests","2":"14"},{"1":"joe","2":"14"},{"1":"kind","2":"14"},{"1":"knew","2":"14"},{"1":"leader","2":"14"},{"1":"obamas","2":"14"},{"1":"open","2":"14"},{"1":"past","2":"14"},{"1":"primary","2":"14"},{"1":"pushing","2":"14"},{"1":"russia","2":"14"},{"1":"seen","2":"14"},{"1":"senate","2":"14"},{"1":"something","2":"14"},{"1":"team","2":"14"},{"1":"unfair","2":"14"},{"1":"using","2":"14"},{"1":"@chucktodd","2":"13"},{"1":"@meetthepress","2":"13"},{"1":"100","2":"13"},{"1":"3","2":"13"},{"1":"900","2":"13"},{"1":"allow","2":"13"},{"1":"anyone","2":"13"},{"1":"arrived","2":"13"},{"1":"business","2":"13"},{"1":"careful","2":"13"},{"1":"city","2":"13"},{"1":"corrupt","2":"13"},{"1":"county","2":"13"},{"1":"credit","2":"13"},{"1":"dallas","2":"13"},{"1":"debates","2":"13"},{"1":"economy","2":"13"},{"1":"editorial","2":"13"},{"1":"foreign","2":"13"},{"1":"friends","2":"13"},{"1":"front","2":"13"},{"1":"future","2":"13"},{"1":"home","2":"13"},{"1":"honored","2":"13"},{"1":"magazine","2":"13"},{"1":"nbc","2":"13"},{"1":"noon","2":"13"},{"1":"ny","2":"13"},{"1":"once","2":"13"},{"1":"points","2":"13"},{"1":"policy","2":"13"},{"1":"poor","2":"13"},{"1":"rather","2":"13"},{"1":"speaking","2":"13"},{"1":"spirit","2":"13"},{"1":"stage","2":"13"},{"1":"sunday","2":"13"},{"1":"taken","2":"13"},{"1":"truth","2":"13"},{"1":"university","2":"13"},{"1":"vets","2":"13"},{"1":"wonder","2":"13"},{"1":"@gstephanopoulos","2":"12"},{"1":"@politico","2":"12"},{"1":"@washingtonpost","2":"12"},{"1":"#vpdebate","2":"12"},{"1":"#wiprimary","2":"12"},{"1":"2","2":"12"},{"1":"action","2":"12"},{"1":"alabama","2":"12"},{"1":"amnesty","2":"12"},{"1":"appreciate","2":"12"},{"1":"become","2":"12"},{"1":"beginning","2":"12"},{"1":"born","2":"12"},{"1":"build","2":"12"},{"1":"canada","2":"12"},{"1":"caught","2":"12"},{"1":"choice","2":"12"},{"1":"credibility","2":"12"},{"1":"deals","2":"12"},{"1":"defeat","2":"12"},{"1":"drudge","2":"12"},{"1":"dying","2":"12"},{"1":"final","2":"12"},{"1":"fortune","2":"12"},{"1":"free","2":"12"},{"1":"friday","2":"12"},{"1":"full","2":"12"},{"1":"house","2":"12"},{"1":"husband","2":"12"},{"1":"iraq","2":"12"},{"1":"kaine","2":"12"},{"1":"least","2":"12"},{"1":"life","2":"12"},{"1":"lobbyists","2":"12"},{"1":"loser","2":"12"},{"1":"louisiana","2":"12"},{"1":"lying","2":"12"},{"1":"maine","2":"12"},{"1":"meet","2":"12"},{"1":"oil","2":"12"},{"1":"own","2":"12"},{"1":"pence","2":"12"},{"1":"pick","2":"12"},{"1":"poorly","2":"12"},{"1":"problems","2":"12"},{"1":"ran","2":"12"},{"1":"rapids","2":"12"},{"1":"release","2":"12"},{"1":"reported","2":"12"},{"1":"reuters","2":"12"},{"1":"review","2":"12"},{"1":"ryan","2":"12"},{"1":"san","2":"12"},{"1":"selffunding","2":"12"},{"1":"since","2":"12"},{"1":"son","2":"12"},{"1":"stamina","2":"12"},{"1":"started","2":"12"},{"1":"stories","2":"12"},{"1":"terror","2":"12"},{"1":"thoughts","2":"12"},{"1":"town","2":"12"},{"1":"tpp","2":"12"},{"1":"treated","2":"12"},{"1":"union","2":"12"},{"1":"victims","2":"12"},{"1":"west","2":"12"},{"1":"winner","2":"12"},{"1":"10pme","2":"11"},{"1":"13","2":"11"},{"1":"20","2":"11"},{"1":"2016","2":"11"},{"1":"6pm","2":"11"},{"1":"ahead","2":"11"},{"1":"already","2":"11"},{"1":"anymore","2":"11"},{"1":"arena","2":"11"},{"1":"around","2":"11"},{"1":"attacks","2":"11"},{"1":"beach","2":"11"},{"1":"between","2":"11"},{"1":"brought","2":"11"},{"1":"calls","2":"11"},{"1":"common","2":"11"},{"1":"discuss","2":"11"},{"1":"dope","2":"11"},{"1":"drug","2":"11"},{"1":"elected","2":"11"},{"1":"government","2":"11"},{"1":"h","2":"11"},{"1":"highest","2":"11"},{"1":"himself","2":"11"},{"1":"hours","2":"11"},{"1":"israel","2":"11"},{"1":"liar","2":"11"},{"1":"lindsey","2":"11"},{"1":"members","2":"11"},{"1":"mention","2":"11"},{"1":"message","2":"11"},{"1":"mexican","2":"11"},{"1":"monday","2":"11"},{"1":"months","2":"11"},{"1":"nafta","2":"11"},{"1":"name","2":"11"},{"1":"needs","2":"11"},{"1":"outside","2":"11"},{"1":"overrated","2":"11"},{"1":"perhaps","2":"11"},{"1":"plan","2":"11"},{"1":"protect","2":"11"},{"1":"pundits","2":"11"},{"1":"received","2":"11"},{"1":"republicans","2":"11"},{"1":"rnc","2":"11"},{"1":"s","2":"11"},{"1":"save","2":"11"},{"1":"sc","2":"11"},{"1":"secret","2":"11"},{"1":"security","2":"11"},{"1":"sent","2":"11"},{"1":"shot","2":"11"},{"1":"stated","2":"11"},{"1":"statements","2":"11"},{"1":"tennessee","2":"11"},{"1":"thats","2":"11"},{"1":"though","2":"11"},{"1":"thought","2":"11"},{"1":"through","2":"11"},{"1":"tower","2":"11"},{"1":"turnberry","2":"11"},{"1":"war","2":"11"},{"1":"wikileaks","2":"11"},{"1":"wild","2":"11"},{"1":"woman","2":"11"},{"1":"wouldnt","2":"11"},{"1":"@cbsnews","2":"10"},{"1":"@ivankatrump","2":"10"},{"1":"#caucusfortrump","2":"10"},{"1":"#inprimary","2":"10"},{"1":"#obamacare","2":"10"},{"1":"#rncincle","2":"10"},{"1":"10","2":"10"},{"1":"4","2":"10"},{"1":"5","2":"10"},{"1":"8","2":"10"},{"1":"angry","2":"10"},{"1":"appreciated","2":"10"},{"1":"based","2":"10"},{"1":"beating","2":"10"},{"1":"bobby","2":"10"},{"1":"bosses","2":"10"},{"1":"bought","2":"10"},{"1":"brother","2":"10"},{"1":"care","2":"10"},{"1":"caucus","2":"10"},{"1":"comments","2":"10"},{"1":"control","2":"10"},{"1":"core","2":"10"},{"1":"corruption","2":"10"},{"1":"court","2":"10"},{"1":"david","2":"10"},{"1":"democratic","2":"10"},{"1":"drop","2":"10"},{"1":"dummy","2":"10"},{"1":"especially","2":"10"},{"1":"establishment","2":"10"},{"1":"facebook","2":"10"},{"1":"fighting","2":"10"},{"1":"find","2":"10"},{"1":"former","2":"10"},{"1":"general","2":"10"},{"1":"gets","2":"10"},{"1":"gov","2":"10"},{"1":"guns","2":"10"},{"1":"heard","2":"10"},{"1":"hopefully","2":"10"},{"1":"ill","2":"10"},{"1":"immediately","2":"10"},{"1":"jebbush","2":"10"},{"1":"justice","2":"10"},{"1":"kentucky","2":"10"},{"1":"landed","2":"10"},{"1":"late","2":"10"},{"1":"lied","2":"10"},{"1":"list","2":"10"},{"1":"longer","2":"10"},{"1":"maybe","2":"10"},{"1":"mayor","2":"10"},{"1":"miami","2":"10"},{"1":"mississippi","2":"10"},{"1":"network","2":"10"},{"1":"nights","2":"10"},{"1":"number","2":"10"},{"1":"oh","2":"10"},{"1":"online","2":"10"},{"1":"orlando","2":"10"},{"1":"pocahontas","2":"10"},{"1":"policies","2":"10"},{"1":"public","2":"10"},{"1":"putin","2":"10"},{"1":"rallies","2":"10"},{"1":"rate","2":"10"},{"1":"refuses","2":"10"},{"1":"robert","2":"10"},{"1":"rock","2":"10"},{"1":"saw","2":"10"},{"1":"speeches","2":"10"},{"1":"super","2":"10"},{"1":"sure","2":"10"},{"1":"term","2":"10"},{"1":"terrorist","2":"10"},{"1":"third","2":"10"},{"1":"took","2":"10"},{"1":"wins","2":"10"},{"1":"write","2":"10"},{"1":"@erictrump","2":"9"},{"1":"@jaketapper","2":"9"},{"1":"@melaniatrump","2":"9"},{"1":"@morningmika","2":"9"},{"1":"@todayshow","2":"9"},{"1":"#votetrumpsc","2":"9"},{"1":"=","2":"9"},{"1":"6","2":"9"},{"1":"730","2":"9"},{"1":"8pm","2":"9"},{"1":"8th","2":"9"},{"1":"across","2":"9"},{"1":"act","2":"9"},{"1":"brexit","2":"9"},{"1":"cbs","2":"9"},{"1":"citizen","2":"9"},{"1":"clown","2":"9"},{"1":"continue","2":"9"},{"1":"controlled","2":"9"},{"1":"countries","2":"9"},{"1":"cover","2":"9"},{"1":"defend","2":"9"},{"1":"departing","2":"9"},{"1":"desperate","2":"9"},{"1":"disgusting","2":"9"},{"1":"disloyal","2":"9"},{"1":"dnc","2":"9"},{"1":"don","2":"9"},{"1":"early","2":"9"},{"1":"economic","2":"9"},{"1":"evangelicals","2":"9"},{"1":"explain","2":"9"},{"1":"favor","2":"9"},{"1":"few","2":"9"},{"1":"fired","2":"9"},{"1":"fl","2":"9"},{"1":"funny","2":"9"},{"1":"gives","2":"9"},{"1":"grand","2":"9"},{"1":"groups","2":"9"},{"1":"health","2":"9"},{"1":"hes","2":"9"},{"1":"info","2":"9"},{"1":"jacksonville","2":"9"},{"1":"landing","2":"9"},{"1":"listen","2":"9"},{"1":"lives","2":"9"},{"1":"luck","2":"9"},{"1":"military","2":"9"},{"1":"missouri","2":"9"},{"1":"owned","2":"9"},{"1":"pa","2":"9"},{"1":"paper","2":"9"},{"1":"piece","2":"9"},{"1":"playing","2":"9"},{"1":"point","2":"9"},{"1":"politician","2":"9"},{"1":"pols","2":"9"},{"1":"pres","2":"9"},{"1":"probably","2":"9"},{"1":"properly","2":"9"},{"1":"question","2":"9"},{"1":"reno","2":"9"},{"1":"reviews","2":"9"},{"1":"scotland","2":"9"},{"1":"set","2":"9"},{"1":"st","2":"9"},{"1":"stand","2":"9"},{"1":"start","2":"9"},{"1":"stay","2":"9"},{"1":"stupid","2":"9"},{"1":"tell","2":"9"},{"1":"thinks","2":"9"},{"1":"thugs","2":"9"},{"1":"try","2":"9"},{"1":"unfit","2":"9"},{"1":"vigilant","2":"9"},{"1":"weeks","2":"9"},{"1":"worked","2":"9"},{"1":"@andersoncooper","2":"8"},{"1":"@donaldjtrumpjr","2":"8"},{"1":"@nbc","2":"8"},{"1":"#debatenight","2":"8"},{"1":"#debates","2":"8"},{"1":"#nyprimary","2":"8"},{"1":"#votetrumpnh","2":"8"},{"1":"3rd","2":"8"},{"1":"7","2":"8"},{"1":"amendment","2":"8"},{"1":"answer","2":"8"},{"1":"article","2":"8"},{"1":"ask","2":"8"},{"1":"broken","2":"8"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>It is not surprising that these are the top words. The top words are not informative. The <em>tidytext</em> package has a database of these commonly used words, referred to as <em>stop words</em>, in text mining:</p>
<pre class="r"><code>stop_words</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["word"],"name":[1],"type":["chr"],"align":["left"]},{"label":["lexicon"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"a","2":"SMART"},{"1":"a's","2":"SMART"},{"1":"able","2":"SMART"},{"1":"about","2":"SMART"},{"1":"above","2":"SMART"},{"1":"according","2":"SMART"},{"1":"accordingly","2":"SMART"},{"1":"across","2":"SMART"},{"1":"actually","2":"SMART"},{"1":"after","2":"SMART"},{"1":"afterwards","2":"SMART"},{"1":"again","2":"SMART"},{"1":"against","2":"SMART"},{"1":"ain't","2":"SMART"},{"1":"all","2":"SMART"},{"1":"allow","2":"SMART"},{"1":"allows","2":"SMART"},{"1":"almost","2":"SMART"},{"1":"alone","2":"SMART"},{"1":"along","2":"SMART"},{"1":"already","2":"SMART"},{"1":"also","2":"SMART"},{"1":"although","2":"SMART"},{"1":"always","2":"SMART"},{"1":"am","2":"SMART"},{"1":"among","2":"SMART"},{"1":"amongst","2":"SMART"},{"1":"an","2":"SMART"},{"1":"and","2":"SMART"},{"1":"another","2":"SMART"},{"1":"any","2":"SMART"},{"1":"anybody","2":"SMART"},{"1":"anyhow","2":"SMART"},{"1":"anyone","2":"SMART"},{"1":"anything","2":"SMART"},{"1":"anyway","2":"SMART"},{"1":"anyways","2":"SMART"},{"1":"anywhere","2":"SMART"},{"1":"apart","2":"SMART"},{"1":"appear","2":"SMART"},{"1":"appreciate","2":"SMART"},{"1":"appropriate","2":"SMART"},{"1":"are","2":"SMART"},{"1":"aren't","2":"SMART"},{"1":"around","2":"SMART"},{"1":"as","2":"SMART"},{"1":"aside","2":"SMART"},{"1":"ask","2":"SMART"},{"1":"asking","2":"SMART"},{"1":"associated","2":"SMART"},{"1":"at","2":"SMART"},{"1":"available","2":"SMART"},{"1":"away","2":"SMART"},{"1":"awfully","2":"SMART"},{"1":"b","2":"SMART"},{"1":"be","2":"SMART"},{"1":"became","2":"SMART"},{"1":"because","2":"SMART"},{"1":"become","2":"SMART"},{"1":"becomes","2":"SMART"},{"1":"becoming","2":"SMART"},{"1":"been","2":"SMART"},{"1":"before","2":"SMART"},{"1":"beforehand","2":"SMART"},{"1":"behind","2":"SMART"},{"1":"being","2":"SMART"},{"1":"believe","2":"SMART"},{"1":"below","2":"SMART"},{"1":"beside","2":"SMART"},{"1":"besides","2":"SMART"},{"1":"best","2":"SMART"},{"1":"better","2":"SMART"},{"1":"between","2":"SMART"},{"1":"beyond","2":"SMART"},{"1":"both","2":"SMART"},{"1":"brief","2":"SMART"},{"1":"but","2":"SMART"},{"1":"by","2":"SMART"},{"1":"c","2":"SMART"},{"1":"c'mon","2":"SMART"},{"1":"c's","2":"SMART"},{"1":"came","2":"SMART"},{"1":"can","2":"SMART"},{"1":"can't","2":"SMART"},{"1":"cannot","2":"SMART"},{"1":"cant","2":"SMART"},{"1":"cause","2":"SMART"},{"1":"causes","2":"SMART"},{"1":"certain","2":"SMART"},{"1":"certainly","2":"SMART"},{"1":"changes","2":"SMART"},{"1":"clearly","2":"SMART"},{"1":"co","2":"SMART"},{"1":"com","2":"SMART"},{"1":"come","2":"SMART"},{"1":"comes","2":"SMART"},{"1":"concerning","2":"SMART"},{"1":"consequently","2":"SMART"},{"1":"consider","2":"SMART"},{"1":"considering","2":"SMART"},{"1":"contain","2":"SMART"},{"1":"containing","2":"SMART"},{"1":"contains","2":"SMART"},{"1":"corresponding","2":"SMART"},{"1":"could","2":"SMART"},{"1":"couldn't","2":"SMART"},{"1":"course","2":"SMART"},{"1":"currently","2":"SMART"},{"1":"d","2":"SMART"},{"1":"definitely","2":"SMART"},{"1":"described","2":"SMART"},{"1":"despite","2":"SMART"},{"1":"did","2":"SMART"},{"1":"didn't","2":"SMART"},{"1":"different","2":"SMART"},{"1":"do","2":"SMART"},{"1":"does","2":"SMART"},{"1":"doesn't","2":"SMART"},{"1":"doing","2":"SMART"},{"1":"don't","2":"SMART"},{"1":"done","2":"SMART"},{"1":"down","2":"SMART"},{"1":"downwards","2":"SMART"},{"1":"during","2":"SMART"},{"1":"e","2":"SMART"},{"1":"each","2":"SMART"},{"1":"edu","2":"SMART"},{"1":"eg","2":"SMART"},{"1":"eight","2":"SMART"},{"1":"either","2":"SMART"},{"1":"else","2":"SMART"},{"1":"elsewhere","2":"SMART"},{"1":"enough","2":"SMART"},{"1":"entirely","2":"SMART"},{"1":"especially","2":"SMART"},{"1":"et","2":"SMART"},{"1":"etc","2":"SMART"},{"1":"even","2":"SMART"},{"1":"ever","2":"SMART"},{"1":"every","2":"SMART"},{"1":"everybody","2":"SMART"},{"1":"everyone","2":"SMART"},{"1":"everything","2":"SMART"},{"1":"everywhere","2":"SMART"},{"1":"ex","2":"SMART"},{"1":"exactly","2":"SMART"},{"1":"example","2":"SMART"},{"1":"except","2":"SMART"},{"1":"f","2":"SMART"},{"1":"far","2":"SMART"},{"1":"few","2":"SMART"},{"1":"fifth","2":"SMART"},{"1":"first","2":"SMART"},{"1":"five","2":"SMART"},{"1":"followed","2":"SMART"},{"1":"following","2":"SMART"},{"1":"follows","2":"SMART"},{"1":"for","2":"SMART"},{"1":"former","2":"SMART"},{"1":"formerly","2":"SMART"},{"1":"forth","2":"SMART"},{"1":"four","2":"SMART"},{"1":"from","2":"SMART"},{"1":"further","2":"SMART"},{"1":"furthermore","2":"SMART"},{"1":"g","2":"SMART"},{"1":"get","2":"SMART"},{"1":"gets","2":"SMART"},{"1":"getting","2":"SMART"},{"1":"given","2":"SMART"},{"1":"gives","2":"SMART"},{"1":"go","2":"SMART"},{"1":"goes","2":"SMART"},{"1":"going","2":"SMART"},{"1":"gone","2":"SMART"},{"1":"got","2":"SMART"},{"1":"gotten","2":"SMART"},{"1":"greetings","2":"SMART"},{"1":"h","2":"SMART"},{"1":"had","2":"SMART"},{"1":"hadn't","2":"SMART"},{"1":"happens","2":"SMART"},{"1":"hardly","2":"SMART"},{"1":"has","2":"SMART"},{"1":"hasn't","2":"SMART"},{"1":"have","2":"SMART"},{"1":"haven't","2":"SMART"},{"1":"having","2":"SMART"},{"1":"he","2":"SMART"},{"1":"he's","2":"SMART"},{"1":"hello","2":"SMART"},{"1":"help","2":"SMART"},{"1":"hence","2":"SMART"},{"1":"her","2":"SMART"},{"1":"here","2":"SMART"},{"1":"here's","2":"SMART"},{"1":"hereafter","2":"SMART"},{"1":"hereby","2":"SMART"},{"1":"herein","2":"SMART"},{"1":"hereupon","2":"SMART"},{"1":"hers","2":"SMART"},{"1":"herself","2":"SMART"},{"1":"hi","2":"SMART"},{"1":"him","2":"SMART"},{"1":"himself","2":"SMART"},{"1":"his","2":"SMART"},{"1":"hither","2":"SMART"},{"1":"hopefully","2":"SMART"},{"1":"how","2":"SMART"},{"1":"howbeit","2":"SMART"},{"1":"however","2":"SMART"},{"1":"i","2":"SMART"},{"1":"i'd","2":"SMART"},{"1":"i'll","2":"SMART"},{"1":"i'm","2":"SMART"},{"1":"i've","2":"SMART"},{"1":"ie","2":"SMART"},{"1":"if","2":"SMART"},{"1":"ignored","2":"SMART"},{"1":"immediate","2":"SMART"},{"1":"in","2":"SMART"},{"1":"inasmuch","2":"SMART"},{"1":"inc","2":"SMART"},{"1":"indeed","2":"SMART"},{"1":"indicate","2":"SMART"},{"1":"indicated","2":"SMART"},{"1":"indicates","2":"SMART"},{"1":"inner","2":"SMART"},{"1":"insofar","2":"SMART"},{"1":"instead","2":"SMART"},{"1":"into","2":"SMART"},{"1":"inward","2":"SMART"},{"1":"is","2":"SMART"},{"1":"isn't","2":"SMART"},{"1":"it","2":"SMART"},{"1":"it'd","2":"SMART"},{"1":"it'll","2":"SMART"},{"1":"it's","2":"SMART"},{"1":"its","2":"SMART"},{"1":"itself","2":"SMART"},{"1":"j","2":"SMART"},{"1":"just","2":"SMART"},{"1":"k","2":"SMART"},{"1":"keep","2":"SMART"},{"1":"keeps","2":"SMART"},{"1":"kept","2":"SMART"},{"1":"know","2":"SMART"},{"1":"knows","2":"SMART"},{"1":"known","2":"SMART"},{"1":"l","2":"SMART"},{"1":"last","2":"SMART"},{"1":"lately","2":"SMART"},{"1":"later","2":"SMART"},{"1":"latter","2":"SMART"},{"1":"latterly","2":"SMART"},{"1":"least","2":"SMART"},{"1":"less","2":"SMART"},{"1":"lest","2":"SMART"},{"1":"let","2":"SMART"},{"1":"let's","2":"SMART"},{"1":"like","2":"SMART"},{"1":"liked","2":"SMART"},{"1":"likely","2":"SMART"},{"1":"little","2":"SMART"},{"1":"look","2":"SMART"},{"1":"looking","2":"SMART"},{"1":"looks","2":"SMART"},{"1":"ltd","2":"SMART"},{"1":"m","2":"SMART"},{"1":"mainly","2":"SMART"},{"1":"many","2":"SMART"},{"1":"may","2":"SMART"},{"1":"maybe","2":"SMART"},{"1":"me","2":"SMART"},{"1":"mean","2":"SMART"},{"1":"meanwhile","2":"SMART"},{"1":"merely","2":"SMART"},{"1":"might","2":"SMART"},{"1":"more","2":"SMART"},{"1":"moreover","2":"SMART"},{"1":"most","2":"SMART"},{"1":"mostly","2":"SMART"},{"1":"much","2":"SMART"},{"1":"must","2":"SMART"},{"1":"my","2":"SMART"},{"1":"myself","2":"SMART"},{"1":"n","2":"SMART"},{"1":"name","2":"SMART"},{"1":"namely","2":"SMART"},{"1":"nd","2":"SMART"},{"1":"near","2":"SMART"},{"1":"nearly","2":"SMART"},{"1":"necessary","2":"SMART"},{"1":"need","2":"SMART"},{"1":"needs","2":"SMART"},{"1":"neither","2":"SMART"},{"1":"never","2":"SMART"},{"1":"nevertheless","2":"SMART"},{"1":"new","2":"SMART"},{"1":"next","2":"SMART"},{"1":"nine","2":"SMART"},{"1":"no","2":"SMART"},{"1":"nobody","2":"SMART"},{"1":"non","2":"SMART"},{"1":"none","2":"SMART"},{"1":"noone","2":"SMART"},{"1":"nor","2":"SMART"},{"1":"normally","2":"SMART"},{"1":"not","2":"SMART"},{"1":"nothing","2":"SMART"},{"1":"novel","2":"SMART"},{"1":"now","2":"SMART"},{"1":"nowhere","2":"SMART"},{"1":"o","2":"SMART"},{"1":"obviously","2":"SMART"},{"1":"of","2":"SMART"},{"1":"off","2":"SMART"},{"1":"often","2":"SMART"},{"1":"oh","2":"SMART"},{"1":"ok","2":"SMART"},{"1":"okay","2":"SMART"},{"1":"old","2":"SMART"},{"1":"on","2":"SMART"},{"1":"once","2":"SMART"},{"1":"one","2":"SMART"},{"1":"ones","2":"SMART"},{"1":"only","2":"SMART"},{"1":"onto","2":"SMART"},{"1":"or","2":"SMART"},{"1":"other","2":"SMART"},{"1":"others","2":"SMART"},{"1":"otherwise","2":"SMART"},{"1":"ought","2":"SMART"},{"1":"our","2":"SMART"},{"1":"ours","2":"SMART"},{"1":"ourselves","2":"SMART"},{"1":"out","2":"SMART"},{"1":"outside","2":"SMART"},{"1":"over","2":"SMART"},{"1":"overall","2":"SMART"},{"1":"own","2":"SMART"},{"1":"p","2":"SMART"},{"1":"particular","2":"SMART"},{"1":"particularly","2":"SMART"},{"1":"per","2":"SMART"},{"1":"perhaps","2":"SMART"},{"1":"placed","2":"SMART"},{"1":"please","2":"SMART"},{"1":"plus","2":"SMART"},{"1":"possible","2":"SMART"},{"1":"presumably","2":"SMART"},{"1":"probably","2":"SMART"},{"1":"provides","2":"SMART"},{"1":"q","2":"SMART"},{"1":"que","2":"SMART"},{"1":"quite","2":"SMART"},{"1":"qv","2":"SMART"},{"1":"r","2":"SMART"},{"1":"rather","2":"SMART"},{"1":"rd","2":"SMART"},{"1":"re","2":"SMART"},{"1":"really","2":"SMART"},{"1":"reasonably","2":"SMART"},{"1":"regarding","2":"SMART"},{"1":"regardless","2":"SMART"},{"1":"regards","2":"SMART"},{"1":"relatively","2":"SMART"},{"1":"respectively","2":"SMART"},{"1":"right","2":"SMART"},{"1":"s","2":"SMART"},{"1":"said","2":"SMART"},{"1":"same","2":"SMART"},{"1":"saw","2":"SMART"},{"1":"say","2":"SMART"},{"1":"saying","2":"SMART"},{"1":"says","2":"SMART"},{"1":"second","2":"SMART"},{"1":"secondly","2":"SMART"},{"1":"see","2":"SMART"},{"1":"seeing","2":"SMART"},{"1":"seem","2":"SMART"},{"1":"seemed","2":"SMART"},{"1":"seeming","2":"SMART"},{"1":"seems","2":"SMART"},{"1":"seen","2":"SMART"},{"1":"self","2":"SMART"},{"1":"selves","2":"SMART"},{"1":"sensible","2":"SMART"},{"1":"sent","2":"SMART"},{"1":"serious","2":"SMART"},{"1":"seriously","2":"SMART"},{"1":"seven","2":"SMART"},{"1":"several","2":"SMART"},{"1":"shall","2":"SMART"},{"1":"she","2":"SMART"},{"1":"should","2":"SMART"},{"1":"shouldn't","2":"SMART"},{"1":"since","2":"SMART"},{"1":"six","2":"SMART"},{"1":"so","2":"SMART"},{"1":"some","2":"SMART"},{"1":"somebody","2":"SMART"},{"1":"somehow","2":"SMART"},{"1":"someone","2":"SMART"},{"1":"something","2":"SMART"},{"1":"sometime","2":"SMART"},{"1":"sometimes","2":"SMART"},{"1":"somewhat","2":"SMART"},{"1":"somewhere","2":"SMART"},{"1":"soon","2":"SMART"},{"1":"sorry","2":"SMART"},{"1":"specified","2":"SMART"},{"1":"specify","2":"SMART"},{"1":"specifying","2":"SMART"},{"1":"still","2":"SMART"},{"1":"sub","2":"SMART"},{"1":"such","2":"SMART"},{"1":"sup","2":"SMART"},{"1":"sure","2":"SMART"},{"1":"t","2":"SMART"},{"1":"t's","2":"SMART"},{"1":"take","2":"SMART"},{"1":"taken","2":"SMART"},{"1":"tell","2":"SMART"},{"1":"tends","2":"SMART"},{"1":"th","2":"SMART"},{"1":"than","2":"SMART"},{"1":"thank","2":"SMART"},{"1":"thanks","2":"SMART"},{"1":"thanx","2":"SMART"},{"1":"that","2":"SMART"},{"1":"that's","2":"SMART"},{"1":"thats","2":"SMART"},{"1":"the","2":"SMART"},{"1":"their","2":"SMART"},{"1":"theirs","2":"SMART"},{"1":"them","2":"SMART"},{"1":"themselves","2":"SMART"},{"1":"then","2":"SMART"},{"1":"thence","2":"SMART"},{"1":"there","2":"SMART"},{"1":"there's","2":"SMART"},{"1":"thereafter","2":"SMART"},{"1":"thereby","2":"SMART"},{"1":"therefore","2":"SMART"},{"1":"therein","2":"SMART"},{"1":"theres","2":"SMART"},{"1":"thereupon","2":"SMART"},{"1":"these","2":"SMART"},{"1":"they","2":"SMART"},{"1":"they'd","2":"SMART"},{"1":"they'll","2":"SMART"},{"1":"they're","2":"SMART"},{"1":"they've","2":"SMART"},{"1":"think","2":"SMART"},{"1":"third","2":"SMART"},{"1":"this","2":"SMART"},{"1":"thorough","2":"SMART"},{"1":"thoroughly","2":"SMART"},{"1":"those","2":"SMART"},{"1":"though","2":"SMART"},{"1":"three","2":"SMART"},{"1":"through","2":"SMART"},{"1":"throughout","2":"SMART"},{"1":"thru","2":"SMART"},{"1":"thus","2":"SMART"},{"1":"to","2":"SMART"},{"1":"together","2":"SMART"},{"1":"too","2":"SMART"},{"1":"took","2":"SMART"},{"1":"toward","2":"SMART"},{"1":"towards","2":"SMART"},{"1":"tried","2":"SMART"},{"1":"tries","2":"SMART"},{"1":"truly","2":"SMART"},{"1":"try","2":"SMART"},{"1":"trying","2":"SMART"},{"1":"twice","2":"SMART"},{"1":"two","2":"SMART"},{"1":"u","2":"SMART"},{"1":"un","2":"SMART"},{"1":"under","2":"SMART"},{"1":"unfortunately","2":"SMART"},{"1":"unless","2":"SMART"},{"1":"unlikely","2":"SMART"},{"1":"until","2":"SMART"},{"1":"unto","2":"SMART"},{"1":"up","2":"SMART"},{"1":"upon","2":"SMART"},{"1":"us","2":"SMART"},{"1":"use","2":"SMART"},{"1":"used","2":"SMART"},{"1":"useful","2":"SMART"},{"1":"uses","2":"SMART"},{"1":"using","2":"SMART"},{"1":"usually","2":"SMART"},{"1":"uucp","2":"SMART"},{"1":"v","2":"SMART"},{"1":"value","2":"SMART"},{"1":"various","2":"SMART"},{"1":"very","2":"SMART"},{"1":"via","2":"SMART"},{"1":"viz","2":"SMART"},{"1":"vs","2":"SMART"},{"1":"w","2":"SMART"},{"1":"want","2":"SMART"},{"1":"wants","2":"SMART"},{"1":"was","2":"SMART"},{"1":"wasn't","2":"SMART"},{"1":"way","2":"SMART"},{"1":"we","2":"SMART"},{"1":"we'd","2":"SMART"},{"1":"we'll","2":"SMART"},{"1":"we're","2":"SMART"},{"1":"we've","2":"SMART"},{"1":"welcome","2":"SMART"},{"1":"well","2":"SMART"},{"1":"went","2":"SMART"},{"1":"were","2":"SMART"},{"1":"weren't","2":"SMART"},{"1":"what","2":"SMART"},{"1":"what's","2":"SMART"},{"1":"whatever","2":"SMART"},{"1":"when","2":"SMART"},{"1":"whence","2":"SMART"},{"1":"whenever","2":"SMART"},{"1":"where","2":"SMART"},{"1":"where's","2":"SMART"},{"1":"whereafter","2":"SMART"},{"1":"whereas","2":"SMART"},{"1":"whereby","2":"SMART"},{"1":"wherein","2":"SMART"},{"1":"whereupon","2":"SMART"},{"1":"wherever","2":"SMART"},{"1":"whether","2":"SMART"},{"1":"which","2":"SMART"},{"1":"while","2":"SMART"},{"1":"whither","2":"SMART"},{"1":"who","2":"SMART"},{"1":"who's","2":"SMART"},{"1":"whoever","2":"SMART"},{"1":"whole","2":"SMART"},{"1":"whom","2":"SMART"},{"1":"whose","2":"SMART"},{"1":"why","2":"SMART"},{"1":"will","2":"SMART"},{"1":"willing","2":"SMART"},{"1":"wish","2":"SMART"},{"1":"with","2":"SMART"},{"1":"within","2":"SMART"},{"1":"without","2":"SMART"},{"1":"won't","2":"SMART"},{"1":"wonder","2":"SMART"},{"1":"would","2":"SMART"},{"1":"would","2":"SMART"},{"1":"wouldn't","2":"SMART"},{"1":"x","2":"SMART"},{"1":"y","2":"SMART"},{"1":"yes","2":"SMART"},{"1":"yet","2":"SMART"},{"1":"you","2":"SMART"},{"1":"you'd","2":"SMART"},{"1":"you'll","2":"SMART"},{"1":"you're","2":"SMART"},{"1":"you've","2":"SMART"},{"1":"your","2":"SMART"},{"1":"yours","2":"SMART"},{"1":"yourself","2":"SMART"},{"1":"yourselves","2":"SMART"},{"1":"z","2":"SMART"},{"1":"zero","2":"SMART"},{"1":"i","2":"snowball"},{"1":"me","2":"snowball"},{"1":"my","2":"snowball"},{"1":"myself","2":"snowball"},{"1":"we","2":"snowball"},{"1":"our","2":"snowball"},{"1":"ours","2":"snowball"},{"1":"ourselves","2":"snowball"},{"1":"you","2":"snowball"},{"1":"your","2":"snowball"},{"1":"yours","2":"snowball"},{"1":"yourself","2":"snowball"},{"1":"yourselves","2":"snowball"},{"1":"he","2":"snowball"},{"1":"him","2":"snowball"},{"1":"his","2":"snowball"},{"1":"himself","2":"snowball"},{"1":"she","2":"snowball"},{"1":"her","2":"snowball"},{"1":"hers","2":"snowball"},{"1":"herself","2":"snowball"},{"1":"it","2":"snowball"},{"1":"its","2":"snowball"},{"1":"itself","2":"snowball"},{"1":"they","2":"snowball"},{"1":"them","2":"snowball"},{"1":"their","2":"snowball"},{"1":"theirs","2":"snowball"},{"1":"themselves","2":"snowball"},{"1":"what","2":"snowball"},{"1":"which","2":"snowball"},{"1":"who","2":"snowball"},{"1":"whom","2":"snowball"},{"1":"this","2":"snowball"},{"1":"that","2":"snowball"},{"1":"these","2":"snowball"},{"1":"those","2":"snowball"},{"1":"am","2":"snowball"},{"1":"is","2":"snowball"},{"1":"are","2":"snowball"},{"1":"was","2":"snowball"},{"1":"were","2":"snowball"},{"1":"be","2":"snowball"},{"1":"been","2":"snowball"},{"1":"being","2":"snowball"},{"1":"have","2":"snowball"},{"1":"has","2":"snowball"},{"1":"had","2":"snowball"},{"1":"having","2":"snowball"},{"1":"do","2":"snowball"},{"1":"does","2":"snowball"},{"1":"did","2":"snowball"},{"1":"doing","2":"snowball"},{"1":"would","2":"snowball"},{"1":"should","2":"snowball"},{"1":"could","2":"snowball"},{"1":"ought","2":"snowball"},{"1":"i'm","2":"snowball"},{"1":"you're","2":"snowball"},{"1":"he's","2":"snowball"},{"1":"she's","2":"snowball"},{"1":"it's","2":"snowball"},{"1":"we're","2":"snowball"},{"1":"they're","2":"snowball"},{"1":"i've","2":"snowball"},{"1":"you've","2":"snowball"},{"1":"we've","2":"snowball"},{"1":"they've","2":"snowball"},{"1":"i'd","2":"snowball"},{"1":"you'd","2":"snowball"},{"1":"he'd","2":"snowball"},{"1":"she'd","2":"snowball"},{"1":"we'd","2":"snowball"},{"1":"they'd","2":"snowball"},{"1":"i'll","2":"snowball"},{"1":"you'll","2":"snowball"},{"1":"he'll","2":"snowball"},{"1":"she'll","2":"snowball"},{"1":"we'll","2":"snowball"},{"1":"they'll","2":"snowball"},{"1":"isn't","2":"snowball"},{"1":"aren't","2":"snowball"},{"1":"wasn't","2":"snowball"},{"1":"weren't","2":"snowball"},{"1":"hasn't","2":"snowball"},{"1":"haven't","2":"snowball"},{"1":"hadn't","2":"snowball"},{"1":"doesn't","2":"snowball"},{"1":"don't","2":"snowball"},{"1":"didn't","2":"snowball"},{"1":"won't","2":"snowball"},{"1":"wouldn't","2":"snowball"},{"1":"shan't","2":"snowball"},{"1":"shouldn't","2":"snowball"},{"1":"can't","2":"snowball"},{"1":"cannot","2":"snowball"},{"1":"couldn't","2":"snowball"},{"1":"mustn't","2":"snowball"},{"1":"let's","2":"snowball"},{"1":"that's","2":"snowball"},{"1":"who's","2":"snowball"},{"1":"what's","2":"snowball"},{"1":"here's","2":"snowball"},{"1":"there's","2":"snowball"},{"1":"when's","2":"snowball"},{"1":"where's","2":"snowball"},{"1":"why's","2":"snowball"},{"1":"how's","2":"snowball"},{"1":"a","2":"snowball"},{"1":"an","2":"snowball"},{"1":"the","2":"snowball"},{"1":"and","2":"snowball"},{"1":"but","2":"snowball"},{"1":"if","2":"snowball"},{"1":"or","2":"snowball"},{"1":"because","2":"snowball"},{"1":"as","2":"snowball"},{"1":"until","2":"snowball"},{"1":"while","2":"snowball"},{"1":"of","2":"snowball"},{"1":"at","2":"snowball"},{"1":"by","2":"snowball"},{"1":"for","2":"snowball"},{"1":"with","2":"snowball"},{"1":"about","2":"snowball"},{"1":"against","2":"snowball"},{"1":"between","2":"snowball"},{"1":"into","2":"snowball"},{"1":"through","2":"snowball"},{"1":"during","2":"snowball"},{"1":"before","2":"snowball"},{"1":"after","2":"snowball"},{"1":"above","2":"snowball"},{"1":"below","2":"snowball"},{"1":"to","2":"snowball"},{"1":"from","2":"snowball"},{"1":"up","2":"snowball"},{"1":"down","2":"snowball"},{"1":"in","2":"snowball"},{"1":"out","2":"snowball"},{"1":"on","2":"snowball"},{"1":"off","2":"snowball"},{"1":"over","2":"snowball"},{"1":"under","2":"snowball"},{"1":"again","2":"snowball"},{"1":"further","2":"snowball"},{"1":"then","2":"snowball"},{"1":"once","2":"snowball"},{"1":"here","2":"snowball"},{"1":"there","2":"snowball"},{"1":"when","2":"snowball"},{"1":"where","2":"snowball"},{"1":"why","2":"snowball"},{"1":"how","2":"snowball"},{"1":"all","2":"snowball"},{"1":"any","2":"snowball"},{"1":"both","2":"snowball"},{"1":"each","2":"snowball"},{"1":"few","2":"snowball"},{"1":"more","2":"snowball"},{"1":"most","2":"snowball"},{"1":"other","2":"snowball"},{"1":"some","2":"snowball"},{"1":"such","2":"snowball"},{"1":"no","2":"snowball"},{"1":"nor","2":"snowball"},{"1":"not","2":"snowball"},{"1":"only","2":"snowball"},{"1":"own","2":"snowball"},{"1":"same","2":"snowball"},{"1":"so","2":"snowball"},{"1":"than","2":"snowball"},{"1":"too","2":"snowball"},{"1":"very","2":"snowball"},{"1":"a","2":"onix"},{"1":"about","2":"onix"},{"1":"above","2":"onix"},{"1":"across","2":"onix"},{"1":"after","2":"onix"},{"1":"again","2":"onix"},{"1":"against","2":"onix"},{"1":"all","2":"onix"},{"1":"almost","2":"onix"},{"1":"alone","2":"onix"},{"1":"along","2":"onix"},{"1":"already","2":"onix"},{"1":"also","2":"onix"},{"1":"although","2":"onix"},{"1":"always","2":"onix"},{"1":"among","2":"onix"},{"1":"an","2":"onix"},{"1":"and","2":"onix"},{"1":"another","2":"onix"},{"1":"any","2":"onix"},{"1":"anybody","2":"onix"},{"1":"anyone","2":"onix"},{"1":"anything","2":"onix"},{"1":"anywhere","2":"onix"},{"1":"are","2":"onix"},{"1":"area","2":"onix"},{"1":"areas","2":"onix"},{"1":"around","2":"onix"},{"1":"as","2":"onix"},{"1":"ask","2":"onix"},{"1":"asked","2":"onix"},{"1":"asking","2":"onix"},{"1":"asks","2":"onix"},{"1":"at","2":"onix"},{"1":"away","2":"onix"},{"1":"back","2":"onix"},{"1":"backed","2":"onix"},{"1":"backing","2":"onix"},{"1":"backs","2":"onix"},{"1":"be","2":"onix"},{"1":"became","2":"onix"},{"1":"because","2":"onix"},{"1":"become","2":"onix"},{"1":"becomes","2":"onix"},{"1":"been","2":"onix"},{"1":"before","2":"onix"},{"1":"began","2":"onix"},{"1":"behind","2":"onix"},{"1":"being","2":"onix"},{"1":"beings","2":"onix"},{"1":"best","2":"onix"},{"1":"better","2":"onix"},{"1":"between","2":"onix"},{"1":"big","2":"onix"},{"1":"both","2":"onix"},{"1":"but","2":"onix"},{"1":"by","2":"onix"},{"1":"came","2":"onix"},{"1":"can","2":"onix"},{"1":"cannot","2":"onix"},{"1":"case","2":"onix"},{"1":"cases","2":"onix"},{"1":"certain","2":"onix"},{"1":"certainly","2":"onix"},{"1":"clear","2":"onix"},{"1":"clearly","2":"onix"},{"1":"come","2":"onix"},{"1":"could","2":"onix"},{"1":"did","2":"onix"},{"1":"differ","2":"onix"},{"1":"different","2":"onix"},{"1":"differently","2":"onix"},{"1":"do","2":"onix"},{"1":"does","2":"onix"},{"1":"done","2":"onix"},{"1":"down","2":"onix"},{"1":"down","2":"onix"},{"1":"downed","2":"onix"},{"1":"downing","2":"onix"},{"1":"downs","2":"onix"},{"1":"during","2":"onix"},{"1":"each","2":"onix"},{"1":"early","2":"onix"},{"1":"either","2":"onix"},{"1":"end","2":"onix"},{"1":"ended","2":"onix"},{"1":"ending","2":"onix"},{"1":"ends","2":"onix"},{"1":"enough","2":"onix"},{"1":"even","2":"onix"},{"1":"evenly","2":"onix"},{"1":"ever","2":"onix"},{"1":"every","2":"onix"},{"1":"everybody","2":"onix"},{"1":"everyone","2":"onix"},{"1":"everything","2":"onix"},{"1":"everywhere","2":"onix"},{"1":"face","2":"onix"},{"1":"faces","2":"onix"},{"1":"fact","2":"onix"},{"1":"facts","2":"onix"},{"1":"far","2":"onix"},{"1":"felt","2":"onix"},{"1":"few","2":"onix"},{"1":"find","2":"onix"},{"1":"finds","2":"onix"},{"1":"first","2":"onix"},{"1":"for","2":"onix"},{"1":"four","2":"onix"},{"1":"from","2":"onix"},{"1":"full","2":"onix"},{"1":"fully","2":"onix"},{"1":"further","2":"onix"},{"1":"furthered","2":"onix"},{"1":"furthering","2":"onix"},{"1":"furthers","2":"onix"},{"1":"gave","2":"onix"},{"1":"general","2":"onix"},{"1":"generally","2":"onix"},{"1":"get","2":"onix"},{"1":"gets","2":"onix"},{"1":"give","2":"onix"},{"1":"given","2":"onix"},{"1":"gives","2":"onix"},{"1":"go","2":"onix"},{"1":"going","2":"onix"},{"1":"good","2":"onix"},{"1":"goods","2":"onix"},{"1":"got","2":"onix"},{"1":"great","2":"onix"},{"1":"greater","2":"onix"},{"1":"greatest","2":"onix"},{"1":"group","2":"onix"},{"1":"grouped","2":"onix"},{"1":"grouping","2":"onix"},{"1":"groups","2":"onix"},{"1":"had","2":"onix"},{"1":"has","2":"onix"},{"1":"have","2":"onix"},{"1":"having","2":"onix"},{"1":"he","2":"onix"},{"1":"her","2":"onix"},{"1":"here","2":"onix"},{"1":"herself","2":"onix"},{"1":"high","2":"onix"},{"1":"high","2":"onix"},{"1":"high","2":"onix"},{"1":"higher","2":"onix"},{"1":"highest","2":"onix"},{"1":"him","2":"onix"},{"1":"himself","2":"onix"},{"1":"his","2":"onix"},{"1":"how","2":"onix"},{"1":"however","2":"onix"},{"1":"i","2":"onix"},{"1":"if","2":"onix"},{"1":"important","2":"onix"},{"1":"in","2":"onix"},{"1":"interest","2":"onix"},{"1":"interested","2":"onix"},{"1":"interesting","2":"onix"},{"1":"interests","2":"onix"},{"1":"into","2":"onix"},{"1":"is","2":"onix"},{"1":"it","2":"onix"},{"1":"its","2":"onix"},{"1":"itself","2":"onix"},{"1":"just","2":"onix"},{"1":"keep","2":"onix"},{"1":"keeps","2":"onix"},{"1":"kind","2":"onix"},{"1":"knew","2":"onix"},{"1":"know","2":"onix"},{"1":"known","2":"onix"},{"1":"knows","2":"onix"},{"1":"large","2":"onix"},{"1":"largely","2":"onix"},{"1":"last","2":"onix"},{"1":"later","2":"onix"},{"1":"latest","2":"onix"},{"1":"least","2":"onix"},{"1":"less","2":"onix"},{"1":"let","2":"onix"},{"1":"lets","2":"onix"},{"1":"like","2":"onix"},{"1":"likely","2":"onix"},{"1":"long","2":"onix"},{"1":"longer","2":"onix"},{"1":"longest","2":"onix"},{"1":"made","2":"onix"},{"1":"make","2":"onix"},{"1":"making","2":"onix"},{"1":"man","2":"onix"},{"1":"many","2":"onix"},{"1":"may","2":"onix"},{"1":"me","2":"onix"},{"1":"member","2":"onix"},{"1":"members","2":"onix"},{"1":"men","2":"onix"},{"1":"might","2":"onix"},{"1":"more","2":"onix"},{"1":"most","2":"onix"},{"1":"mostly","2":"onix"},{"1":"mr","2":"onix"},{"1":"mrs","2":"onix"},{"1":"much","2":"onix"},{"1":"must","2":"onix"},{"1":"my","2":"onix"},{"1":"myself","2":"onix"},{"1":"necessary","2":"onix"},{"1":"need","2":"onix"},{"1":"needed","2":"onix"},{"1":"needing","2":"onix"},{"1":"needs","2":"onix"},{"1":"never","2":"onix"},{"1":"new","2":"onix"},{"1":"new","2":"onix"},{"1":"newer","2":"onix"},{"1":"newest","2":"onix"},{"1":"next","2":"onix"},{"1":"no","2":"onix"},{"1":"nobody","2":"onix"},{"1":"non","2":"onix"},{"1":"noone","2":"onix"},{"1":"not","2":"onix"},{"1":"nothing","2":"onix"},{"1":"now","2":"onix"},{"1":"nowhere","2":"onix"},{"1":"number","2":"onix"},{"1":"numbers","2":"onix"},{"1":"of","2":"onix"},{"1":"off","2":"onix"},{"1":"often","2":"onix"},{"1":"old","2":"onix"},{"1":"older","2":"onix"},{"1":"oldest","2":"onix"},{"1":"on","2":"onix"},{"1":"once","2":"onix"},{"1":"one","2":"onix"},{"1":"only","2":"onix"},{"1":"open","2":"onix"},{"1":"opened","2":"onix"},{"1":"opening","2":"onix"},{"1":"opens","2":"onix"},{"1":"or","2":"onix"},{"1":"order","2":"onix"},{"1":"ordered","2":"onix"},{"1":"ordering","2":"onix"},{"1":"orders","2":"onix"},{"1":"other","2":"onix"},{"1":"others","2":"onix"},{"1":"our","2":"onix"},{"1":"out","2":"onix"},{"1":"over","2":"onix"},{"1":"part","2":"onix"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>If we filter out rows representing stop words with <code>filter(!word %in% stop_words$word)</code>:</p>
<pre class="r"><code>tweet_words &lt;- campaign_tweets %&gt;% 
  mutate(text = str_replace_all(text, links, &quot;&quot;))  %&gt;%
  unnest_tokens(word, text, token = &quot;tweets&quot;) %&gt;%
  filter(!word %in% stop_words$word ) </code></pre>
<p>we end up with a much more informative set of top 10 tweeted words:</p>
<pre class="r"><code>tweet_words %&gt;% 
  count(word) %&gt;%
  top_n(10, n) %&gt;%
  mutate(word = reorder(word, n)) %&gt;%
  arrange(desc(n))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["word"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"#trump2016","2":"414"},{"1":"hillary","2":"405"},{"1":"people","2":"303"},{"1":"#makeamericagreatagain","2":"294"},{"1":"america","2":"254"},{"1":"clinton","2":"237"},{"1":"poll","2":"217"},{"1":"crooked","2":"205"},{"1":"trump","2":"195"},{"1":"cruz","2":"159"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Some exploration of the resulting words (not shown here) reveals a couple of unwanted characteristics in our tokens. First, some of our tokens are just numbers (years, for example). We want to remove these and we can find them using the regex <code>^\d+$</code>. Second, some of our tokens come from a quote and they start with <code>'</code>. We want to remove the <code>'</code> when it is at the start of a word so we will just <code>str_replace</code>. We add these two lines to the code above to generate our final table:</p>
<pre class="r"><code>tweet_words &lt;- campaign_tweets %&gt;% 
  mutate(text = str_replace_all(text, links, &quot;&quot;))  %&gt;%
  unnest_tokens(word, text, token = &quot;tweets&quot;) %&gt;%
  filter(!word %in% stop_words$word &amp;
           !str_detect(word, &quot;^\\d+$&quot;)) %&gt;%
  mutate(word = str_replace(word, &quot;^&#39;&quot;, &quot;&quot;))</code></pre>
<p>Now that we have all our words in a table, along with information about what device was used to compose the tweet they came from, we can start exploring which words are more common when comparing Android to iPhone.</p>
<p>For each word, we want to know if it is more likely to come from an Android tweet or an iPhone tweet. In the textbook <a href="https://rafalab.github.io/dsbook/inference.html#association-tests">(Section - 15.10 Association tests)</a> we introduced the odds ratio as a summary statistic useful for quantifying these differences. For each device and a given word, let’s call it <code>y</code>, we compute the odds or the ratio between the proportion of words that are <code>y</code> and not <code>y</code> and compute the ratio of those odds. Here we will have many proportions that are 0, so we use the 0.5 correction described in the textbook <a href="https://rafalab.github.io/dsbook/inference.html#association-tests">(Section - 15.10 Association tests)</a>.</p>
<pre class="r"><code>android_iphone_or &lt;- tweet_words %&gt;%
  count(word, source) %&gt;%
  spread(source, n, fill = 0) %&gt;%
  mutate(or = (Android + 0.5) / (sum(Android) - Android + 0.5) / 
           ( (iPhone + 0.5) / (sum(iPhone) - iPhone + 0.5)))</code></pre>
<p>Here are the highest odds ratios for Android</p>
<pre class="r"><code>android_iphone_or %&gt;% arrange(desc(or))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["word"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Android"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["iPhone"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["or"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"poor","2":"13","3":"0","4":"23.099935"},{"1":"poorly","2":"12","3":"0","4":"21.387503"},{"1":"turnberry","2":"11","3":"0","4":"19.675283"},{"1":"@cbsnews","2":"10","3":"0","4":"17.963275"},{"1":"angry","2":"10","3":"0","4":"17.963275"},{"1":"bosses","2":"10","3":"0","4":"17.963275"},{"1":"write","2":"10","3":"0","4":"17.963275"},{"1":"brexit","2":"9","3":"0","4":"16.251480"},{"1":"defend","2":"9","3":"0","4":"16.251480"},{"1":"funny","2":"9","3":"0","4":"16.251480"},{"1":"playing","2":"9","3":"0","4":"16.251480"},{"1":"pols","2":"9","3":"0","4":"16.251480"},{"1":"stupid","2":"9","3":"0","4":"16.251480"},{"1":"enthusiasm","2":"8","3":"0","4":"14.539897"},{"1":"george","2":"8","3":"0","4":"14.539897"},{"1":"puppets","2":"8","3":"0","4":"14.539897"},{"1":"sources","2":"8","3":"0","4":"14.539897"},{"1":"pm","2":"38","3":"2","4":"13.194058"},{"1":"@gma","2":"7","3":"0","4":"12.828525"},{"1":"$1000000","2":"7","3":"0","4":"12.828525"},{"1":"$s","2":"7","3":"0","4":"12.828525"},{"1":"1st","2":"7","3":"0","4":"12.828525"},{"1":"onesided","2":"7","3":"0","4":"12.828525"},{"1":"primaries","2":"7","3":"0","4":"12.828525"},{"1":"southern","2":"7","3":"0","4":"12.828525"},{"1":"talks","2":"7","3":"0","4":"12.828525"},{"1":"leading","2":"19","3":"1","4":"11.125523"},{"1":"@cnbc","2":"6","3":"0","4":"11.117366"},{"1":"@donlemon","2":"6","3":"0","4":"11.117366"},{"1":"daily","2":"6","3":"0","4":"11.117366"},{"1":"democrat","2":"6","3":"0","4":"11.117366"},{"1":"divided","2":"6","3":"0","4":"11.117366"},{"1":"eastern","2":"6","3":"0","4":"11.117366"},{"1":"michael","2":"6","3":"0","4":"11.117366"},{"1":"protest","2":"6","3":"0","4":"11.117366"},{"1":"smarter","2":"6","3":"0","4":"11.117366"},{"1":"temperament","2":"6","3":"0","4":"11.117366"},{"1":"paid","2":"17","3":"1","4":"9.983206"},{"1":"vp","2":"16","3":"1","4":"9.412153"},{"1":"@cnnpolitics","2":"5","3":"0","4":"9.406419"},{"1":"$6000000","2":"5","3":"0","4":"9.406419"},{"1":"attacking","2":"5","3":"0","4":"9.406419"},{"1":"audit","2":"5","3":"0","4":"9.406419"},{"1":"bombed","2":"5","3":"0","4":"9.406419"},{"1":"card","2":"5","3":"0","4":"9.406419"},{"1":"champion","2":"5","3":"0","4":"9.406419"},{"1":"commercials","2":"5","3":"0","4":"9.406419"},{"1":"constantly","2":"5","3":"0","4":"9.406419"},{"1":"crimea","2":"5","3":"0","4":"9.406419"},{"1":"field","2":"5","3":"0","4":"9.406419"},{"1":"frankluntz","2":"5","3":"0","4":"9.406419"},{"1":"held","2":"5","3":"0","4":"9.406419"},{"1":"koch","2":"5","3":"0","4":"9.406419"},{"1":"loss","2":"5","3":"0","4":"9.406419"},{"1":"negotiators","2":"5","3":"0","4":"9.406419"},{"1":"opposite","2":"5","3":"0","4":"9.406419"},{"1":"returned","2":"5","3":"0","4":"9.406419"},{"1":"sleepy","2":"5","3":"0","4":"9.406419"},{"1":"socalled","2":"5","3":"0","4":"9.406419"},{"1":"trouble","2":"5","3":"0","4":"9.406419"},{"1":"usag","2":"5","3":"0","4":"9.406419"},{"1":"writing","2":"5","3":"0","4":"9.406419"},{"1":"china","2":"15","3":"1","4":"8.841171"},{"1":"joke","2":"15","3":"1","4":"8.841171"},{"1":"badly","2":"34","3":"3","4":"8.442467"},{"1":"dead","2":"13","3":"1","4":"7.699420"},{"1":"senate","2":"13","3":"1","4":"7.699420"},{"1":"#demdebate","2":"4","3":"0","4":"7.695685"},{"1":"african","2":"4","3":"0","4":"7.695685"},{"1":"anger","2":"4","3":"0","4":"7.695685"},{"1":"anticipated","2":"4","3":"0","4":"7.695685"},{"1":"antitrump","2":"4","3":"0","4":"7.695685"},{"1":"apprentice","2":"4","3":"0","4":"7.695685"},{"1":"babies","2":"4","3":"0","4":"7.695685"},{"1":"baltimore","2":"4","3":"0","4":"7.695685"},{"1":"beck","2":"4","3":"0","4":"7.695685"},{"1":"billion","2":"4","3":"0","4":"7.695685"},{"1":"black","2":"4","3":"0","4":"7.695685"},{"1":"board","2":"4","3":"0","4":"7.695685"},{"1":"capitol","2":"4","3":"0","4":"7.695685"},{"1":"con","2":"4","3":"0","4":"7.695685"},{"1":"covered","2":"4","3":"0","4":"7.695685"},{"1":"criticized","2":"4","3":"0","4":"7.695685"},{"1":"death","2":"4","3":"0","4":"7.695685"},{"1":"decision","2":"4","3":"0","4":"7.695685"},{"1":"destroyed","2":"4","3":"0","4":"7.695685"},{"1":"died","2":"4","3":"0","4":"7.695685"},{"1":"double","2":"4","3":"0","4":"7.695685"},{"1":"expensive","2":"4","3":"0","4":"7.695685"},{"1":"finish","2":"4","3":"0","4":"7.695685"},{"1":"flag","2":"4","3":"0","4":"7.695685"},{"1":"football","2":"4","3":"0","4":"7.695685"},{"1":"forced","2":"4","3":"0","4":"7.695685"},{"1":"germany","2":"4","3":"0","4":"7.695685"},{"1":"heads","2":"4","3":"0","4":"7.695685"},{"1":"hell","2":"4","3":"0","4":"7.695685"},{"1":"hits","2":"4","3":"0","4":"7.695685"},{"1":"khan","2":"4","3":"0","4":"7.695685"},{"1":"kids","2":"4","3":"0","4":"7.695685"},{"1":"level","2":"4","3":"0","4":"7.695685"},{"1":"missing","2":"4","3":"0","4":"7.695685"},{"1":"mistakes","2":"4","3":"0","4":"7.695685"},{"1":"morningjoe","2":"4","3":"0","4":"7.695685"},{"1":"panel","2":"4","3":"0","4":"7.695685"},{"1":"picks","2":"4","3":"0","4":"7.695685"},{"1":"pressure","2":"4","3":"0","4":"7.695685"},{"1":"progress","2":"4","3":"0","4":"7.695685"},{"1":"pushed","2":"4","3":"0","4":"7.695685"},{"1":"quit","2":"4","3":"0","4":"7.695685"},{"1":"soundly","2":"4","3":"0","4":"7.695685"},{"1":"stupidity","2":"4","3":"0","4":"7.695685"},{"1":"unfairly","2":"4","3":"0","4":"7.695685"},{"1":"uss","2":"4","3":"0","4":"7.695685"},{"1":"vicious","2":"4","3":"0","4":"7.695685"},{"1":"viewers","2":"4","3":"0","4":"7.695685"},{"1":"wise","2":"4","3":"0","4":"7.695685"},{"1":"wsj","2":"4","3":"0","4":"7.695685"},{"1":"spent","2":"28","3":"3","4":"6.971616"},{"1":"born","2":"11","3":"1","4":"6.557952"},{"1":"canada","2":"11","3":"1","4":"6.557952"},{"1":"lobbyists","2":"11","3":"1","4":"6.557952"},{"1":"reported","2":"11","3":"1","4":"6.557952"},{"1":"selffunding","2":"11","3":"1","4":"6.557952"},{"1":"@megynkelly","2":"24","3":"3","4":"5.991656"},{"1":"political","2":"24","3":"3","4":"5.991656"},{"1":"mexican","2":"10","3":"1","4":"5.987325"},{"1":"stated","2":"10","3":"1","4":"5.987325"},{"1":"@amazon","2":"3","3":"0","4":"5.985162"},{"1":"@ariannahuff","2":"3","3":"0","4":"5.985162"},{"1":"@elizabethforma","2":"3","3":"0","4":"5.985162"},{"1":"@huffingtonpost","2":"3","3":"0","4":"5.985162"},{"1":"@kayleighmcenany","2":"3","3":"0","4":"5.985162"},{"1":"@mariabartiromo","2":"3","3":"0","4":"5.985162"},{"1":"@newday","2":"3","3":"0","4":"5.985162"},{"1":"@pennjillette","2":"3","3":"0","4":"5.985162"},{"1":"@sentedcruz","2":"3","3":"0","4":"5.985162"},{"1":"$430","2":"3","3":"0","4":"5.985162"},{"1":"admitted","2":"3","3":"0","4":"5.985162"},{"1":"advice","2":"3","3":"0","4":"5.985162"},{"1":"agenda","2":"3","3":"0","4":"5.985162"},{"1":"armed","2":"3","3":"0","4":"5.985162"},{"1":"barbara","2":"3","3":"0","4":"5.985162"},{"1":"beg","2":"3","3":"0","4":"5.985162"},{"1":"billions","2":"3","3":"0","4":"5.985162"},{"1":"blood","2":"3","3":"0","4":"5.985162"},{"1":"bobvanderplaats","2":"3","3":"0","4":"5.985162"},{"1":"boston","2":"3","3":"0","4":"5.985162"},{"1":"buzz","2":"3","3":"0","4":"5.985162"},{"1":"category","2":"3","3":"0","4":"5.985162"},{"1":"committed","2":"3","3":"0","4":"5.985162"},{"1":"confidence","2":"3","3":"0","4":"5.985162"},{"1":"covers","2":"3","3":"0","4":"5.985162"},{"1":"cutting","2":"3","3":"0","4":"5.985162"},{"1":"donaldtrump","2":"3","3":"0","4":"5.985162"},{"1":"doral","2":"3","3":"0","4":"5.985162"},{"1":"dumber","2":"3","3":"0","4":"5.985162"},{"1":"fees","2":"3","3":"0","4":"5.985162"},{"1":"fence","2":"3","3":"0","4":"5.985162"},{"1":"ford","2":"3","3":"0","4":"5.985162"},{"1":"gq","2":"3","3":"0","4":"5.985162"},{"1":"havnt","2":"3","3":"0","4":"5.985162"},{"1":"historic","2":"3","3":"0","4":"5.985162"},{"1":"hitting","2":"3","3":"0","4":"5.985162"},{"1":"host","2":"3","3":"0","4":"5.985162"},{"1":"inaccurately","2":"3","3":"0","4":"5.985162"},{"1":"killers","2":"3","3":"0","4":"5.985162"},{"1":"knowingly","2":"3","3":"0","4":"5.985162"},{"1":"lane","2":"3","3":"0","4":"5.985162"},{"1":"levels","2":"3","3":"0","4":"5.985162"},{"1":"light","2":"3","3":"0","4":"5.985162"},{"1":"likes","2":"3","3":"0","4":"5.985162"},{"1":"likewise","2":"3","3":"0","4":"5.985162"},{"1":"lowlife","2":"3","3":"0","4":"5.985162"},{"1":"lyinted","2":"3","3":"0","4":"5.985162"},{"1":"margins","2":"3","3":"0","4":"5.985162"},{"1":"markhalperin","2":"3","3":"0","4":"5.985162"},{"1":"mathematically","2":"3","3":"0","4":"5.985162"},{"1":"meetings","2":"3","3":"0","4":"5.985162"},{"1":"mentioned","2":"3","3":"0","4":"5.985162"},{"1":"minds","2":"3","3":"0","4":"5.985162"},{"1":"misrepresent","2":"3","3":"0","4":"5.985162"},{"1":"monmouth","2":"3","3":"0","4":"5.985162"},{"1":"passed","2":"3","3":"0","4":"5.985162"},{"1":"pastors","2":"3","3":"0","4":"5.985162"},{"1":"picked","2":"3","3":"0","4":"5.985162"},{"1":"podium","2":"3","3":"0","4":"5.985162"},{"1":"pol","2":"3","3":"0","4":"5.985162"},{"1":"prisoners","2":"3","3":"0","4":"5.985162"},{"1":"productive","2":"3","3":"0","4":"5.985162"},{"1":"purposely","2":"3","3":"0","4":"5.985162"},{"1":"races","2":"3","3":"0","4":"5.985162"},{"1":"raisedgave","2":"3","3":"0","4":"5.985162"},{"1":"recieved","2":"3","3":"0","4":"5.985162"},{"1":"schultz","2":"3","3":"0","4":"5.985162"},{"1":"seanhannity","2":"3","3":"0","4":"5.985162"},{"1":"season","2":"3","3":"0","4":"5.985162"},{"1":"slaughter","2":"3","3":"0","4":"5.985162"},{"1":"stops","2":"3","3":"0","4":"5.985162"},{"1":"straighten","2":"3","3":"0","4":"5.985162"},{"1":"stronger","2":"3","3":"0","4":"5.985162"},{"1":"subject","2":"3","3":"0","4":"5.985162"},{"1":"suffers","2":"3","3":"0","4":"5.985162"},{"1":"surprised","2":"3","3":"0","4":"5.985162"},{"1":"syrians","2":"3","3":"0","4":"5.985162"},{"1":"treat","2":"3","3":"0","4":"5.985162"},{"1":"treatment","2":"3","3":"0","4":"5.985162"},{"1":"trip","2":"3","3":"0","4":"5.985162"},{"1":"vacation","2":"3","3":"0","4":"5.985162"},{"1":"wikileakes","2":"3","3":"0","4":"5.985162"},{"1":"wishes","2":"3","3":"0","4":"5.985162"},{"1":"wounded","2":"3","3":"0","4":"5.985162"},{"1":"youth","2":"3","3":"0","4":"5.985162"},{"1":"@foxandfriends","2":"37","3":"5","4":"5.839892"},{"1":"exciting","2":"16","3":"2","4":"5.646883"},{"1":"judgement","2":"22","3":"3","4":"5.501859"},{"1":"bought","2":"9","3":"1","4":"5.416767"},{"1":"establishment","2":"9","3":"1","4":"5.416767"},{"1":"fighting","2":"9","3":"1","4":"5.416767"},{"1":"guns","2":"9","3":"1","4":"5.416767"},{"1":"network","2":"9","3":"1","4":"5.416767"},{"1":"public","2":"9","3":"1","4":"5.416767"},{"1":"television","2":"21","3":"3","4":"5.257006"},{"1":"lyin","2":"27","3":"4","4":"5.231405"},{"1":"crazy","2":"20","3":"3","4":"5.012183"},{"1":"politics","2":"20","3":"3","4":"5.012183"},{"1":"chance","2":"14","3":"2","4":"4.961797"},{"1":"citizen","2":"8","3":"1","4":"4.846281"},{"1":"controlled","2":"8","3":"1","4":"4.846281"},{"1":"disgusting","2":"8","3":"1","4":"4.846281"},{"1":"explain","2":"8","3":"1","4":"4.846281"},{"1":"pres","2":"8","3":"1","4":"4.846281"},{"1":"reviews","2":"8","3":"1","4":"4.846281"},{"1":"set","2":"8","3":"1","4":"4.846281"},{"1":"start","2":"8","3":"1","4":"4.846281"},{"1":"stay","2":"8","3":"1","4":"4.846281"},{"1":"candidates","2":"19","3":"3","4":"4.767390"},{"1":"@wsj","2":"13","3":"2","4":"4.619317"},{"1":"mess","2":"13","3":"2","4":"4.619317"},{"1":"fun","2":"18","3":"3","4":"4.522628"},{"1":"@cnn","2":"90","3":"17","4":"4.440177"},{"1":"republican","2":"63","3":"12","4":"4.355933"},{"1":"bush","2":"47","3":"9","4":"4.284006"},{"1":"finally","2":"12","3":"2","4":"4.276881"},{"1":"happening","2":"12","3":"2","4":"4.276881"},{"1":"pushing","2":"12","3":"2","4":"4.276881"},{"1":"unfair","2":"12","3":"2","4":"4.276881"},{"1":"experience","2":"7","3":"1","4":"4.275865"},{"1":"matter","2":"7","3":"1","4":"4.275865"},{"1":"minutes","2":"7","3":"1","4":"4.275865"},{"1":"protesters","2":"7","3":"1","4":"4.275865"},{"1":"sold","2":"7","3":"1","4":"4.275865"},{"1":"@bensasse","2":"2","3":"0","4":"4.274851"},{"1":"@brithume","2":"2","3":"0","4":"4.274851"},{"1":"@foxbusiness","2":"2","3":"0","4":"4.274851"},{"1":"@jeffbezos","2":"2","3":"0","4":"4.274851"},{"1":"@joniernst","2":"2","3":"0","4":"4.274851"},{"1":"@ncgop","2":"2","3":"0","4":"4.274851"},{"1":"@nro","2":"2","3":"0","4":"4.274851"},{"1":"@scottienhughes","2":"2","3":"0","4":"4.274851"},{"1":"@secupp","2":"2","3":"0","4":"4.274851"},{"1":"@tonyschwartz","2":"2","3":"0","4":"4.274851"},{"1":"@univision","2":"2","3":"0","4":"4.274851"},{"1":"@uschamber","2":"2","3":"0","4":"4.274851"},{"1":"@vanityfair","2":"2","3":"0","4":"4.274851"},{"1":"#neverhillary","2":"2","3":"0","4":"4.274851"},{"1":"$10","2":"2","3":"0","4":"4.274851"},{"1":"$100000","2":"2","3":"0","4":"4.274851"},{"1":"$150","2":"2","3":"0","4":"4.274851"},{"1":"$5600000","2":"2","3":"0","4":"4.274851"},{"1":"$59","2":"2","3":"0","4":"4.274851"},{"1":"abcwashington","2":"2","3":"0","4":"4.274851"},{"1":"ability","2":"2","3":"0","4":"4.274851"},{"1":"ac360","2":"2","3":"0","4":"4.274851"},{"1":"acknowledge","2":"2","3":"0","4":"4.274851"},{"1":"added","2":"2","3":"0","4":"4.274851"},{"1":"afraid","2":"2","3":"0","4":"4.274851"},{"1":"airlines","2":"2","3":"0","4":"4.274851"},{"1":"airports","2":"2","3":"0","4":"4.274851"},{"1":"alicia","2":"2","3":"0","4":"4.274851"},{"1":"alltime","2":"2","3":"0","4":"4.274851"},{"1":"amount","2":"2","3":"0","4":"4.274851"},{"1":"analyst","2":"2","3":"0","4":"4.274851"},{"1":"apple","2":"2","3":"0","4":"4.274851"},{"1":"approved","2":"2","3":"0","4":"4.274851"},{"1":"arnold","2":"2","3":"0","4":"4.274851"},{"1":"arrogant","2":"2","3":"0","4":"4.274851"},{"1":"asap","2":"2","3":"0","4":"4.274851"},{"1":"asia","2":"2","3":"0","4":"4.274851"},{"1":"asians","2":"2","3":"0","4":"4.274851"},{"1":"audited","2":"2","3":"0","4":"4.274851"},{"1":"aware","2":"2","3":"0","4":"4.274851"},{"1":"balanced","2":"2","3":"0","4":"4.274851"},{"1":"bandon","2":"2","3":"0","4":"4.274851"},{"1":"basket","2":"2","3":"0","4":"4.274851"},{"1":"battle","2":"2","3":"0","4":"4.274851"},{"1":"beast","2":"2","3":"0","4":"4.274851"},{"1":"begun","2":"2","3":"0","4":"4.274851"},{"1":"belief","2":"2","3":"0","4":"4.274851"},{"1":"belittle","2":"2","3":"0","4":"4.274851"},{"1":"bet","2":"2","3":"0","4":"4.274851"},{"1":"biden","2":"2","3":"0","4":"4.274851"},{"1":"blamed","2":"2","3":"0","4":"4.274851"},{"1":"blank","2":"2","3":"0","4":"4.274851"},{"1":"bless","2":"2","3":"0","4":"4.274851"},{"1":"blown","2":"2","3":"0","4":"4.274851"},{"1":"bodyguards","2":"2","3":"0","4":"4.274851"},{"1":"borrowing","2":"2","3":"0","4":"4.274851"},{"1":"boss","2":"2","3":"0","4":"4.274851"},{"1":"brady","2":"2","3":"0","4":"4.274851"},{"1":"brain","2":"2","3":"0","4":"4.274851"},{"1":"brave","2":"2","3":"0","4":"4.274851"},{"1":"bright","2":"2","3":"0","4":"4.274851"},{"1":"brithume","2":"2","3":"0","4":"4.274851"},{"1":"burlington","2":"2","3":"0","4":"4.274851"},{"1":"burned","2":"2","3":"0","4":"4.274851"},{"1":"bust","2":"2","3":"0","4":"4.274851"},{"1":"capacity","2":"2","3":"0","4":"4.274851"},{"1":"cards","2":"2","3":"0","4":"4.274851"},{"1":"carpet","2":"2","3":"0","4":"4.274851"},{"1":"carter","2":"2","3":"0","4":"4.274851"},{"1":"challenged","2":"2","3":"0","4":"4.274851"},{"1":"chances","2":"2","3":"0","4":"4.274851"},{"1":"circuited","2":"2","3":"0","4":"4.274851"},{"1":"code","2":"2","3":"0","4":"4.274851"},{"1":"colin","2":"2","3":"0","4":"4.274851"},{"1":"commission","2":"2","3":"0","4":"4.274851"},{"1":"communication","2":"2","3":"0","4":"4.274851"},{"1":"complaints","2":"2","3":"0","4":"4.274851"},{"1":"conduct","2":"2","3":"0","4":"4.274851"},{"1":"considered","2":"2","3":"0","4":"4.274851"},{"1":"controversial","2":"2","3":"0","4":"4.274851"},{"1":"convince","2":"2","3":"0","4":"4.274851"},{"1":"corrected","2":"2","3":"0","4":"4.274851"},{"1":"costs","2":"2","3":"0","4":"4.274851"},{"1":"covering","2":"2","3":"0","4":"4.274851"},{"1":"critical","2":"2","3":"0","4":"4.274851"},{"1":"curiel","2":"2","3":"0","4":"4.274851"},{"1":"current","2":"2","3":"0","4":"4.274851"},{"1":"defeated","2":"2","3":"0","4":"4.274851"},{"1":"deny","2":"2","3":"0","4":"4.274851"},{"1":"depending","2":"2","3":"0","4":"4.274851"},{"1":"deplore","2":"2","3":"0","4":"4.274851"},{"1":"detail","2":"2","3":"0","4":"4.274851"},{"1":"disabilities","2":"2","3":"0","4":"4.274851"},{"1":"disappointed","2":"2","3":"0","4":"4.274851"},{"1":"disrespect","2":"2","3":"0","4":"4.274851"},{"1":"distort","2":"2","3":"0","4":"4.274851"},{"1":"distorted","2":"2","3":"0","4":"4.274851"},{"1":"djt","2":"2","3":"0","4":"4.274851"},{"1":"drawing","2":"2","3":"0","4":"4.274851"},{"1":"dt","2":"2","3":"0","4":"4.274851"},{"1":"dummies","2":"2","3":"0","4":"4.274851"},{"1":"electricity","2":"2","3":"0","4":"4.274851"},{"1":"eleven","2":"2","3":"0","4":"4.274851"},{"1":"eligibility","2":"2","3":"0","4":"4.274851"},{"1":"eligible","2":"2","3":"0","4":"4.274851"},{"1":"enemies","2":"2","3":"0","4":"4.274851"},{"1":"ethic","2":"2","3":"0","4":"4.274851"},{"1":"eve","2":"2","3":"0","4":"4.274851"},{"1":"excitement","2":"2","3":"0","4":"4.274851"},{"1":"expert","2":"2","3":"0","4":"4.274851"},{"1":"expose","2":"2","3":"0","4":"4.274851"},{"1":"express","2":"2","3":"0","4":"4.274851"},{"1":"fabrication","2":"2","3":"0","4":"4.274851"},{"1":"falsely","2":"2","3":"0","4":"4.274851"},{"1":"fat","2":"2","3":"0","4":"4.274851"},{"1":"favorite","2":"2","3":"0","4":"4.274851"},{"1":"fawning","2":"2","3":"0","4":"4.274851"},{"1":"federal","2":"2","3":"0","4":"4.274851"},{"1":"feels","2":"2","3":"0","4":"4.274851"},{"1":"firing","2":"2","3":"0","4":"4.274851"},{"1":"fixed","2":"2","3":"0","4":"4.274851"},{"1":"flags","2":"2","3":"0","4":"4.274851"},{"1":"flake","2":"2","3":"0","4":"4.274851"},{"1":"fools","2":"2","3":"0","4":"4.274851"},{"1":"forming","2":"2","3":"0","4":"4.274851"},{"1":"frontrunner","2":"2","3":"0","4":"4.274851"},{"1":"funeral","2":"2","3":"0","4":"4.274851"},{"1":"fusion","2":"2","3":"0","4":"4.274851"},{"1":"gates","2":"2","3":"0","4":"4.274851"},{"1":"giant","2":"2","3":"0","4":"4.274851"},{"1":"glad","2":"2","3":"0","4":"4.274851"},{"1":"globe","2":"2","3":"0","4":"4.274851"},{"1":"glory","2":"2","3":"0","4":"4.274851"},{"1":"gonzalo","2":"2","3":"0","4":"4.274851"},{"1":"gotcha","2":"2","3":"0","4":"4.274851"},{"1":"govkasich","2":"2","3":"0","4":"4.274851"},{"1":"graydon","2":"2","3":"0","4":"4.274851"},{"1":"gstephanopoulos","2":"2","3":"0","4":"4.274851"},{"1":"guys","2":"2","3":"0","4":"4.274851"},{"1":"haberman","2":"2","3":"0","4":"4.274851"},{"1":"happily","2":"2","3":"0","4":"4.274851"},{"1":"harder","2":"2","3":"0","4":"4.274851"},{"1":"hardest","2":"2","3":"0","4":"4.274851"},{"1":"heavily","2":"2","3":"0","4":"4.274851"},{"1":"heroin","2":"2","3":"0","4":"4.274851"},{"1":"hewitt","2":"2","3":"0","4":"4.274851"},{"1":"holding","2":"2","3":"0","4":"4.274851"},{"1":"hole","2":"2","3":"0","4":"4.274851"},{"1":"hopkins","2":"2","3":"0","4":"4.274851"},{"1":"horrendous","2":"2","3":"0","4":"4.274851"},{"1":"huff","2":"2","3":"0","4":"4.274851"},{"1":"hugh","2":"2","3":"0","4":"4.274851"},{"1":"hundreds","2":"2","3":"0","4":"4.274851"},{"1":"hurting","2":"2","3":"0","4":"4.274851"},{"1":"impressed","2":"2","3":"0","4":"4.274851"},{"1":"incapable","2":"2","3":"0","4":"4.274851"},{"1":"incompetence","2":"2","3":"0","4":"4.274851"},{"1":"incorrectly","2":"2","3":"0","4":"4.274851"},{"1":"innocent","2":"2","3":"0","4":"4.274851"},{"1":"insane","2":"2","3":"0","4":"4.274851"},{"1":"instructed","2":"2","3":"0","4":"4.274851"},{"1":"introduction","2":"2","3":"0","4":"4.274851"},{"1":"isil","2":"2","3":"0","4":"4.274851"},{"1":"jake","2":"2","3":"0","4":"4.274851"},{"1":"kayleigh","2":"2","3":"0","4":"4.274851"},{"1":"keeping","2":"2","3":"0","4":"4.274851"},{"1":"kidding","2":"2","3":"0","4":"4.274851"},{"1":"kurtz","2":"2","3":"0","4":"4.274851"},{"1":"lawsuit","2":"2","3":"0","4":"4.274851"},{"1":"lawsuits","2":"2","3":"0","4":"4.274851"},{"1":"leaked","2":"2","3":"0","4":"4.274851"},{"1":"ledger","2":"2","3":"0","4":"4.274851"},{"1":"letting","2":"2","3":"0","4":"4.274851"},{"1":"liars","2":"2","3":"0","4":"4.274851"},{"1":"lived","2":"2","3":"0","4":"4.274851"},{"1":"livetweeting","2":"2","3":"0","4":"4.274851"},{"1":"longtime","2":"2","3":"0","4":"4.274851"},{"1":"loyal","2":"2","3":"0","4":"4.274851"},{"1":"madeup","2":"2","3":"0","4":"4.274851"},{"1":"maggie","2":"2","3":"0","4":"4.274851"},{"1":"majors","2":"2","3":"0","4":"4.274851"},{"1":"masterminds","2":"2","3":"0","4":"4.274851"},{"1":"math","2":"2","3":"0","4":"4.274851"},{"1":"medicaid","2":"2","3":"0","4":"4.274851"},{"1":"medical","2":"2","3":"0","4":"4.274851"},{"1":"medicare","2":"2","3":"0","4":"4.274851"},{"1":"mental","2":"2","3":"0","4":"4.274851"},{"1":"mentor","2":"2","3":"0","4":"4.274851"},{"1":"messenger","2":"2","3":"0","4":"4.274851"},{"1":"microphone","2":"2","3":"0","4":"4.274851"},{"1":"misleading","2":"2","3":"0","4":"4.274851"},{"1":"mission","2":"2","3":"0","4":"4.274851"},{"1":"mobile","2":"2","3":"0","4":"4.274851"},{"1":"moment","2":"2","3":"0","4":"4.274851"},{"1":"month","2":"2","3":"0","4":"4.274851"},{"1":"names","2":"2","3":"0","4":"4.274851"},{"1":"negatively","2":"2","3":"0","4":"4.274851"},{"1":"newsmax","2":"2","3":"0","4":"4.274851"},{"1":"newspapers","2":"2","3":"0","4":"4.274851"},{"1":"newswashington","2":"2","3":"0","4":"4.274851"},{"1":"nicole","2":"2","3":"0","4":"4.274851"},{"1":"nonsense","2":"2","3":"0","4":"4.274851"},{"1":"norfolk","2":"2","3":"0","4":"4.274851"},{"1":"nuke","2":"2","3":"0","4":"4.274851"},{"1":"oan","2":"2","3":"0","4":"4.274851"},{"1":"obsolete","2":"2","3":"0","4":"4.274851"},{"1":"oclock","2":"2","3":"0","4":"4.274851"},{"1":"odonnell","2":"2","3":"0","4":"4.274851"},{"1":"offer","2":"2","3":"0","4":"4.274851"},{"1":"officially","2":"2","3":"0","4":"4.274851"},{"1":"omalley","2":"2","3":"0","4":"4.274851"},{"1":"openly","2":"2","3":"0","4":"4.274851"},{"1":"orange","2":"2","3":"0","4":"4.274851"},{"1":"original","2":"2","3":"0","4":"4.274851"},{"1":"overdoses","2":"2","3":"0","4":"4.274851"},{"1":"pac","2":"2","3":"0","4":"4.274851"},{"1":"panicked","2":"2","3":"0","4":"4.274851"},{"1":"peggynoonannyc","2":"2","3":"0","4":"4.274851"},{"1":"penchant","2":"2","3":"0","4":"4.274851"},{"1":"percentage","2":"2","3":"0","4":"4.274851"},{"1":"perry","2":"2","3":"0","4":"4.274851"},{"1":"phenomenal","2":"2","3":"0","4":"4.274851"},{"1":"photo","2":"2","3":"0","4":"4.274851"},{"1":"plenty","2":"2","3":"0","4":"4.274851"},{"1":"practically","2":"2","3":"0","4":"4.274851"},{"1":"primetime","2":"2","3":"0","4":"4.274851"},{"1":"pro","2":"2","3":"0","4":"4.274851"},{"1":"professionals","2":"2","3":"0","4":"4.274851"},{"1":"professor","2":"2","3":"0","4":"4.274851"},{"1":"pt","2":"2","3":"0","4":"4.274851"},{"1":"publicity","2":"2","3":"0","4":"4.274851"},{"1":"purposes","2":"2","3":"0","4":"4.274851"},{"1":"quo","2":"2","3":"0","4":"4.274851"},{"1":"recommend","2":"2","3":"0","4":"4.274851"},{"1":"recovered","2":"2","3":"0","4":"4.274851"},{"1":"red","2":"2","3":"0","4":"4.274851"},{"1":"remained","2":"2","3":"0","4":"4.274851"},{"1":"representation","2":"2","3":"0","4":"4.274851"},{"1":"repubs","2":"2","3":"0","4":"4.274851"},{"1":"request","2":"2","3":"0","4":"4.274851"},{"1":"res","2":"2","3":"0","4":"4.274851"},{"1":"ridiculously","2":"2","3":"0","4":"4.274851"},{"1":"rigging","2":"2","3":"0","4":"4.274851"},{"1":"romneywho","2":"2","3":"0","4":"4.274851"},{"1":"rules","2":"2","3":"0","4":"4.274851"},{"1":"russian","2":"2","3":"0","4":"4.274851"},{"1":"scale","2":"2","3":"0","4":"4.274851"},{"1":"scalia","2":"2","3":"0","4":"4.274851"},{"1":"scream","2":"2","3":"0","4":"4.274851"},{"1":"secretly","2":"2","3":"0","4":"4.274851"},{"1":"senators","2":"2","3":"0","4":"4.274851"},{"1":"september","2":"2","3":"0","4":"4.274851"},{"1":"severely","2":"2","3":"0","4":"4.274851"},{"1":"sexism","2":"2","3":"0","4":"4.274851"},{"1":"shoot","2":"2","3":"0","4":"4.274851"},{"1":"slate","2":"2","3":"0","4":"4.274851"},{"1":"sleazy","2":"2","3":"0","4":"4.274851"},{"1":"sloppy","2":"2","3":"0","4":"4.274851"},{"1":"sons","2":"2","3":"0","4":"4.274851"},{"1":"sorts","2":"2","3":"0","4":"4.274851"},{"1":"sound","2":"2","3":"0","4":"4.274851"},{"1":"spin","2":"2","3":"0","4":"4.274851"},{"1":"sports","2":"2","3":"0","4":"4.274851"},{"1":"stacked","2":"2","3":"0","4":"4.274851"},{"1":"stands","2":"2","3":"0","4":"4.274851"},{"1":"starved","2":"2","3":"0","4":"4.274851"},{"1":"steve","2":"2","3":"0","4":"4.274851"},{"1":"stirewalt","2":"2","3":"0","4":"4.274851"},{"1":"stolen","2":"2","3":"0","4":"4.274851"},{"1":"stores","2":"2","3":"0","4":"4.274851"},{"1":"strange","2":"2","3":"0","4":"4.274851"},{"1":"strengthen","2":"2","3":"0","4":"4.274851"},{"1":"stuartpstevens","2":"2","3":"0","4":"4.274851"},{"1":"stuck","2":"2","3":"0","4":"4.274851"},{"1":"suffered","2":"2","3":"0","4":"4.274851"},{"1":"sun","2":"2","3":"0","4":"4.274851"},{"1":"tapper","2":"2","3":"0","4":"4.274851"},{"1":"telepromter","2":"2","3":"0","4":"4.274851"},{"1":"thr","2":"2","3":"0","4":"4.274851"},{"1":"throwing","2":"2","3":"0","4":"4.274851"},{"1":"tournament","2":"2","3":"0","4":"4.274851"},{"1":"triple","2":"2","3":"0","4":"4.274851"},{"1":"tubes","2":"2","3":"0","4":"4.274851"},{"1":"ukraine","2":"2","3":"0","4":"4.274851"},{"1":"unlike","2":"2","3":"0","4":"4.274851"},{"1":"unprofessional","2":"2","3":"0","4":"4.274851"},{"1":"unscheduled","2":"2","3":"0","4":"4.274851"},{"1":"unwatchable","2":"2","3":"0","4":"4.274851"},{"1":"vicente","2":"2","3":"0","4":"4.274851"},{"1":"view","2":"2","3":"0","4":"4.274851"},{"1":"washingtonpost","2":"2","3":"0","4":"4.274851"},{"1":"weapons","2":"2","3":"0","4":"4.274851"},{"1":"weird","2":"2","3":"0","4":"4.274851"},{"1":"wh","2":"2","3":"0","4":"4.274851"},{"1":"ya","2":"2","3":"0","4":"4.274851"},{"1":"boring","2":"16","3":"3","4":"4.033195"},{"1":"dems","2":"16","3":"3","4":"4.033195"},{"1":"energy","2":"16","3":"3","4":"4.033195"},{"1":"careful","2":"11","3":"2","4":"3.934486"},{"1":"policy","2":"11","3":"2","4":"3.934486"},{"1":"speaking","2":"11","3":"2","4":"3.934486"},{"1":"vets","2":"11","3":"2","4":"3.934486"},{"1":"mitt","2":"20","3":"4","4":"3.898082"},{"1":"wrong","2":"24","3":"5","4":"3.812319"},{"1":"bernie","2":"59","3":"13","4":"3.777993"},{"1":"sanders","2":"37","3":"8","4":"3.777932"},{"1":"created","2":"6","3":"1","4":"3.705520"},{"1":"hate","2":"6","3":"1","4":"3.705520"},{"1":"hotel","2":"6","3":"1","4":"3.705520"},{"1":"illegals","2":"6","3":"1","4":"3.705520"},{"1":"megyn","2":"6","3":"1","4":"3.705520"},{"1":"star","2":"6","3":"1","4":"3.705520"},{"1":"strongly","2":"6","3":"1","4":"3.705520"},{"1":"tim","2":"6","3":"1","4":"3.705520"},{"1":"virtually","2":"6","3":"1","4":"3.705520"},{"1":"weak","2":"36","3":"8","4":"3.676959"},{"1":"@morningjoe","2":"23","3":"5","4":"3.656488"},{"1":"fortune","2":"10","3":"2","4":"3.592134"},{"1":"husband","2":"10","3":"2","4":"3.592134"},{"1":"iraq","2":"10","3":"2","4":"3.592134"},{"1":"release","2":"10","3":"2","4":"3.592134"},{"1":"treated","2":"10","3":"2","4":"3.592134"},{"1":"@jebbush","2":"14","3":"3","4":"3.543884"},{"1":"dumb","2":"22","3":"5","4":"3.500675"},{"1":"hit","2":"22","3":"5","4":"3.500675"},{"1":"bad","2":"104","3":"26","4":"3.386534"},{"1":"women","2":"29","3":"7","4":"3.366808"},{"1":"ago","2":"17","3":"4","4":"3.327012"},{"1":"announced","2":"17","3":"4","4":"3.327012"},{"1":"fast","2":"17","3":"4","4":"3.327012"},{"1":"sad","2":"44","3":"11","4":"3.314349"},{"1":"beat","2":"40","3":"10","4":"3.303128"},{"1":"dollars","2":"13","3":"3","4":"3.299273"},{"1":"speak","2":"13","3":"3","4":"3.299273"},{"1":"brought","2":"9","3":"2","4":"3.249825"},{"1":"dope","2":"9","3":"2","4":"3.249825"},{"1":"lindsey","2":"9","3":"2","4":"3.249825"},{"1":"republicans","2":"9","3":"2","4":"3.249825"},{"1":"wild","2":"9","3":"2","4":"3.249825"},{"1":"won","2":"50","3":"13","4":"3.204739"},{"1":"terrible","2":"31","3":"8","4":"3.172281"},{"1":"@time","2":"5","3":"1","4":"3.135246"},{"1":"absolutely","2":"5","3":"1","4":"3.135246"},{"1":"anchor","2":"5","3":"1","4":"3.135246"},{"1":"banks","2":"5","3":"1","4":"3.135246"},{"1":"boycott","2":"5","3":"1","4":"3.135246"},{"1":"buy","2":"5","3":"1","4":"3.135246"},{"1":"criminals","2":"5","3":"1","4":"3.135246"},{"1":"decisions","2":"5","3":"1","4":"3.135246"},{"1":"director","2":"5","3":"1","4":"3.135246"},{"1":"eyes","2":"5","3":"1","4":"3.135246"},{"1":"fiorina","2":"5","3":"1","4":"3.135246"},{"1":"folks","2":"5","3":"1","4":"3.135246"},{"1":"heart","2":"5","3":"1","4":"3.135246"},{"1":"journal","2":"5","3":"1","4":"3.135246"},{"1":"karlrove","2":"5","3":"1","4":"3.135246"},{"1":"mccain","2":"5","3":"1","4":"3.135246"},{"1":"megynkelly","2":"5","3":"1","4":"3.135246"},{"1":"nato","2":"5","3":"1","4":"3.135246"},{"1":"paris","2":"5","3":"1","4":"3.135246"},{"1":"performance","2":"5","3":"1","4":"3.135246"},{"1":"referred","2":"5","3":"1","4":"3.135246"},{"1":"rove","2":"5","3":"1","4":"3.135246"},{"1":"scam","2":"5","3":"1","4":"3.135246"},{"1":"standing","2":"5","3":"1","4":"3.135246"},{"1":"unable","2":"5","3":"1","4":"3.135246"},{"1":"womens","2":"5","3":"1","4":"3.135246"},{"1":"talk","2":"30","3":"8","4":"3.071383"},{"1":"2nd","2":"12","3":"3","4":"3.054693"},{"1":"clue","2":"12","3":"3","4":"3.054693"},{"1":"correct","2":"12","3":"3","4":"3.054693"},{"1":"killing","2":"12","3":"3","4":"3.054693"},{"1":"lie","2":"12","3":"3","4":"3.054693"},{"1":"iran","2":"19","3":"5","4":"3.033354"},{"1":"fantastic","2":"33","3":"9","4":"3.018726"},{"1":"crowds","2":"22","3":"6","4":"2.961895"},{"1":"fair","2":"15","3":"4","4":"2.946416"},{"1":"ready","2":"15","3":"4","4":"2.946416"},{"1":"wallace","2":"15","3":"4","4":"2.946416"},{"1":"beating","2":"8","3":"2","4":"2.907558"},{"1":"court","2":"8","3":"2","4":"2.907558"},{"1":"democratic","2":"8","3":"2","4":"2.907558"},{"1":"drop","2":"8","3":"2","4":"2.907558"},{"1":"pocahontas","2":"8","3":"2","4":"2.907558"},{"1":"speeches","2":"8","3":"2","4":"2.907558"},{"1":"tough","2":"28","3":"8","4":"2.869625"},{"1":"smart","2":"31","3":"9","4":"2.838151"},{"1":"convention","2":"21","3":"6","4":"2.830080"},{"1":"biggest","2":"11","3":"3","4":"2.810144"},{"1":"easily","2":"11","3":"3","4":"2.810144"},{"1":"focus","2":"11","3":"3","4":"2.810144"},{"1":"happen","2":"11","3":"3","4":"2.810144"},{"1":"russia","2":"11","3":"3","4":"2.810144"},{"1":"jeb","2":"50","3":"15","4":"2.790819"},{"1":"strong","2":"27","3":"8","4":"2.768765"},{"1":"fraud","2":"14","3":"4","4":"2.756154"},{"1":"total","2":"52","3":"16","4":"2.725648"},{"1":"crooked","2":"156","3":"49","4":"2.719435"},{"1":"wow","2":"74","3":"23","4":"2.718044"},{"1":"biased","2":"23","3":"7","4":"2.681036"},{"1":"romney","2":"23","3":"7","4":"2.681036"},{"1":"trade","2":"23","3":"7","4":"2.681036"},{"1":"millions","2":"26","3":"8","4":"2.667917"},{"1":"yesterday","2":"26","3":"8","4":"2.667917"},{"1":"interviewed","2":"76","3":"25","4":"2.572055"},{"1":"media","2":"76","3":"25","4":"2.572055"},{"1":"watching","2":"28","3":"9","4":"2.567373"},{"1":"talking","2":"25","3":"8","4":"2.567081"},{"1":"call","2":"19","3":"6","4":"2.566498"},{"1":"fix","2":"19","3":"6","4":"2.566498"},{"1":"borders","2":"16","3":"5","4":"2.566207"},{"1":"word","2":"16","3":"5","4":"2.566207"},{"1":"mike","2":"13","3":"4","4":"2.565916"},{"1":"@meetthepress","2":"10","3":"3","4":"2.565624"},{"1":"city","2":"10","3":"3","4":"2.565624"},{"1":"debates","2":"10","3":"3","4":"2.565624"},{"1":"editorial","2":"10","3":"3","4":"2.565624"},{"1":"magazine","2":"10","3":"3","4":"2.565624"},{"1":"spirit","2":"10","3":"3","4":"2.565624"},{"1":"@morningmika","2":"7","3":"2","4":"2.565333"},{"1":"@todayshow","2":"7","3":"2","4":"2.565333"},{"1":"clown","2":"7","3":"2","4":"2.565333"},{"1":"continue","2":"7","3":"2","4":"2.565333"},{"1":"cover","2":"7","3":"2","4":"2.565333"},{"1":"don","2":"7","3":"2","4":"2.565333"},{"1":"question","2":"7","3":"2","4":"2.565333"},{"1":"scotland","2":"7","3":"2","4":"2.565333"},{"1":"thugs","2":"7","3":"2","4":"2.565333"},{"1":"@macys","2":"4","3":"1","4":"2.565042"},{"1":"advertising","2":"4","3":"1","4":"2.565042"},{"1":"africanamerican","2":"4","3":"1","4":"2.565042"},{"1":"africanamericans","2":"4","3":"1","4":"2.565042"},{"1":"announce","2":"4","3":"1","4":"2.565042"},{"1":"begins","2":"4","3":"1","4":"2.565042"},{"1":"believes","2":"4","3":"1","4":"2.565042"},{"1":"blew","2":"4","3":"1","4":"2.565042"},{"1":"brussels","2":"4","3":"1","4":"2.565042"},{"1":"carly","2":"4","3":"1","4":"2.565042"},{"1":"chosen","2":"4","3":"1","4":"2.565042"},{"1":"church","2":"4","3":"1","4":"2.565042"},{"1":"constant","2":"4","3":"1","4":"2.565042"},{"1":"destruction","2":"4","3":"1","4":"2.565042"},{"1":"difference","2":"4","3":"1","4":"2.565042"},{"1":"endorse","2":"4","3":"1","4":"2.565042"},{"1":"fairly","2":"4","3":"1","4":"2.565042"},{"1":"falling","2":"4","3":"1","4":"2.565042"},{"1":"figure","2":"4","3":"1","4":"2.565042"},{"1":"file","2":"4","3":"1","4":"2.565042"},{"1":"imagine","2":"4","3":"1","4":"2.565042"},{"1":"international","2":"4","3":"1","4":"2.565042"},{"1":"investigation","2":"4","3":"1","4":"2.565042"},{"1":"karl","2":"4","3":"1","4":"2.565042"},{"1":"kelly","2":"4","3":"1","4":"2.565042"},{"1":"line","2":"4","3":"1","4":"2.565042"},{"1":"losers","2":"4","3":"1","4":"2.565042"},{"1":"margin","2":"4","3":"1","4":"2.565042"},{"1":"networks","2":"4","3":"1","4":"2.565042"},{"1":"nominee","2":"4","3":"1","4":"2.565042"},{"1":"opponents","2":"4","3":"1","4":"2.565042"},{"1":"paying","2":"4","3":"1","4":"2.565042"},{"1":"quickly","2":"4","3":"1","4":"2.565042"},{"1":"racist","2":"4","3":"1","4":"2.565042"},{"1":"rated","2":"4","3":"1","4":"2.565042"},{"1":"rick","2":"4","3":"1","4":"2.565042"},{"1":"shootings","2":"4","3":"1","4":"2.565042"},{"1":"solve","2":"4","3":"1","4":"2.565042"},{"1":"stuff","2":"4","3":"1","4":"2.565042"},{"1":"talent","2":"4","3":"1","4":"2.565042"},{"1":"theyre","2":"4","3":"1","4":"2.565042"},{"1":"tougher","2":"4","3":"1","4":"2.565042"},{"1":"wages","2":"4","3":"1","4":"2.565042"},{"1":"wasting","2":"4","3":"1","4":"2.565042"},{"1":"wide","2":"4","3":"1","4":"2.565042"},{"1":"@722","2":"1","3":"0","4":"2.564751"},{"1":"@abcnewswashingtonpost","2":"1","3":"0","4":"2.564751"},{"1":"@abcpolitics","2":"1","3":"0","4":"2.564751"},{"1":"@alwaleedbint","2":"1","3":"0","4":"2.564751"},{"1":"@andreatantaros","2":"1","3":"0","4":"2.564751"},{"1":"@anncoulter","2":"1","3":"0","4":"2.564751"},{"1":"@charleshurt","2":"1","3":"0","4":"2.564751"},{"1":"@danaperino","2":"1","3":"0","4":"2.564751"},{"1":"@davidaxelrod","2":"1","3":"0","4":"2.564751"},{"1":"@fortunemagazine","2":"1","3":"0","4":"2.564751"},{"1":"@foxbizalert","2":"1","3":"0","4":"2.564751"},{"1":"@genflynn","2":"1","3":"0","4":"2.564751"},{"1":"@georgewill","2":"1","3":"0","4":"2.564751"},{"1":"@georgezwill","2":"1","3":"0","4":"2.564751"},{"1":"@golfchannel","2":"1","3":"0","4":"2.564751"},{"1":"@governorperry","2":"1","3":"0","4":"2.564751"},{"1":"@heytana","2":"1","3":"0","4":"2.564751"},{"1":"@hughhewitt","2":"1","3":"0","4":"2.564751"},{"1":"@jacknicklaus","2":"1","3":"0","4":"2.564751"},{"1":"@jeffflake","2":"1","3":"0","4":"2.564751"},{"1":"@jmartnyt","2":"1","3":"0","4":"2.564751"},{"1":"@joetrippi","2":"1","3":"0","4":"2.564751"},{"1":"@johnkasich","2":"1","3":"0","4":"2.564751"},{"1":"@kellyriddell","2":"1","3":"0","4":"2.564751"},{"1":"@kilmeade","2":"1","3":"0","4":"2.564751"},{"1":"@ktmcfarland","2":"1","3":"0","4":"2.564751"},{"1":"@mariatcardona","2":"1","3":"0","4":"2.564751"},{"1":"@markhalperin","2":"1","3":"0","4":"2.564751"},{"1":"@marthamaccallum","2":"1","3":"0","4":"2.564751"},{"1":"@mikeozanian","2":"1","3":"0","4":"2.564751"},{"1":"@montgomeriefdn","2":"1","3":"0","4":"2.564751"},{"1":"@morningsmaria","2":"1","3":"0","4":"2.564751"},{"1":"@nascar","2":"1","3":"0","4":"2.564751"},{"1":"@nbcpolitics","2":"1","3":"0","4":"2.564751"},{"1":"@netanyahu","2":"1","3":"0","4":"2.564751"},{"1":"@newtgingrich","2":"1","3":"0","4":"2.564751"},{"1":"@nytimesworld","2":"1","3":"0","4":"2.564751"},{"1":"@pastormarkburns","2":"1","3":"0","4":"2.564751"},{"1":"@realsheriffjoe","2":"1","3":"0","4":"2.564751"},{"1":"@rondarousey","2":"1","3":"0","4":"2.564751"},{"1":"@serenawilliams","2":"1","3":"0","4":"2.564751"},{"1":"@talkersmagazine","2":"1","3":"0","4":"2.564751"},{"1":"@theeconomist","2":"1","3":"0","4":"2.564751"},{"1":"@thefive","2":"1","3":"0","4":"2.564751"},{"1":"@therickwilson","2":"1","3":"0","4":"2.564751"},{"1":"@thetodaysgolfer","2":"1","3":"0","4":"2.564751"},{"1":"@tmobile","2":"1","3":"0","4":"2.564751"},{"1":"@today","2":"1","3":"0","4":"2.564751"},{"1":"@tperkins","2":"1","3":"0","4":"2.564751"},{"1":"@trump","2":"1","3":"0","4":"2.564751"},{"1":"#amazon","2":"1","3":"0","4":"2.564751"},{"1":"#failingnytimes","2":"1","3":"0","4":"2.564751"},{"1":"#harveypitt","2":"1","3":"0","4":"2.564751"},{"1":"#joetheismann","2":"1","3":"0","4":"2.564751"},{"1":"#laurence","2":"1","3":"0","4":"2.564751"},{"1":"#laurencetribe","2":"1","3":"0","4":"2.564751"},{"1":"#media","2":"1","3":"0","4":"2.564751"},{"1":"#mediafraud","2":"1","3":"0","4":"2.564751"},{"1":"#nevertrump","2":"1","3":"0","4":"2.564751"},{"1":"#repmikekelly","2":"1","3":"0","4":"2.564751"},{"1":"#ted","2":"1","3":"0","4":"2.564751"},{"1":"#tedcruz","2":"1","3":"0","4":"2.564751"},{"1":"$$$$","2":"1","3":"0","4":"2.564751"},{"1":"$120000","2":"1","3":"0","4":"2.564751"},{"1":"$13","2":"1","3":"0","4":"2.564751"},{"1":"$150000000","2":"1","3":"0","4":"2.564751"},{"1":"$200","2":"1","3":"0","4":"2.564751"},{"1":"$20000","2":"1","3":"0","4":"2.564751"},{"1":"$200000","2":"1","3":"0","4":"2.564751"},{"1":"$3000000","2":"1","3":"0","4":"2.564751"},{"1":"$35000000","2":"1","3":"0","4":"2.564751"},{"1":"$40000000","2":"1","3":"0","4":"2.564751"},{"1":"$5000","2":"1","3":"0","4":"2.564751"},{"1":"$63000000","2":"1","3":"0","4":"2.564751"},{"1":"$67","2":"1","3":"0","4":"2.564751"},{"1":"$80","2":"1","3":"0","4":"2.564751"},{"1":"$89","2":"1","3":"0","4":"2.564751"},{"1":"$millions","2":"1","3":"0","4":"2.564751"},{"1":"10o0","2":"1","3":"0","4":"2.564751"},{"1":"16apologize","2":"1","3":"0","4":"2.564751"},{"1":"1for","2":"1","3":"0","4":"2.564751"},{"1":"1million","2":"1","3":"0","4":"2.564751"},{"1":"1oo","2":"1","3":"0","4":"2.564751"},{"1":"21points","2":"1","3":"0","4":"2.564751"},{"1":"2m","2":"1","3":"0","4":"2.564751"},{"1":"41to14","2":"1","3":"0","4":"2.564751"},{"1":"73o","2":"1","3":"0","4":"2.564751"},{"1":"7533692a","2":"1","3":"0","4":"2.564751"},{"1":"8646551trumps","2":"1","3":"0","4":"2.564751"},{"1":"900am","2":"1","3":"0","4":"2.564751"},{"1":"9th","2":"1","3":"0","4":"2.564751"},{"1":"abdeslam","2":"1","3":"0","4":"2.564751"},{"1":"abilityzilch","2":"1","3":"0","4":"2.564751"},{"1":"absentee","2":"1","3":"0","4":"2.564751"},{"1":"abu","2":"1","3":"0","4":"2.564751"},{"1":"abuse","2":"1","3":"0","4":"2.564751"},{"1":"abused","2":"1","3":"0","4":"2.564751"},{"1":"abuser","2":"1","3":"0","4":"2.564751"},{"1":"ac","2":"1","3":"0","4":"2.564751"},{"1":"acceptable","2":"1","3":"0","4":"2.564751"},{"1":"accomplished","2":"1","3":"0","4":"2.564751"},{"1":"accurately","2":"1","3":"0","4":"2.564751"},{"1":"accused","2":"1","3":"0","4":"2.564751"},{"1":"acidwash","2":"1","3":"0","4":"2.564751"},{"1":"acted","2":"1","3":"0","4":"2.564751"},{"1":"actionit","2":"1","3":"0","4":"2.564751"},{"1":"add","2":"1","3":"0","4":"2.564751"},{"1":"adding","2":"1","3":"0","4":"2.564751"},{"1":"additionally","2":"1","3":"0","4":"2.564751"},{"1":"adelson","2":"1","3":"0","4":"2.564751"},{"1":"administrationa","2":"1","3":"0","4":"2.564751"},{"1":"adv","2":"1","3":"0","4":"2.564751"},{"1":"advertisers","2":"1","3":"0","4":"2.564751"},{"1":"advise","2":"1","3":"0","4":"2.564751"},{"1":"advocate","2":"1","3":"0","4":"2.564751"},{"1":"afghanistan","2":"1","3":"0","4":"2.564751"},{"1":"againhe","2":"1","3":"0","4":"2.564751"},{"1":"againjeb","2":"1","3":"0","4":"2.564751"},{"1":"age","2":"1","3":"0","4":"2.564751"},{"1":"aide","2":"1","3":"0","4":"2.564751"},{"1":"aig","2":"1","3":"0","4":"2.564751"},{"1":"ailsa","2":"1","3":"0","4":"2.564751"},{"1":"airbus","2":"1","3":"0","4":"2.564751"},{"1":"aired","2":"1","3":"0","4":"2.564751"},{"1":"airwaves","2":"1","3":"0","4":"2.564751"},{"1":"akbar","2":"1","3":"0","4":"2.564751"},{"1":"albaghdad","2":"1","3":"0","4":"2.564751"},{"1":"alec","2":"1","3":"0","4":"2.564751"},{"1":"ali","2":"1","3":"0","4":"2.564751"},{"1":"alisa","2":"1","3":"0","4":"2.564751"},{"1":"alisyn","2":"1","3":"0","4":"2.564751"},{"1":"alive","2":"1","3":"0","4":"2.564751"},{"1":"allah","2":"1","3":"0","4":"2.564751"},{"1":"allen","2":"1","3":"0","4":"2.564751"},{"1":"alliance","2":"1","3":"0","4":"2.564751"},{"1":"allure","2":"1","3":"0","4":"2.564751"},{"1":"alongno","2":"1","3":"0","4":"2.564751"},{"1":"alshabbab","2":"1","3":"0","4":"2.564751"},{"1":"amazed","2":"1","3":"0","4":"2.564751"},{"1":"amazes","2":"1","3":"0","4":"2.564751"},{"1":"amazingly","2":"1","3":"0","4":"2.564751"},{"1":"ambitious","2":"1","3":"0","4":"2.564751"},{"1":"amnever","2":"1","3":"0","4":"2.564751"},{"1":"andrebauer","2":"1","3":"0","4":"2.564751"},{"1":"angel","2":"1","3":"0","4":"2.564751"},{"1":"animals","2":"1","3":"0","4":"2.564751"},{"1":"anncoulter","2":"1","3":"0","4":"2.564751"},{"1":"announcedby","2":"1","3":"0","4":"2.564751"},{"1":"announcing","2":"1","3":"0","4":"2.564751"},{"1":"anonymous","2":"1","3":"0","4":"2.564751"},{"1":"antics","2":"1","3":"0","4":"2.564751"},{"1":"antonin","2":"1","3":"0","4":"2.564751"},{"1":"anymorethey","2":"1","3":"0","4":"2.564751"},{"1":"anytime","2":"1","3":"0","4":"2.564751"},{"1":"apologetic","2":"1","3":"0","4":"2.564751"},{"1":"apparel","2":"1","3":"0","4":"2.564751"},{"1":"appearance","2":"1","3":"0","4":"2.564751"},{"1":"applied","2":"1","3":"0","4":"2.564751"},{"1":"applies","2":"1","3":"0","4":"2.564751"},{"1":"appointed","2":"1","3":"0","4":"2.564751"},{"1":"appointments","2":"1","3":"0","4":"2.564751"},{"1":"approve","2":"1","3":"0","4":"2.564751"},{"1":"arranged","2":"1","3":"0","4":"2.564751"},{"1":"arrival","2":"1","3":"0","4":"2.564751"},{"1":"articles","2":"1","3":"0","4":"2.564751"},{"1":"asheville","2":"1","3":"0","4":"2.564751"},{"1":"ass","2":"1","3":"0","4":"2.564751"},{"1":"assaulting","2":"1","3":"0","4":"2.564751"},{"1":"assetsthe","2":"1","3":"0","4":"2.564751"},{"1":"assume","2":"1","3":"0","4":"2.564751"},{"1":"assure","2":"1","3":"0","4":"2.564751"},{"1":"at1","2":"1","3":"0","4":"2.564751"},{"1":"ate","2":"1","3":"0","4":"2.564751"},{"1":"atheist","2":"1","3":"0","4":"2.564751"},{"1":"attitudea","2":"1","3":"0","4":"2.564751"},{"1":"attracting","2":"1","3":"0","4":"2.564751"},{"1":"audio","2":"1","3":"0","4":"2.564751"},{"1":"auditorium","2":"1","3":"0","4":"2.564751"},{"1":"authentic","2":"1","3":"0","4":"2.564751"},{"1":"author","2":"1","3":"0","4":"2.564751"},{"1":"authorities","2":"1","3":"0","4":"2.564751"},{"1":"avenue","2":"1","3":"0","4":"2.564751"},{"1":"awake","2":"1","3":"0","4":"2.564751"},{"1":"awaythe","2":"1","3":"0","4":"2.564751"},{"1":"awkward","2":"1","3":"0","4":"2.564751"},{"1":"backbone","2":"1","3":"0","4":"2.564751"},{"1":"backfired","2":"1","3":"0","4":"2.564751"},{"1":"backup","2":"1","3":"0","4":"2.564751"},{"1":"badgering","2":"1","3":"0","4":"2.564751"},{"1":"baghdad","2":"1","3":"0","4":"2.564751"},{"1":"bake","2":"1","3":"0","4":"2.564751"},{"1":"balancing","2":"1","3":"0","4":"2.564751"},{"1":"baldwin","2":"1","3":"0","4":"2.564751"},{"1":"ballroom","2":"1","3":"0","4":"2.564751"},{"1":"bandits","2":"1","3":"0","4":"2.564751"},{"1":"bangladesh","2":"1","3":"0","4":"2.564751"},{"1":"bankrupt","2":"1","3":"0","4":"2.564751"},{"1":"bankruptcies","2":"1","3":"0","4":"2.564751"},{"1":"banned","2":"1","3":"0","4":"2.564751"},{"1":"bannon","2":"1","3":"0","4":"2.564751"},{"1":"barack","2":"1","3":"0","4":"2.564751"},{"1":"barbaro","2":"1","3":"0","4":"2.564751"},{"1":"barrasso","2":"1","3":"0","4":"2.564751"},{"1":"barrel","2":"1","3":"0","4":"2.564751"},{"1":"barry","2":"1","3":"0","4":"2.564751"},{"1":"base","2":"1","3":"0","4":"2.564751"},{"1":"bashers","2":"1","3":"0","4":"2.564751"},{"1":"basketcase","2":"1","3":"0","4":"2.564751"},{"1":"battleship","2":"1","3":"0","4":"2.564751"},{"1":"beans","2":"1","3":"0","4":"2.564751"},{"1":"beats","2":"1","3":"0","4":"2.564751"},{"1":"beauty","2":"1","3":"0","4":"2.564751"},{"1":"begala","2":"1","3":"0","4":"2.564751"},{"1":"believable","2":"1","3":"0","4":"2.564751"},{"1":"beloved","2":"1","3":"0","4":"2.564751"},{"1":"bensasse","2":"1","3":"0","4":"2.564751"},{"1":"bernardgoldberg","2":"1","3":"0","4":"2.564751"},{"1":"berniesanderswho","2":"1","3":"0","4":"2.564751"},{"1":"beware","2":"1","3":"0","4":"2.564751"},{"1":"biasedhates","2":"1","3":"0","4":"2.564751"},{"1":"biasedthey","2":"1","3":"0","4":"2.564751"},{"1":"bigif","2":"1","3":"0","4":"2.564751"},{"1":"bikers","2":"1","3":"0","4":"2.564751"},{"1":"billkristol","2":"1","3":"0","4":"2.564751"},{"1":"billmaher","2":"1","3":"0","4":"2.564751"},{"1":"binding","2":"1","3":"0","4":"2.564751"},{"1":"birth","2":"1","3":"0","4":"2.564751"},{"1":"birther","2":"1","3":"0","4":"2.564751"},{"1":"births","2":"1","3":"0","4":"2.564751"},{"1":"blame","2":"1","3":"0","4":"2.564751"},{"1":"blames","2":"1","3":"0","4":"2.564751"},{"1":"bleeding","2":"1","3":"0","4":"2.564751"},{"1":"blowup","2":"1","3":"0","4":"2.564751"},{"1":"bludgeoning","2":"1","3":"0","4":"2.564751"},{"1":"body","2":"1","3":"0","4":"2.564751"},{"1":"bomber","2":"1","3":"0","4":"2.564751"},{"1":"bombshell","2":"1","3":"0","4":"2.564751"},{"1":"booed","2":"1","3":"0","4":"2.564751"},{"1":"booths","2":"1","3":"0","4":"2.564751"},{"1":"bore","2":"1","3":"0","4":"2.564751"},{"1":"borisep","2":"1","3":"0","4":"2.564751"},{"1":"borrow","2":"1","3":"0","4":"2.564751"},{"1":"bossesi","2":"1","3":"0","4":"2.564751"},{"1":"boxer","2":"1","3":"0","4":"2.564751"},{"1":"boycotting","2":"1","3":"0","4":"2.564751"},{"1":"brainpower","2":"1","3":"0","4":"2.564751"},{"1":"brainwashed","2":"1","3":"0","4":"2.564751"},{"1":"brat","2":"1","3":"0","4":"2.564751"},{"1":"breakdown","2":"1","3":"0","4":"2.564751"},{"1":"breast","2":"1","3":"0","4":"2.564751"},{"1":"breathe","2":"1","3":"0","4":"2.564751"},{"1":"brigid","2":"1","3":"0","4":"2.564751"},{"1":"broadcast","2":"1","3":"0","4":"2.564751"},{"1":"broadcasting","2":"1","3":"0","4":"2.564751"},{"1":"broadway","2":"1","3":"0","4":"2.564751"},{"1":"brokesaid","2":"1","3":"0","4":"2.564751"},{"1":"brookslawbrooks","2":"1","3":"0","4":"2.564751"},{"1":"buchanan","2":"1","3":"0","4":"2.564751"},{"1":"buffoon","2":"1","3":"0","4":"2.564751"},{"1":"builds","2":"1","3":"0","4":"2.564751"},{"1":"burning","2":"1","3":"0","4":"2.564751"},{"1":"bury","2":"1","3":"0","4":"2.564751"},{"1":"burying","2":"1","3":"0","4":"2.564751"},{"1":"bus","2":"1","3":"0","4":"2.564751"},{"1":"bushbut","2":"1","3":"0","4":"2.564751"},{"1":"businessman","2":"1","3":"0","4":"2.564751"},{"1":"buyers","2":"1","3":"0","4":"2.564751"},{"1":"byrne","2":"1","3":"0","4":"2.564751"},{"1":"byronyork","2":"1","3":"0","4":"2.564751"},{"1":"cable","2":"1","3":"0","4":"2.564751"},{"1":"caesars","2":"1","3":"0","4":"2.564751"},{"1":"cake","2":"1","3":"0","4":"2.564751"},{"1":"cal","2":"1","3":"0","4":"2.564751"},{"1":"callins","2":"1","3":"0","4":"2.564751"},{"1":"calm","2":"1","3":"0","4":"2.564751"},{"1":"camerota","2":"1","3":"0","4":"2.564751"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>and the top for iPhone:</p>
<pre class="r"><code>android_iphone_or %&gt;% arrange(or)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["word"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Android"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["iPhone"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["or"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"#makeamericagreatagain","2":"0","3":"294","4":"0.001420463"},{"1":"#americafirst","2":"0","3":"71","4":"0.005947316"},{"1":"#draintheswamp","2":"0","3":"63","4":"0.006700486"},{"1":"#trump2016","2":"3","3":"411","4":"0.007055789"},{"1":"#votetrump","2":"0","3":"56","4":"0.007534472"},{"1":"join","2":"1","3":"157","4":"0.008049441"},{"1":"#imwithyou","2":"0","3":"51","4":"0.008268981"},{"1":"#crookedhillary","2":"0","3":"30","4":"0.013983703"},{"1":"#fitn","2":"0","3":"30","4":"0.013983703"},{"1":"#gopdebate","2":"0","3":"30","4":"0.013983703"},{"1":"#trumppence16","2":"0","3":"28","4":"0.014967188"},{"1":"7pm","2":"0","3":"23","4":"0.018158286"},{"1":"#bigleaguetruth","2":"0","3":"22","4":"0.018966698"},{"1":"#iacaucus","2":"0","3":"21","4":"0.019850311"},{"1":"officers","2":"0","3":"21","4":"0.019850311"},{"1":"#icymi","2":"0","3":"20","4":"0.020820129"},{"1":"3pm","2":"0","3":"19","4":"0.021889416"},{"1":"#trumptrain","2":"0","3":"18","4":"0.023074302"},{"1":"@mikepence","2":"0","3":"17","4":"0.024394604"},{"1":"#supertuesday","2":"0","3":"16","4":"0.025874942"},{"1":"tune","2":"0","3":"16","4":"0.025874942"},{"1":"#vpdebate","2":"0","3":"12","4":"0.034164834"},{"1":"#wiprimary","2":"0","3":"12","4":"0.034164834"},{"1":"rapids","2":"0","3":"12","4":"0.034164834"},{"1":"6pm","2":"0","3":"11","4":"0.037138383"},{"1":"received","2":"0","3":"11","4":"0.037138383"},{"1":"wikileaks","2":"0","3":"11","4":"0.037138383"},{"1":"@ivankatrump","2":"0","3":"10","4":"0.040678321"},{"1":"#caucusfortrump","2":"0","3":"10","4":"0.040678321"},{"1":"#inprimary","2":"0","3":"10","4":"0.040678321"},{"1":"#obamacare","2":"0","3":"10","4":"0.040678321"},{"1":"#rncincle","2":"0","3":"10","4":"0.040678321"},{"1":"@erictrump","2":"0","3":"9","4":"0.044963510"},{"1":"#votetrumpsc","2":"0","3":"9","4":"0.044963510"},{"1":"8pm","2":"0","3":"9","4":"0.044963510"},{"1":"departing","2":"0","3":"9","4":"0.044963510"},{"1":"fl","2":"0","3":"9","4":"0.044963510"},{"1":"pa","2":"0","3":"9","4":"0.044963510"},{"1":"st","2":"0","3":"9","4":"0.044963510"},{"1":"@donaldjtrumpjr","2":"0","3":"8","4":"0.050256978"},{"1":"#debatenight","2":"0","3":"8","4":"0.050256978"},{"1":"#debates","2":"0","3":"8","4":"0.050256978"},{"1":"#nyprimary","2":"0","3":"8","4":"0.050256978"},{"1":"#votetrumpnh","2":"0","3":"8","4":"0.050256978"},{"1":"finder","2":"0","3":"8","4":"0.050256978"},{"1":"hillaryclinton","2":"0","3":"8","4":"0.050256978"},{"1":"illinois","2":"0","3":"8","4":"0.050256978"},{"1":"means","2":"0","3":"8","4":"0.050256978"},{"1":"#nhprimary","2":"0","3":"7","4":"0.056962038"},{"1":"#obamacarefail","2":"0","3":"7","4":"0.056962038"},{"1":"10pm","2":"0","3":"7","4":"0.056962038"},{"1":"730pm","2":"0","3":"7","4":"0.056962038"},{"1":"bc","2":"0","3":"7","4":"0.056962038"},{"1":"delaware","2":"0","3":"7","4":"0.056962038"},{"1":"est","2":"0","3":"7","4":"0.056962038"},{"1":"pittsburgh","2":"0","3":"7","4":"0.056962038"},{"1":"signing","2":"0","3":"7","4":"0.056962038"},{"1":"transcript","2":"0","3":"7","4":"0.056962038"},{"1":"values","2":"0","3":"7","4":"0.056962038"},{"1":"#maga","2":"5","3":"71","4":"0.065440740"},{"1":"#debate","2":"0","3":"6","4":"0.065730194"},{"1":"#isis","2":"0","3":"6","4":"0.065730194"},{"1":"#lesm","2":"0","3":"6","4":"0.065730194"},{"1":"#potus","2":"0","3":"6","4":"0.065730194"},{"1":"#votetrump2016","2":"0","3":"6","4":"0.065730194"},{"1":"#votetrumppence16","2":"0","3":"6","4":"0.065730194"},{"1":"7pme","2":"0","3":"6","4":"0.065730194"},{"1":"choker","2":"0","3":"6","4":"0.065730194"},{"1":"columbus","2":"0","3":"6","4":"0.065730194"},{"1":"denver","2":"0","3":"6","4":"0.065730194"},{"1":"foundation","2":"0","3":"6","4":"0.065730194"},{"1":"ia","2":"0","3":"6","4":"0.065730194"},{"1":"response","2":"0","3":"6","4":"0.065730194"},{"1":"springs","2":"0","3":"6","4":"0.065730194"},{"1":"@fallontonight","2":"0","3":"5","4":"0.077686770"},{"1":"#gopconvention","2":"0","3":"5","4":"0.077686770"},{"1":"#makeamericasafeagain","2":"0","3":"5","4":"0.077686770"},{"1":"#scprimary","2":"0","3":"5","4":"0.077686770"},{"1":"#trumprally","2":"0","3":"5","4":"0.077686770"},{"1":"#votetrumpnv","2":"0","3":"5","4":"0.077686770"},{"1":"|","2":"0","3":"5","4":"0.077686770"},{"1":"11am","2":"0","3":"5","4":"0.077686770"},{"1":"2a","2":"0","3":"5","4":"0.077686770"},{"1":"behalf","2":"0","3":"5","4":"0.077686770"},{"1":"cedar","2":"0","3":"5","4":"0.077686770"},{"1":"chairman","2":"0","3":"5","4":"0.077686770"},{"1":"daytona","2":"0","3":"5","4":"0.077686770"},{"1":"exclusive","2":"0","3":"5","4":"0.077686770"},{"1":"mi","2":"0","3":"5","4":"0.077686770"},{"1":"potus","2":"0","3":"5","4":"0.077686770"},{"1":"receive","2":"0","3":"5","4":"0.077686770"},{"1":"roanoke","2":"0","3":"5","4":"0.077686770"},{"1":"server","2":"0","3":"5","4":"0.077686770"},{"1":"supports","2":"0","3":"5","4":"0.077686770"},{"1":"toledo","2":"0","3":"5","4":"0.077686770"},{"1":"violence","2":"0","3":"5","4":"0.077686770"},{"1":"wayne","2":"0","3":"5","4":"0.077686770"},{"1":"wilmington","2":"0","3":"5","4":"0.077686770"},{"1":"prayers","2":"1","3":"14","4":"0.088349986"},{"1":"tampa","2":"1","3":"14","4":"0.088349986"},{"1":"@hillaryclinton","2":"0","3":"4","4":"0.094957379"},{"1":"@jerryjrfalwell","2":"0","3":"4","4":"0.094957379"},{"1":"@trumpscotland","2":"0","3":"4","4":"0.094957379"},{"1":"@trumpturnberry","2":"0","3":"4","4":"0.094957379"},{"1":"#cnndebate","2":"0","3":"4","4":"0.094957379"},{"1":"#nevadacaucus","2":"0","3":"4","4":"0.094957379"},{"1":"#newyorkvalues","2":"0","3":"4","4":"0.094957379"},{"1":"4pm","2":"0","3":"4","4":"0.094957379"},{"1":"8pme","2":"0","3":"4","4":"0.094957379"},{"1":"aides","2":"0","3":"4","4":"0.094957379"},{"1":"bangor","2":"0","3":"4","4":"0.094957379"},{"1":"baton","2":"0","3":"4","4":"0.094957379"},{"1":"bay","2":"0","3":"4","4":"0.094957379"},{"1":"bluffs","2":"0","3":"4","4":"0.094957379"},{"1":"boy","2":"0","3":"4","4":"0.094957379"},{"1":"donations","2":"0","3":"4","4":"0.094957379"},{"1":"forgotten","2":"0","3":"4","4":"0.094957379"},{"1":"greensboro","2":"0","3":"4","4":"0.094957379"},{"1":"hurt","2":"0","3":"4","4":"0.094957379"},{"1":"manchester","2":"0","3":"4","4":"0.094957379"},{"1":"mn","2":"0","3":"4","4":"0.094957379"},{"1":"naples","2":"0","3":"4","4":"0.094957379"},{"1":"newt","2":"0","3":"4","4":"0.094957379"},{"1":"nj","2":"0","3":"4","4":"0.094957379"},{"1":"owe","2":"0","3":"4","4":"0.094957379"},{"1":"podesta","2":"0","3":"4","4":"0.094957379"},{"1":"premiums","2":"0","3":"4","4":"0.094957379"},{"1":"reform","2":"0","3":"4","4":"0.094957379"},{"1":"rep","2":"0","3":"4","4":"0.094957379"},{"1":"rhode","2":"0","3":"4","4":"0.094957379"},{"1":"rouge","2":"0","3":"4","4":"0.094957379"},{"1":"sarah","2":"0","3":"4","4":"0.094957379"},{"1":"sign","2":"0","3":"4","4":"0.094957379"},{"1":"springfield","2":"0","3":"4","4":"0.094957379"},{"1":"syracuse","2":"0","3":"4","4":"0.094957379"},{"1":"tn","2":"0","3":"4","4":"0.094957379"},{"1":"unethical","2":"0","3":"4","4":"0.094957379"},{"1":"verizon","2":"0","3":"4","4":"0.094957379"},{"1":"wireless","2":"0","3":"4","4":"0.094957379"},{"1":"tickets","2":"5","3":"46","4":"0.100807160"},{"1":"10pme","2":"1","3":"10","4":"0.122042523"},{"1":"@kimguilfoyle","2":"0","3":"3","4":"0.122096908"},{"1":"@nra","2":"0","3":"3","4":"0.122096908"},{"1":"@reince","2":"0","3":"3","4":"0.122096908"},{"1":"@trumpdoral","2":"0","3":"3","4":"0.122096908"},{"1":"@trumpgolf","2":"0","3":"3","4":"0.122096908"},{"1":"#asktrump","2":"0","3":"3","4":"0.122096908"},{"1":"#azprimary","2":"0","3":"3","4":"0.122096908"},{"1":"#debates2016","2":"0","3":"3","4":"0.122096908"},{"1":"#followthemoney","2":"0","3":"3","4":"0.122096908"},{"1":"#meetthetrumps","2":"0","3":"3","4":"0.122096908"},{"1":"#msm","2":"0","3":"3","4":"0.122096908"},{"1":"#nhpolitics","2":"0","3":"3","4":"0.122096908"},{"1":"#paytoplay","2":"0","3":"3","4":"0.122096908"},{"1":"#tbt","2":"0","3":"3","4":"0.122096908"},{"1":"#votetrumpmi","2":"0","3":"3","4":"0.122096908"},{"1":"$1","2":"0","3":"3","4":"0.122096908"},{"1":"$1m","2":"0","3":"3","4":"0.122096908"},{"1":"1135pme","2":"0","3":"3","4":"0.122096908"},{"1":"12pm","2":"0","3":"3","4":"0.122096908"},{"1":"25k","2":"0","3":"3","4":"0.122096908"},{"1":"7am","2":"0","3":"3","4":"0.122096908"},{"1":"accept","2":"0","3":"3","4":"0.122096908"},{"1":"albany","2":"0","3":"3","4":"0.122096908"},{"1":"april","2":"0","3":"3","4":"0.122096908"},{"1":"association","2":"0","3":"3","4":"0.122096908"},{"1":"augustine","2":"0","3":"3","4":"0.122096908"},{"1":"brazile","2":"0","3":"3","4":"0.122096908"},{"1":"cadillac","2":"0","3":"3","4":"0.122096908"},{"1":"conflict","2":"0","3":"3","4":"0.122096908"},{"1":"continued","2":"0","3":"3","4":"0.122096908"},{"1":"cooper","2":"0","3":"3","4":"0.122096908"},{"1":"copies","2":"0","3":"3","4":"0.122096908"},{"1":"delivering","2":"0","3":"3","4":"0.122096908"},{"1":"deplorables","2":"0","3":"3","4":"0.122096908"},{"1":"deucecrew","2":"0","3":"3","4":"0.122096908"},{"1":"donna","2":"0","3":"3","4":"0.122096908"},{"1":"efforts","2":"0","3":"3","4":"0.122096908"},{"1":"everyday","2":"0","3":"3","4":"0.122096908"},{"1":"executive","2":"0","3":"3","4":"0.122096908"},{"1":"expecting","2":"0","3":"3","4":"0.122096908"},{"1":"fortunately","2":"0","3":"3","4":"0.122096908"},{"1":"funded","2":"0","3":"3","4":"0.122096908"},{"1":"grateful","2":"0","3":"3","4":"0.122096908"},{"1":"greeley","2":"0","3":"3","4":"0.122096908"},{"1":"hacked","2":"0","3":"3","4":"0.122096908"},{"1":"henderson","2":"0","3":"3","4":"0.122096908"},{"1":"hey","2":"0","3":"3","4":"0.122096908"},{"1":"hillaryclintons","2":"0","3":"3","4":"0.122096908"},{"1":"idaho","2":"0","3":"3","4":"0.122096908"},{"1":"insurance","2":"0","3":"3","4":"0.122096908"},{"1":"joined","2":"0","3":"3","4":"0.122096908"},{"1":"managing","2":"0","3":"3","4":"0.122096908"},{"1":"marriage","2":"0","3":"3","4":"0.122096908"},{"1":"minister","2":"0","3":"3","4":"0.122096908"},{"1":"montana","2":"0","3":"3","4":"0.122096908"},{"1":"nv","2":"0","3":"3","4":"0.122096908"},{"1":"opportunity","2":"0","3":"3","4":"0.122096908"},{"1":"overflow","2":"0","3":"3","4":"0.122096908"},{"1":"palestinian","2":"0","3":"3","4":"0.122096908"},{"1":"pella","2":"0","3":"3","4":"0.122096908"},{"1":"portland","2":"0","3":"3","4":"0.122096908"},{"1":"portsmouth","2":"0","3":"3","4":"0.122096908"},{"1":"postdebate","2":"0","3":"3","4":"0.122096908"},{"1":"praying","2":"0","3":"3","4":"0.122096908"},{"1":"priebus","2":"0","3":"3","4":"0.122096908"},{"1":"promised","2":"0","3":"3","4":"0.122096908"},{"1":"rasmussen","2":"0","3":"3","4":"0.122096908"},{"1":"recent","2":"0","3":"3","4":"0.122096908"},{"1":"reset","2":"0","3":"3","4":"0.122096908"},{"1":"sanford","2":"0","3":"3","4":"0.122096908"},{"1":"scranton","2":"0","3":"3","4":"0.122096908"},{"1":"senior","2":"0","3":"3","4":"0.122096908"},{"1":"served","2":"0","3":"3","4":"0.122096908"},{"1":"tallahassee","2":"0","3":"3","4":"0.122096908"},{"1":"ties","2":"0","3":"3","4":"0.122096908"},{"1":"timkaine","2":"0","3":"3","4":"0.122096908"},{"1":"tragedy","2":"0","3":"3","4":"0.122096908"},{"1":"trust","2":"0","3":"3","4":"0.122096908"},{"1":"unleashed","2":"0","3":"3","4":"0.122096908"},{"1":"upstate","2":"0","3":"3","4":"0.122096908"},{"1":"voice","2":"0","3":"3","4":"0.122096908"},{"1":"waukesha","2":"0","3":"3","4":"0.122096908"},{"1":"wi","2":"0","3":"3","4":"0.122096908"},{"1":"workers","2":"0","3":"3","4":"0.122096908"},{"1":"unbelievable","2":"3","3":"21","4":"0.138978001"},{"1":"safe","2":"5","3":"33","4":"0.140058606"},{"1":"gop","2":"2","3":"14","4":"0.147259100"},{"1":"michigan","2":"4","3":"25","4":"0.150622423"},{"1":"@melaniatrump","2":"1","3":"8","4":"0.150780275"},{"1":"grand","2":"1","3":"8","4":"0.150780275"},{"1":"americans","2":"2","3":"13","4":"0.158178654"},{"1":"nh","2":"2","3":"13","4":"0.158178654"},{"1":"charlotte","2":"1","3":"7","4":"0.170896701"},{"1":"cincinnati","2":"1","3":"7","4":"0.170896701"},{"1":"forum","2":"1","3":"7","4":"0.170896701"},{"1":"maryland","2":"1","3":"7","4":"0.170896701"},{"1":"register","2":"1","3":"7","4":"0.170896701"},{"1":"@abc2020","2":"0","3":"2","4":"0.170948060"},{"1":"@cbs","2":"0","3":"2","4":"0.170948060"},{"1":"@colbertlateshow","2":"0","3":"2","4":"0.170948060"},{"1":"@frankluntz","2":"0","3":"2","4":"0.170948060"},{"1":"@jessebwatters","2":"0","3":"2","4":"0.170948060"},{"1":"@jimmykimmel","2":"0","3":"2","4":"0.170948060"},{"1":"@katiepavlich","2":"0","3":"2","4":"0.170948060"},{"1":"@monteskitchen","2":"0","3":"2","4":"0.170948060"},{"1":"@nytdavidbrooks","2":"0","3":"2","4":"0.170948060"},{"1":"@peterose14","2":"0","3":"2","4":"0.170948060"},{"1":"@piersmorgan","2":"0","3":"2","4":"0.170948060"},{"1":"@teamtrump","2":"0","3":"2","4":"0.170948060"},{"1":"@terrybranstad","2":"0","3":"2","4":"0.170948060"},{"1":"@tgowdysc","2":"0","3":"2","4":"0.170948060"},{"1":"@thefix","2":"0","3":"2","4":"0.170948060"},{"1":"@twitternyc","2":"0","3":"2","4":"0.170948060"},{"1":"@usatoday","2":"0","3":"2","4":"0.170948060"},{"1":"#abc2020","2":"0","3":"2","4":"0.170948060"},{"1":"#arizonaprimary","2":"0","3":"2","4":"0.170948060"},{"1":"#crippledamerica","2":"0","3":"2","4":"0.170948060"},{"1":"#fns","2":"0","3":"2","4":"0.170948060"},{"1":"#fox","2":"0","3":"2","4":"0.170948060"},{"1":"#foxnews","2":"0","3":"2","4":"0.170948060"},{"1":"#iapolitics","2":"0","3":"2","4":"0.170948060"},{"1":"#kimmel","2":"0","3":"2","4":"0.170948060"},{"1":"#laborday","2":"0","3":"2","4":"0.170948060"},{"1":"#lawandorder","2":"0","3":"2","4":"0.170948060"},{"1":"#makeamericaworkagain","2":"0","3":"2","4":"0.170948060"},{"1":"#nyc","2":"0","3":"2","4":"0.170948060"},{"1":"#ontherecord","2":"0","3":"2","4":"0.170948060"},{"1":"#paprimary","2":"0","3":"2","4":"0.170948060"},{"1":"#repealobamacare","2":"0","3":"2","4":"0.170948060"},{"1":"#riprimary","2":"0","3":"2","4":"0.170948060"},{"1":"#secondamendment","2":"0","3":"2","4":"0.170948060"},{"1":"#sotu","2":"0","3":"2","4":"0.170948060"},{"1":"#supersaturday","2":"0","3":"2","4":"0.170948060"},{"1":"#trumptoday","2":"0","3":"2","4":"0.170948060"},{"1":"#trumpwon","2":"0","3":"2","4":"0.170948060"},{"1":"#ussyorktown","2":"0","3":"2","4":"0.170948060"},{"1":"#utahcaucus","2":"0","3":"2","4":"0.170948060"},{"1":"#utcaucus","2":"0","3":"2","4":"0.170948060"},{"1":"#wattersworld","2":"0","3":"2","4":"0.170948060"},{"1":"+","2":"0","3":"2","4":"0.170948060"},{"1":"\\u274casia","2":"0","3":"2","4":"0.170948060"},{"1":"\\u274cbenghazi","2":"0","3":"2","4":"0.170948060"},{"1":"\\u274ciran","2":"0","3":"2","4":"0.170948060"},{"1":"\\u274ciraq","2":"0","3":"2","4":"0.170948060"},{"1":"\\u274clibya","2":"0","3":"2","4":"0.170948060"},{"1":"\\u274crussian","2":"0","3":"2","4":"0.170948060"},{"1":"\\u274csyria","2":"0","3":"2","4":"0.170948060"},{"1":"100pm","2":"0","3":"2","4":"0.170948060"},{"1":"1030am","2":"0","3":"2","4":"0.170948060"},{"1":"10am","2":"0","3":"2","4":"0.170948060"},{"1":"10pe","2":"0","3":"2","4":"0.170948060"},{"1":"1130am","2":"0","3":"2","4":"0.170948060"},{"1":"11pm","2":"0","3":"2","4":"0.170948060"},{"1":"230pm","2":"0","3":"2","4":"0.170948060"},{"1":"25th","2":"0","3":"2","4":"0.170948060"},{"1":"2pm","2":"0","3":"2","4":"0.170948060"},{"1":"300pm","2":"0","3":"2","4":"0.170948060"},{"1":"330pm","2":"0","3":"2","4":"0.170948060"},{"1":"530pm","2":"0","3":"2","4":"0.170948060"},{"1":"5pm","2":"0","3":"2","4":"0.170948060"},{"1":"5th","2":"0","3":"2","4":"0.170948060"},{"1":"800pm","2":"0","3":"2","4":"0.170948060"},{"1":"830pm","2":"0","3":"2","4":"0.170948060"},{"1":"930pm","2":"0","3":"2","4":"0.170948060"},{"1":"9pm","2":"0","3":"2","4":"0.170948060"},{"1":"abandon","2":"0","3":"2","4":"0.170948060"},{"1":"accepted","2":"0","3":"2","4":"0.170948060"},{"1":"accounts","2":"0","3":"2","4":"0.170948060"},{"1":"activity","2":"0","3":"2","4":"0.170948060"},{"1":"adviser","2":"0","3":"2","4":"0.170948060"},{"1":"affordable","2":"0","3":"2","4":"0.170948060"},{"1":"ag","2":"0","3":"2","4":"0.170948060"},{"1":"albuquerque","2":"0","3":"2","4":"0.170948060"},{"1":"alex","2":"0","3":"2","4":"0.170948060"},{"1":"anniversary","2":"0","3":"2","4":"0.170948060"},{"1":"anticatholic","2":"0","3":"2","4":"0.170948060"},{"1":"apologies","2":"0","3":"2","4":"0.170948060"},{"1":"appeal","2":"0","3":"2","4":"0.170948060"},{"1":"arms","2":"0","3":"2","4":"0.170948060"},{"1":"arriving","2":"0","3":"2","4":"0.170948060"},{"1":"austin","2":"0","3":"2","4":"0.170948060"},{"1":"az","2":"0","3":"2","4":"0.170948060"},{"1":"bear","2":"0","3":"2","4":"0.170948060"},{"1":"behavior","2":"0","3":"2","4":"0.170948060"},{"1":"bend","2":"0","3":"2","4":"0.170948060"},{"1":"berglund","2":"0","3":"2","4":"0.170948060"},{"1":"betray","2":"0","3":"2","4":"0.170948060"},{"1":"betrayed","2":"0","3":"2","4":"0.170948060"},{"1":"biloxi","2":"0","3":"2","4":"0.170948060"},{"1":"blaze","2":"0","3":"2","4":"0.170948060"},{"1":"breaking","2":"0","3":"2","4":"0.170948060"},{"1":"brooks","2":"0","3":"2","4":"0.170948060"},{"1":"buyer","2":"0","3":"2","4":"0.170948060"},{"1":"cameras","2":"0","3":"2","4":"0.170948060"},{"1":"camp","2":"0","3":"2","4":"0.170948060"},{"1":"canton","2":"0","3":"2","4":"0.170948060"},{"1":"carmel","2":"0","3":"2","4":"0.170948060"},{"1":"celebrate","2":"0","3":"2","4":"0.170948060"},{"1":"celebrating","2":"0","3":"2","4":"0.170948060"},{"1":"charleston","2":"0","3":"2","4":"0.170948060"},{"1":"child","2":"0","3":"2","4":"0.170948060"},{"1":"childcare","2":"0","3":"2","4":"0.170948060"},{"1":"chinese","2":"0","3":"2","4":"0.170948060"},{"1":"christie","2":"0","3":"2","4":"0.170948060"},{"1":"circulation","2":"0","3":"2","4":"0.170948060"},{"1":"civic","2":"0","3":"2","4":"0.170948060"},{"1":"clemson","2":"0","3":"2","4":"0.170948060"},{"1":"clintonkaine","2":"0","3":"2","4":"0.170948060"},{"1":"clive","2":"0","3":"2","4":"0.170948060"},{"1":"closes","2":"0","3":"2","4":"0.170948060"},{"1":"closing","2":"0","3":"2","4":"0.170948060"},{"1":"clueless","2":"0","3":"2","4":"0.170948060"},{"1":"column","2":"0","3":"2","4":"0.170948060"},{"1":"compete","2":"0","3":"2","4":"0.170948060"},{"1":"congressional","2":"0","3":"2","4":"0.170948060"},{"1":"consistent","2":"0","3":"2","4":"0.170948060"},{"1":"cont","2":"0","3":"2","4":"0.170948060"},{"1":"contd","2":"0","3":"2","4":"0.170948060"},{"1":"contract","2":"0","3":"2","4":"0.170948060"},{"1":"contribute","2":"0","3":"2","4":"0.170948060"},{"1":"contributions","2":"0","3":"2","4":"0.170948060"},{"1":"copy","2":"0","3":"2","4":"0.170948060"},{"1":"correctness","2":"0","3":"2","4":"0.170948060"},{"1":"cory","2":"0","3":"2","4":"0.170948060"},{"1":"courage","2":"0","3":"2","4":"0.170948060"},{"1":"crimes","2":"0","3":"2","4":"0.170948060"},{"1":"criticize","2":"0","3":"2","4":"0.170948060"},{"1":"curtis","2":"0","3":"2","4":"0.170948060"},{"1":"cut","2":"0","3":"2","4":"0.170948060"},{"1":"davenport","2":"0","3":"2","4":"0.170948060"},{"1":"deadline","2":"0","3":"2","4":"0.170948060"},{"1":"deadlines","2":"0","3":"2","4":"0.170948060"},{"1":"deaths","2":"0","3":"2","4":"0.170948060"},{"1":"declared","2":"0","3":"2","4":"0.170948060"},{"1":"deliver","2":"0","3":"2","4":"0.170948060"},{"1":"demanding","2":"0","3":"2","4":"0.170948060"},{"1":"dept","2":"0","3":"2","4":"0.170948060"},{"1":"deserve","2":"0","3":"2","4":"0.170948060"},{"1":"despair","2":"0","3":"2","4":"0.170948060"},{"1":"details","2":"0","3":"2","4":"0.170948060"},{"1":"disabled","2":"0","3":"2","4":"0.170948060"},{"1":"district","2":"0","3":"2","4":"0.170948060"},{"1":"dream","2":"0","3":"2","4":"0.170948060"},{"1":"drive","2":"0","3":"2","4":"0.170948060"},{"1":"dutchess","2":"0","3":"2","4":"0.170948060"},{"1":"embrace","2":"0","3":"2","4":"0.170948060"},{"1":"employ","2":"0","3":"2","4":"0.170948060"},{"1":"empty","2":"0","3":"2","4":"0.170948060"},{"1":"enforce","2":"0","3":"2","4":"0.170948060"},{"1":"evenings","2":"0","3":"2","4":"0.170948060"},{"1":"excellent","2":"0","3":"2","4":"0.170948060"},{"1":"expand","2":"0","3":"2","4":"0.170948060"},{"1":"extend","2":"0","3":"2","4":"0.170948060"},{"1":"fails","2":"0","3":"2","4":"0.170948060"},{"1":"fallen","2":"0","3":"2","4":"0.170948060"},{"1":"farmers","2":"0","3":"2","4":"0.170948060"},{"1":"february","2":"0","3":"2","4":"0.170948060"},{"1":"flat","2":"0","3":"2","4":"0.170948060"},{"1":"fletcher","2":"0","3":"2","4":"0.170948060"},{"1":"food","2":"0","3":"2","4":"0.170948060"},{"1":"franklingraham","2":"0","3":"2","4":"0.170948060"},{"1":"gays","2":"0","3":"2","4":"0.170948060"},{"1":"gold","2":"0","3":"2","4":"0.170948060"},{"1":"golden","2":"0","3":"2","4":"0.170948060"},{"1":"green","2":"0","3":"2","4":"0.170948060"},{"1":"greenville","2":"0","3":"2","4":"0.170948060"},{"1":"hardworking","2":"0","3":"2","4":"0.170948060"},{"1":"haute","2":"0","3":"2","4":"0.170948060"},{"1":"headline","2":"0","3":"2","4":"0.170948060"},{"1":"hershey","2":"0","3":"2","4":"0.170948060"},{"1":"hilton","2":"0","3":"2","4":"0.170948060"},{"1":"honesty","2":"0","3":"2","4":"0.170948060"},{"1":"hosted","2":"0","3":"2","4":"0.170948060"},{"1":"http://t.co/fokcasbvun","2":"0","3":"2","4":"0.170948060"},{"1":"huge","2":"0","3":"2","4":"0.170948060"},{"1":"hurricane","2":"0","3":"2","4":"0.170948060"},{"1":"ignoring","2":"0","3":"2","4":"0.170948060"},{"1":"includes","2":"0","3":"2","4":"0.170948060"},{"1":"income","2":"0","3":"2","4":"0.170948060"},{"1":"increased","2":"0","3":"2","4":"0.170948060"},{"1":"incredibly","2":"0","3":"2","4":"0.170948060"},{"1":"indianapolis","2":"0","3":"2","4":"0.170948060"},{"1":"influx","2":"0","3":"2","4":"0.170948060"},{"1":"innovation","2":"0","3":"2","4":"0.170948060"},{"1":"insider","2":"0","3":"2","4":"0.170948060"},{"1":"interventions","2":"0","3":"2","4":"0.170948060"},{"1":"ironic","2":"0","3":"2","4":"0.170948060"},{"1":"israeli","2":"0","3":"2","4":"0.170948060"},{"1":"jerry","2":"0","3":"2","4":"0.170948060"},{"1":"jim","2":"0","3":"2","4":"0.170948060"},{"1":"jones","2":"0","3":"2","4":"0.170948060"},{"1":"judgment","2":"0","3":"2","4":"0.170948060"},{"1":"katyturnbc","2":"0","3":"2","4":"0.170948060"},{"1":"knocked","2":"0","3":"2","4":"0.170948060"},{"1":"kristol","2":"0","3":"2","4":"0.170948060"},{"1":"ky","2":"0","3":"2","4":"0.170948060"},{"1":"labor","2":"0","3":"2","4":"0.170948060"},{"1":"language","2":"0","3":"2","4":"0.170948060"},{"1":"lifetime","2":"0","3":"2","4":"0.170948060"},{"1":"linked","2":"0","3":"2","4":"0.170948060"},{"1":"magnet","2":"0","3":"2","4":"0.170948060"},{"1":"makeamericagreatagain","2":"0","3":"2","4":"0.170948060"},{"1":"manage","2":"0","3":"2","4":"0.170948060"},{"1":"marcorubio","2":"0","3":"2","4":"0.170948060"},{"1":"marshall","2":"0","3":"2","4":"0.170948060"},{"1":"mesa","2":"0","3":"2","4":"0.170948060"},{"1":"miami12pm","2":"0","3":"2","4":"0.170948060"},{"1":"mile","2":"0","3":"2","4":"0.170948060"},{"1":"milwaukee","2":"0","3":"2","4":"0.170948060"},{"1":"minnesota","2":"0","3":"2","4":"0.170948060"},{"1":"mon","2":"0","3":"2","4":"0.170948060"},{"1":"morocco","2":"0","3":"2","4":"0.170948060"},{"1":"morty","2":"0","3":"2","4":"0.170948060"},{"1":"ms","2":"0","3":"2","4":"0.170948060"},{"1":"nieto","2":"0","3":"2","4":"0.170948060"},{"1":"nm","2":"0","3":"2","4":"0.170948060"},{"1":"nominated","2":"0","3":"2","4":"0.170948060"},{"1":"novi","2":"0","3":"2","4":"0.170948060"},{"1":"operative","2":"0","3":"2","4":"0.170948060"},{"1":"opinion","2":"0","3":"2","4":"0.170948060"},{"1":"opposition","2":"0","3":"2","4":"0.170948060"},{"1":"orlando4pm","2":"0","3":"2","4":"0.170948060"},{"1":"outlets","2":"0","3":"2","4":"0.170948060"},{"1":"outsider","2":"0","3":"2","4":"0.170948060"},{"1":"oversaw","2":"0","3":"2","4":"0.170948060"},{"1":"palins","2":"0","3":"2","4":"0.170948060"},{"1":"participating","2":"0","3":"2","4":"0.170948060"},{"1":"peace","2":"0","3":"2","4":"0.170948060"},{"1":"pensacola7p","2":"0","3":"2","4":"0.170948060"},{"1":"peoples","2":"0","3":"2","4":"0.170948060"},{"1":"pilot","2":"0","3":"2","4":"0.170948060"},{"1":"pivot","2":"0","3":"2","4":"0.170948060"},{"1":"platform","2":"0","3":"2","4":"0.170948060"},{"1":"playbook","2":"0","3":"2","4":"0.170948060"},{"1":"plymouth","2":"0","3":"2","4":"0.170948060"},{"1":"podestas","2":"0","3":"2","4":"0.170948060"},{"1":"popular","2":"0","3":"2","4":"0.170948060"},{"1":"prime","2":"0","3":"2","4":"0.170948060"},{"1":"prince","2":"0","3":"2","4":"0.170948060"},{"1":"principle","2":"0","3":"2","4":"0.170948060"},{"1":"project","2":"0","3":"2","4":"0.170948060"},{"1":"prosecutor","2":"0","3":"2","4":"0.170948060"},{"1":"proves","2":"0","3":"2","4":"0.170948060"},{"1":"pueblo","2":"0","3":"2","4":"0.170948060"},{"1":"questionable","2":"0","3":"2","4":"0.170948060"},{"1":"ralph","2":"0","3":"2","4":"0.170948060"},{"1":"reach","2":"0","3":"2","4":"0.170948060"},{"1":"readers","2":"0","3":"2","4":"0.170948060"},{"1":"reagan","2":"0","3":"2","4":"0.170948060"},{"1":"reckless","2":"0","3":"2","4":"0.170948060"},{"1":"redding","2":"0","3":"2","4":"0.170948060"},{"1":"reforms","2":"0","3":"2","4":"0.170948060"},{"1":"registered","2":"0","3":"2","4":"0.170948060"},{"1":"registration","2":"0","3":"2","4":"0.170948060"},{"1":"reid","2":"0","3":"2","4":"0.170948060"},{"1":"relief","2":"0","3":"2","4":"0.170948060"},{"1":"remembrance","2":"0","3":"2","4":"0.170948060"},{"1":"reminder","2":"0","3":"2","4":"0.170948060"},{"1":"restore","2":"0","3":"2","4":"0.170948060"},{"1":"reveals","2":"0","3":"2","4":"0.170948060"},{"1":"ridge","2":"0","3":"2","4":"0.170948060"},{"1":"rig","2":"0","3":"2","4":"0.170948060"},{"1":"rise","2":"0","3":"2","4":"0.170948060"},{"1":"robertson","2":"0","3":"2","4":"0.170948060"},{"1":"ron","2":"0","3":"2","4":"0.170948060"},{"1":"root","2":"0","3":"2","4":"0.170948060"},{"1":"rs","2":"0","3":"2","4":"0.170948060"},{"1":"runs","2":"0","3":"2","4":"0.170948060"},{"1":"sachsciti","2":"0","3":"2","4":"0.170948060"},{"1":"sacramento","2":"0","3":"2","4":"0.170948060"},{"1":"scheme","2":"0","3":"2","4":"0.170948060"},{"1":"series","2":"0","3":"2","4":"0.170948060"},{"1":"shared","2":"0","3":"2","4":"0.170948060"},{"1":"shop","2":"0","3":"2","4":"0.170948060"},{"1":"signatures","2":"0","3":"2","4":"0.170948060"},{"1":"sparks","2":"0","3":"2","4":"0.170948060"},{"1":"spencer","2":"0","3":"2","4":"0.170948060"},{"1":"spread","2":"0","3":"2","4":"0.170948060"},{"1":"stab","2":"0","3":"2","4":"0.170948060"},{"1":"streaming","2":"0","3":"2","4":"0.170948060"},{"1":"summit","2":"0","3":"2","4":"0.170948060"},{"1":"surrender","2":"0","3":"2","4":"0.170948060"},{"1":"swamp","2":"0","3":"2","4":"0.170948060"},{"1":"tells","2":"0","3":"2","4":"0.170948060"},{"1":"terre","2":"0","3":"2","4":"0.170948060"},{"1":"thrown","2":"0","3":"2","4":"0.170948060"},{"1":"traveling","2":"0","3":"2","4":"0.170948060"},{"1":"trend","2":"0","3":"2","4":"0.170948060"},{"1":"trillion","2":"0","3":"2","4":"0.170948060"},{"1":"tulsa","2":"0","3":"2","4":"0.170948060"},{"1":"tx","2":"0","3":"2","4":"0.170948060"},{"1":"unifying","2":"0","3":"2","4":"0.170948060"},{"1":"upcoming","2":"0","3":"2","4":"0.170948060"},{"1":"uranium","2":"0","3":"2","4":"0.170948060"},{"1":"urged","2":"0","3":"2","4":"0.170948060"},{"1":"vet","2":"0","3":"2","4":"0.170948060"},{"1":"vetting","2":"0","3":"2","4":"0.170948060"},{"1":"visiting","2":"0","3":"2","4":"0.170948060"},{"1":"wa","2":"0","3":"2","4":"0.170948060"},{"1":"wacky","2":"0","3":"2","4":"0.170948060"},{"1":"warned","2":"0","3":"2","4":"0.170948060"},{"1":"wars","2":"0","3":"2","4":"0.170948060"},{"1":"welcoming","2":"0","3":"2","4":"0.170948060"},{"1":"wilkesbarre","2":"0","3":"2","4":"0.170948060"},{"1":"wtc","2":"0","3":"2","4":"0.170948060"},{"1":"wv","2":"0","3":"2","4":"0.170948060"},{"1":"youngstown","2":"0","3":"2","4":"0.170948060"},{"1":"youre","2":"0","3":"2","4":"0.170948060"},{"1":"video","2":"9","3":"41","4":"0.195219254"},{"1":"birthday","2":"1","3":"6","4":"0.197202797"},{"1":"create","2":"1","3":"6","4":"0.197202797"},{"1":"funding","2":"1","3":"6","4":"0.197202797"},{"1":"joining","2":"1","3":"6","4":"0.197202797"},{"1":"official","2":"1","3":"6","4":"0.197202797"},{"1":"page","2":"1","3":"6","4":"0.197202797"},{"1":"serve","2":"1","3":"6","4":"0.197202797"},{"1":"tonights","2":"1","3":"6","4":"0.197202797"},{"1":"trumps","2":"1","3":"6","4":"0.197202797"},{"1":"louisiana","2":"2","3":"10","4":"0.203416806"},{"1":"maine","2":"2","3":"10","4":"0.203416806"},{"1":"pennsylvania","2":"9","3":"39","4":"0.205133586"},{"1":"tomorrow","2":"24","3":"99","4":"0.209295337"},{"1":"support","2":"18","3":"74","4":"0.211379118"},{"1":"north","2":"8","3":"33","4":"0.216494454"},{"1":"miss","2":"3","3":"13","4":"0.221463836"},{"1":"elected","2":"2","3":"9","4":"0.224845405"},{"1":"government","2":"2","3":"9","4":"0.224845405"},{"1":"israel","2":"2","3":"9","4":"0.224845405"},{"1":"plan","2":"2","3":"9","4":"0.224845405"},{"1":"tuesday","2":"4","3":"16","4":"0.232932191"},{"1":"bob","2":"1","3":"5","4":"0.233074746"},{"1":"conservative","2":"1","3":"5","4":"0.233074746"},{"1":"daughter","2":"1","3":"5","4":"0.233074746"},{"1":"hawaii","2":"1","3":"5","4":"0.233074746"},{"1":"island","2":"1","3":"5","4":"0.233074746"},{"1":"schlonged","2":"1","3":"5","4":"0.233074746"},{"1":"white","2":"1","3":"5","4":"0.233074746"},{"1":"washington","2":"6","3":"22","4":"0.246658749"},{"1":"nights","2":"2","3":"8","4":"0.251316027"},{"1":"policies","2":"2","3":"8","4":"0.251316027"},{"1":"nevada","2":"9","3":"31","4":"0.257380542"},{"1":"families","2":"3","3":"11","4":"0.260016997"},{"1":"enforcement","2":"5","3":"17","4":"0.268423778"},{"1":"york","2":"10","3":"32","4":"0.275717272"},{"1":"clintons","2":"7","3":"22","4":"0.284623886"},{"1":"hillarys","2":"5","3":"16","4":"0.284712540"},{"1":"county","2":"3","3":"10","4":"0.284801173"},{"1":"future","2":"3","3":"10","4":"0.284801173"},{"1":"honored","2":"3","3":"10","4":"0.284801173"},{"1":"ny","2":"3","3":"10","4":"0.284801173"},{"1":"8th","2":"2","3":"7","4":"0.284845481"},{"1":"economic","2":"2","3":"7","4":"0.284845481"},{"1":"fired","2":"2","3":"7","4":"0.284845481"},{"1":"health","2":"2","3":"7","4":"0.284845481"},{"1":"landing","2":"2","3":"7","4":"0.284845481"},{"1":"missouri","2":"2","3":"7","4":"0.284845481"},{"1":"reno","2":"2","3":"7","4":"0.284845481"},{"1":"@ericbolling","2":"1","3":"4","4":"0.284889784"},{"1":"@facethenation","2":"1","3":"4","4":"0.284889784"},{"1":"@jimmyfallon","2":"1","3":"4","4":"0.284889784"},{"1":"$50","2":"1","3":"4","4":"0.284889784"},{"1":"account","2":"1","3":"4","4":"0.284889784"},{"1":"anderson","2":"1","3":"4","4":"0.284889784"},{"1":"arkansas","2":"1","3":"4","4":"0.284889784"},{"1":"coal","2":"1","3":"4","4":"0.284889784"},{"1":"council","2":"1","3":"4","4":"0.284889784"},{"1":"driving","2":"1","3":"4","4":"0.284889784"},{"1":"dropping","2":"1","3":"4","4":"0.284889784"},{"1":"due","2":"1","3":"4","4":"0.284889784"},{"1":"havent","2":"1","3":"4","4":"0.284889784"},{"1":"heroes","2":"1","3":"4","4":"0.284889784"},{"1":"ice","2":"1","3":"4","4":"0.284889784"},{"1":"june","2":"1","3":"4","4":"0.284889784"},{"1":"mcquaid","2":"1","3":"4","4":"0.284889784"},{"1":"pensacola","2":"1","3":"4","4":"0.284889784"},{"1":"plans","2":"1","3":"4","4":"0.284889784"},{"1":"prior","2":"1","3":"4","4":"0.284889784"},{"1":"richmond","2":"1","3":"4","4":"0.284889784"},{"1":"schlafly","2":"1","3":"4","4":"0.284889784"},{"1":"simple","2":"1","3":"4","4":"0.284889784"},{"1":"thursday","2":"1","3":"4","4":"0.284889784"},{"1":"@9news","2":"0","3":"1","4":"0.284934081"},{"1":"@alisyncamerota","2":"0","3":"1","4":"0.284934081"},{"1":"@alwaleedtalal","2":"0","3":"1","4":"0.284934081"},{"1":"@americanlegion","2":"0","3":"1","4":"0.284934081"},{"1":"@andydean2014","2":"0","3":"1","4":"0.284934081"},{"1":"@arappeport","2":"0","3":"1","4":"0.284934081"},{"1":"@ariemanuel","2":"0","3":"1","4":"0.284934081"},{"1":"@atfd17","2":"0","3":"1","4":"0.284934081"},{"1":"@billdeblasio","2":"0","3":"1","4":"0.284934081"},{"1":"@billhemmer","2":"0","3":"1","4":"0.284934081"},{"1":"@billoreilly","2":"0","3":"1","4":"0.284934081"},{"1":"@billyjoel","2":"0","3":"1","4":"0.284934081"},{"1":"@billynungesser","2":"0","3":"1","4":"0.284934081"},{"1":"@bishopwtjackson","2":"0","3":"1","4":"0.284934081"},{"1":"@bodiet","2":"0","3":"1","4":"0.284934081"},{"1":"@carlhigbie","2":"0","3":"1","4":"0.284934081"},{"1":"@chaseelliott","2":"0","3":"1","4":"0.284934081"},{"1":"@chezvachon","2":"0","3":"1","4":"0.284934081"},{"1":"@chrischristie","2":"0","3":"1","4":"0.284934081"},{"1":"@cnnsitroom","2":"0","3":"1","4":"0.284934081"},{"1":"@cynthialummis","2":"0","3":"1","4":"0.284934081"},{"1":"@dailybeast","2":"0","3":"1","4":"0.284934081"},{"1":"@dailymail","2":"0","3":"1","4":"0.284934081"},{"1":"@dallaspd","2":"0","3":"1","4":"0.284934081"},{"1":"@danawhite","2":"0","3":"1","4":"0.284934081"},{"1":"@davidragan","2":"0","3":"1","4":"0.284934081"},{"1":"@dcexaminer","2":"0","3":"1","4":"0.284934081"},{"1":"@debsopan","2":"0","3":"1","4":"0.284934081"},{"1":"@ericgreitens","2":"0","3":"1","4":"0.284934081"},{"1":"@erinburnett","2":"0","3":"1","4":"0.284934081"},{"1":"@ethanolbypoet","2":"0","3":"1","4":"0.284934081"},{"1":"@faithandfreedom","2":"0","3":"1","4":"0.284934081"},{"1":"@forbes","2":"0","3":"1","4":"0.284934081"},{"1":"@fortworthpd","2":"0","3":"1","4":"0.284934081"},{"1":"@franklingraham","2":"0","3":"1","4":"0.284934081"},{"1":"@gatewaypundit","2":"0","3":"1","4":"0.284934081"},{"1":"@gohermie","2":"0","3":"1","4":"0.284934081"},{"1":"@golfcom","2":"0","3":"1","4":"0.284934081"},{"1":"@gopconvention","2":"0","3":"1","4":"0.284934081"},{"1":"@governorsununu","2":"0","3":"1","4":"0.284934081"},{"1":"@govgilmore","2":"0","3":"1","4":"0.284934081"},{"1":"@govmikehuckabee","2":"0","3":"1","4":"0.284934081"},{"1":"@govpencein","2":"0","3":"1","4":"0.284934081"},{"1":"@gravismarketing","2":"0","3":"1","4":"0.284934081"},{"1":"@hardballchris","2":"0","3":"1","4":"0.284934081"},{"1":"@heritage","2":"0","3":"1","4":"0.284934081"},{"1":"@herschelwalker","2":"0","3":"1","4":"0.284934081"},{"1":"@howardkurtz","2":"0","3":"1","4":"0.284934081"},{"1":"@howardstern","2":"0","3":"1","4":"0.284934081"},{"1":"@iclv","2":"0","3":"1","4":"0.284934081"},{"1":"@iowacentral","2":"0","3":"1","4":"0.284934081"},{"1":"@kirstenpowers","2":"0","3":"1","4":"0.284934081"},{"1":"@koster4missouri","2":"0","3":"1","4":"0.284934081"},{"1":"@libertyu","2":"0","3":"1","4":"0.284934081"},{"1":"@ltstevenlrogers","2":"0","3":"1","4":"0.284934081"},{"1":"@maddow","2":"0","3":"1","4":"0.284934081"},{"1":"@mainegop","2":"0","3":"1","4":"0.284934081"},{"1":"@marshablackburn","2":"0","3":"1","4":"0.284934081"},{"1":"@megynkellys","2":"0","3":"1","4":"0.284934081"},{"1":"@mikeneedham","2":"0","3":"1","4":"0.284934081"},{"1":"@mmflint","2":"0","3":"1","4":"0.284934081"},{"1":"@mrsvanessatrump","2":"0","3":"1","4":"0.284934081"},{"1":"@nealconan","2":"0","3":"1","4":"0.284934081"},{"1":"@nfib","2":"0","3":"1","4":"0.284934081"},{"1":"@nypost","2":"0","3":"1","4":"0.284934081"},{"1":"@nyposts","2":"0","3":"1","4":"0.284934081"},{"1":"@nytimesdowd","2":"0","3":"1","4":"0.284934081"},{"1":"@omarosa","2":"0","3":"1","4":"0.284934081"},{"1":"@outfrontcnn","2":"0","3":"1","4":"0.284934081"},{"1":"@outnumberedfnc","2":"0","3":"1","4":"0.284934081"},{"1":"@patmccrorync","2":"0","3":"1","4":"0.284934081"},{"1":"@paulteutulsr","2":"0","3":"1","4":"0.284934081"},{"1":"@penguins","2":"0","3":"1","4":"0.284934081"},{"1":"@penn","2":"0","3":"1","4":"0.284934081"},{"1":"@phillypolice","2":"0","3":"1","4":"0.284934081"},{"1":"@phussionwyff","2":"0","3":"1","4":"0.284934081"},{"1":"@pnehlen","2":"0","3":"1","4":"0.284934081"},{"1":"@pryan","2":"0","3":"1","4":"0.284934081"},{"1":"@realclearnews","2":"0","3":"1","4":"0.284934081"},{"1":"@regentu","2":"0","3":"1","4":"0.284934081"},{"1":"@reploubarletta","2":"0","3":"1","4":"0.284934081"},{"1":"@repreneeellmers","2":"0","3":"1","4":"0.284934081"},{"1":"@reuters","2":"0","3":"1","4":"0.284934081"},{"1":"@reviewjournal","2":"0","3":"1","4":"0.284934081"},{"1":"@ricksantorum","2":"0","3":"1","4":"0.284934081"},{"1":"@ryanjnewman","2":"0","3":"1","4":"0.284934081"},{"1":"@samaritanspurse","2":"0","3":"1","4":"0.284934081"},{"1":"@scteamtrump","2":"0","3":"1","4":"0.284934081"},{"1":"@senatemajldr","2":"0","3":"1","4":"0.284934081"},{"1":"@senatorsessions","2":"0","3":"1","4":"0.284934081"},{"1":"@senjohnmccain","2":"0","3":"1","4":"0.284934081"},{"1":"@shellhouopen","2":"0","3":"1","4":"0.284934081"},{"1":"@shepnewsteam","2":"0","3":"1","4":"0.284934081"},{"1":"@sinow","2":"0","3":"1","4":"0.284934081"},{"1":"@sjsopio","2":"0","3":"1","4":"0.284934081"},{"1":"@snapchat","2":"0","3":"1","4":"0.284934081"},{"1":"@sopandeb","2":"0","3":"1","4":"0.284934081"},{"1":"@speakerryan","2":"0","3":"1","4":"0.284934081"},{"1":"@stephenathome","2":"0","3":"1","4":"0.284934081"},{"1":"@stjude","2":"0","3":"1","4":"0.284934081"},{"1":"@tavissmiley","2":"0","3":"1","4":"0.284934081"},{"1":"@theherd","2":"0","3":"1","4":"0.284934081"},{"1":"@thejuanwilliams","2":"0","3":"1","4":"0.284934081"},{"1":"@theslystallone","2":"0","3":"1","4":"0.284934081"},{"1":"@tngcbedminster","2":"0","3":"1","4":"0.284934081"},{"1":"@tombarrackjr","2":"0","3":"1","4":"0.284934081"},{"1":"@trumpdc","2":"0","3":"1","4":"0.284934081"},{"1":"@trumpdoonbeg","2":"0","3":"1","4":"0.284934081"},{"1":"@trumptowerny","2":"0","3":"1","4":"0.284934081"},{"1":"@trumpwomenstour","2":"0","3":"1","4":"0.284934081"},{"1":"@umassamherst","2":"0","3":"1","4":"0.284934081"},{"1":"@urbandaleschool","2":"0","3":"1","4":"0.284934081"},{"1":"@usarmy","2":"0","3":"1","4":"0.284934081"},{"1":"@uscg","2":"0","3":"1","4":"0.284934081"},{"1":"@washtimes","2":"0","3":"1","4":"0.284934081"},{"1":"@wayneallynroot","2":"0","3":"1","4":"0.284934081"},{"1":"@wkrg","2":"0","3":"1","4":"0.284934081"},{"1":"@wolfblitzer","2":"0","3":"1","4":"0.284934081"},{"1":"#alconvention2016","2":"0","3":"1","4":"0.284934081"},{"1":"#americansamoa","2":"0","3":"1","4":"0.284934081"},{"1":"#americanunity","2":"0","3":"1","4":"0.284934081"},{"1":"#americasmerkel","2":"0","3":"1","4":"0.284934081"},{"1":"#armedforcesday","2":"0","3":"1","4":"0.284934081"},{"1":"#becool","2":"0","3":"1","4":"0.284934081"},{"1":"#benghazi","2":"0","3":"1","4":"0.284934081"},{"1":"#bigleagetruth","2":"0","3":"1","4":"0.284934081"},{"1":"#bikersfortrump","2":"0","3":"1","4":"0.284934081"},{"1":"#biloxi","2":"0","3":"1","4":"0.284934081"},{"1":"#boycottmacys","2":"0","3":"1","4":"0.284934081"},{"1":"#brussels","2":"0","3":"1","4":"0.284934081"},{"1":"#buildthewall","2":"0","3":"1","4":"0.284934081"},{"1":"#caprimary","2":"0","3":"1","4":"0.284934081"},{"1":"#cincodemayo","2":"0","3":"1","4":"0.284934081"},{"1":"#circleofenrichment","2":"0","3":"1","4":"0.284934081"},{"1":"#cnbcgopdebate","2":"0","3":"1","4":"0.284934081"},{"1":"#cnn","2":"0","3":"1","4":"0.284934081"},{"1":"#coastguardday","2":"0","3":"1","4":"0.284934081"},{"1":"#colbert","2":"0","3":"1","4":"0.284934081"},{"1":"#commanderinchiefforum","2":"0","3":"1","4":"0.284934081"},{"1":"#commoncore","2":"0","3":"1","4":"0.284934081"},{"1":"#crookedhillarys","2":"0","3":"1","4":"0.284934081"},{"1":"#cruzfraud","2":"0","3":"1","4":"0.284934081"},{"1":"#ctprimary","2":"0","3":"1","4":"0.284934081"},{"1":"#dday","2":"0","3":"1","4":"0.284934081"},{"1":"#dem","2":"0","3":"1","4":"0.284934081"},{"1":"#deprimary","2":"0","3":"1","4":"0.284934081"},{"1":"#earlyvote","2":"0","3":"1","4":"0.284934081"},{"1":"#eauclaire","2":"0","3":"1","4":"0.284934081"},{"1":"#economy","2":"0","3":"1","4":"0.284934081"},{"1":"#endcommoncore","2":"0","3":"1","4":"0.284934081"},{"1":"#enjoy","2":"0","3":"1","4":"0.284934081"},{"1":"#flashbackfriday","2":"0","3":"1","4":"0.284934081"},{"1":"#frozen","2":"0","3":"1","4":"0.284934081"},{"1":"#goldenglobe","2":"0","3":"1","4":"0.284934081"},{"1":"#googletrends","2":"0","3":"1","4":"0.284934081"},{"1":"#gopincle","2":"0","3":"1","4":"0.284934081"},{"1":"#happymothersday","2":"0","3":"1","4":"0.284934081"},{"1":"#happynewyearamerica","2":"0","3":"1","4":"0.284934081"},{"1":"#hillarycarefail","2":"0","3":"1","4":"0.284934081"},{"1":"#huge","2":"0","3":"1","4":"0.284934081"},{"1":"#hypocrisy","2":"0","3":"1","4":"0.284934081"},{"1":"#iaforums","2":"0","3":"1","4":"0.284934081"},{"1":"#icaucused","2":"0","3":"1","4":"0.284934081"},{"1":"#indprimary","2":"0","3":"1","4":"0.284934081"},{"1":"#iowacaucus","2":"0","3":"1","4":"0.284934081"},{"1":"#ivoted","2":"0","3":"1","4":"0.284934081"},{"1":"#johnryder","2":"0","3":"1","4":"0.284934081"},{"1":"#kansascaucus","2":"0","3":"1","4":"0.284934081"},{"1":"#leadright2016","2":"0","3":"1","4":"0.284934081"},{"1":"#leo","2":"0","3":"1","4":"0.284934081"},{"1":"#lightweightsenatormarcorubio","2":"0","3":"1","4":"0.284934081"},{"1":"#littlemarco","2":"0","3":"1","4":"0.284934081"},{"1":"#lssc","2":"0","3":"1","4":"0.284934081"},{"1":"#maga\\U0001f1fa\\U0001f1f8debate","2":"0","3":"1","4":"0.284934081"},{"1":"#maitnerstrong","2":"0","3":"1","4":"0.284934081"},{"1":"#makeamerciagreatagain","2":"0","3":"1","4":"0.284934081"},{"1":"#makeamericagreatagaintrump2016","2":"0","3":"1","4":"0.284934081"},{"1":"#makeyoutubegreatagain","2":"0","3":"1","4":"0.284934081"},{"1":"#maralago","2":"0","3":"1","4":"0.284934081"},{"1":"#mdprimary","2":"0","3":"1","4":"0.284934081"},{"1":"#mdw","2":"0","3":"1","4":"0.284934081"},{"1":"#mediabuzz","2":"0","3":"1","4":"0.284934081"},{"1":"#mississippi","2":"0","3":"1","4":"0.284934081"},{"1":"#nascar","2":"0","3":"1","4":"0.284934081"},{"1":"#neprimary","2":"0","3":"1","4":"0.284934081"},{"1":"#neverforget","2":"0","3":"1","4":"0.284934081"},{"1":"#newhampshire","2":"0","3":"1","4":"0.284934081"},{"1":"#november8th","2":"0","3":"1","4":"0.284934081"},{"1":"#obamacaredummy","2":"0","3":"1","4":"0.284934081"},{"1":"#obamacarefailed","2":"0","3":"1","4":"0.284934081"},{"1":"#obamacareinthreewords","2":"0","3":"1","4":"0.284934081"},{"1":"#ohiovotesearly","2":"0","3":"1","4":"0.284934081"},{"1":"#openingceremony","2":"0","3":"1","4":"0.284934081"},{"1":"#orprimary","2":"0","3":"1","4":"0.284934081"},{"1":"#pearlharbor","2":"0","3":"1","4":"0.284934081"},{"1":"#politicallycorrect","2":"0","3":"1","4":"0.284934081"},{"1":"#racine","2":"0","3":"1","4":"0.284934081"},{"1":"#rallyforriley","2":"0","3":"1","4":"0.284934081"},{"1":"#rememberourvets","2":"0","3":"1","4":"0.284934081"},{"1":"#rio2016","2":"0","3":"1","4":"0.284934081"},{"1":"#robotrubio","2":"0","3":"1","4":"0.284934081"},{"1":"#rtm2016","2":"0","3":"1","4":"0.284934081"},{"1":"#sb50","2":"0","3":"1","4":"0.284934081"},{"1":"#silentmajority","2":"0","3":"1","4":"0.284934081"},{"1":"#snl","2":"0","3":"1","4":"0.284934081"},{"1":"#snowflakegardenbrunch","2":"0","3":"1","4":"0.284934081"},{"1":"#standwithlouisiana","2":"0","3":"1","4":"0.284934081"},{"1":"#stanleycup","2":"0","3":"1","4":"0.284934081"},{"1":"#stopcommoncore","2":"0","3":"1","4":"0.284934081"},{"1":"#superbowlsunday","2":"0","3":"1","4":"0.284934081"},{"1":"#syrianrefugees","2":"0","3":"1","4":"0.284934081"},{"1":"#teamusa","2":"0","3":"1","4":"0.284934081"},{"1":"#thankavet","2":"0","3":"1","4":"0.284934081"},{"1":"#theremembranceproject","2":"0","3":"1","4":"0.284934081"},{"1":"#trump","2":"0","3":"1","4":"0.284934081"},{"1":"#trump4vets","2":"0","3":"1","4":"0.284934081"},{"1":"#trumpinstagram","2":"0","3":"1","4":"0.284934081"},{"1":"#trumppence2016","2":"0","3":"1","4":"0.284934081"},{"1":"#trumptower","2":"0","3":"1","4":"0.284934081"},{"1":"#trumptowernyc","2":"0","3":"1","4":"0.284934081"},{"1":"#tump2016","2":"0","3":"1","4":"0.284934081"},{"1":"#usa","2":"0","3":"1","4":"0.284934081"},{"1":"#votersspeak","2":"0","3":"1","4":"0.284934081"},{"1":"#votetrumphi","2":"0","3":"1","4":"0.284934081"},{"1":"#votetrumpid","2":"0","3":"1","4":"0.284934081"},{"1":"#votetrumpil","2":"0","3":"1","4":"0.284934081"},{"1":"#votetrumpks","2":"0","3":"1","4":"0.284934081"},{"1":"#votetrumpma","2":"0","3":"1","4":"0.284934081"},{"1":"#votetrumpms","2":"0","3":"1","4":"0.284934081"},{"1":"#votetrumpnc","2":"0","3":"1","4":"0.284934081"},{"1":"#votetrumpvt","2":"0","3":"1","4":"0.284934081"},{"1":"#votetrumpwi","2":"0","3":"1","4":"0.284934081"},{"1":"#wausau","2":"0","3":"1","4":"0.284934081"},{"1":"#wcs16","2":"0","3":"1","4":"0.284934081"},{"1":"#westerntuesday","2":"0","3":"1","4":"0.284934081"},{"1":"#whereshillary","2":"0","3":"1","4":"0.284934081"},{"1":"#wisconsin","2":"0","3":"1","4":"0.284934081"},{"1":"#wvprimary","2":"0","3":"1","4":"0.284934081"},{"1":"~","2":"0","3":"1","4":"0.284934081"},{"1":"\\u2705eliminate","2":"0","3":"1","4":"0.284934081"},{"1":"\\u2705florida","2":"0","3":"1","4":"0.284934081"},{"1":"\\u2705illinois","2":"0","3":"1","4":"0.284934081"},{"1":"\\u2705lean","2":"0","3":"1","4":"0.284934081"},{"1":"\\u2705lower","2":"0","3":"1","4":"0.284934081"},{"1":"\\u2705missouri","2":"0","3":"1","4":"0.284934081"},{"1":"\\u2705north","2":"0","3":"1","4":"0.284934081"},{"1":"\\u2705ohio","2":"0","3":"1","4":"0.284934081"},{"1":"$$$","2":"0","3":"1","4":"0.284934081"},{"1":"$1000","2":"0","3":"1","4":"0.284934081"},{"1":"$100000000","2":"0","3":"1","4":"0.284934081"},{"1":"$106","2":"0","3":"1","4":"0.284934081"},{"1":"$11m","2":"0","3":"1","4":"0.284934081"},{"1":"$12m","2":"0","3":"1","4":"0.284934081"},{"1":"$13m","2":"0","3":"1","4":"0.284934081"},{"1":"$150m","2":"0","3":"1","4":"0.284934081"},{"1":"$18","2":"0","3":"1","4":"0.284934081"},{"1":"$180000","2":"0","3":"1","4":"0.284934081"},{"1":"$194","2":"0","3":"1","4":"0.284934081"},{"1":"$28","2":"0","3":"1","4":"0.284934081"},{"1":"$400myear","2":"0","3":"1","4":"0.284934081"},{"1":"$487k","2":"0","3":"1","4":"0.284934081"},{"1":"$500k","2":"0","3":"1","4":"0.284934081"},{"1":"$56","2":"0","3":"1","4":"0.284934081"},{"1":"$6","2":"0","3":"1","4":"0.284934081"},{"1":"$600000000","2":"0","3":"1","4":"0.284934081"},{"1":"$6m","2":"0","3":"1","4":"0.284934081"},{"1":"1010pm","2":"0","3":"1","4":"0.284934081"},{"1":"10th","2":"0","3":"1","4":"0.284934081"},{"1":"11a","2":"0","3":"1","4":"0.284934081"},{"1":"11pme","2":"0","3":"1","4":"0.284934081"},{"1":"11th","2":"0","3":"1","4":"0.284934081"},{"1":"1230pm","2":"0","3":"1","4":"0.284934081"},{"1":"12k","2":"0","3":"1","4":"0.284934081"},{"1":"130pm","2":"0","3":"1","4":"0.284934081"},{"1":"13th","2":"0","3":"1","4":"0.284934081"},{"1":"14th","2":"0","3":"1","4":"0.284934081"},{"1":"15k","2":"0","3":"1","4":"0.284934081"},{"1":"1pm","2":"0","3":"1","4":"0.284934081"},{"1":"1pme","2":"0","3":"1","4":"0.284934081"},{"1":"200k","2":"0","3":"1","4":"0.284934081"},{"1":"200pm","2":"0","3":"1","4":"0.284934081"},{"1":"200pmest","2":"0","3":"1","4":"0.284934081"},{"1":"20k","2":"0","3":"1","4":"0.284934081"},{"1":"20min","2":"0","3":"1","4":"0.284934081"},{"1":"20th","2":"0","3":"1","4":"0.284934081"},{"1":"226th","2":"0","3":"1","4":"0.284934081"},{"1":"241st","2":"0","3":"1","4":"0.284934081"},{"1":"24th","2":"0","3":"1","4":"0.284934081"},{"1":"2500+","2":"0","3":"1","4":"0.284934081"},{"1":"25m","2":"0","3":"1","4":"0.284934081"},{"1":"2point","2":"0","3":"1","4":"0.284934081"},{"1":"2yrsan","2":"0","3":"1","4":"0.284934081"},{"1":"3m","2":"0","3":"1","4":"0.284934081"},{"1":"40+","2":"0","3":"1","4":"0.284934081"},{"1":"400pm","2":"0","3":"1","4":"0.284934081"},{"1":"4p","2":"0","3":"1","4":"0.284934081"},{"1":"4pme","2":"0","3":"1","4":"0.284934081"},{"1":"500pm","2":"0","3":"1","4":"0.284934081"},{"1":"50k","2":"0","3":"1","4":"0.284934081"},{"1":"51yrs","2":"0","3":"1","4":"0.284934081"},{"1":"53rd","2":"0","3":"1","4":"0.284934081"},{"1":"57pm","2":"0","3":"1","4":"0.284934081"},{"1":"5k","2":"0","3":"1","4":"0.284934081"},{"1":"5k+","2":"0","3":"1","4":"0.284934081"},{"1":"600pm","2":"0","3":"1","4":"0.284934081"},{"1":"630am","2":"0","3":"1","4":"0.284934081"},{"1":"630pm","2":"0","3":"1","4":"0.284934081"},{"1":"6days","2":"0","3":"1","4":"0.284934081"},{"1":"700am","2":"0","3":"1","4":"0.284934081"},{"1":"700pm","2":"0","3":"1","4":"0.284934081"},{"1":"7k","2":"0","3":"1","4":"0.284934081"},{"1":"7p","2":"0","3":"1","4":"0.284934081"},{"1":"7th","2":"0","3":"1","4":"0.284934081"},{"1":"7yr","2":"0","3":"1","4":"0.284934081"},{"1":"800pme","2":"0","3":"1","4":"0.284934081"},{"1":"810pm","2":"0","3":"1","4":"0.284934081"},{"1":"830pme","2":"0","3":"1","4":"0.284934081"},{"1":"8ame","2":"0","3":"1","4":"0.284934081"},{"1":"8thbecause","2":"0","3":"1","4":"0.284934081"},{"1":"900+","2":"0","3":"1","4":"0.284934081"},{"1":"930p","2":"0","3":"1","4":"0.284934081"},{"1":"9am","2":"0","3":"1","4":"0.284934081"},{"1":"9ame","2":"0","3":"1","4":"0.284934081"},{"1":"9pme","2":"0","3":"1","4":"0.284934081"},{"1":"abandoned","2":"0","3":"1","4":"0.284934081"},{"1":"abcpolitics","2":"0","3":"1","4":"0.284934081"},{"1":"abdullah","2":"0","3":"1","4":"0.284934081"},{"1":"abingdon","2":"0","3":"1","4":"0.284934081"},{"1":"abroad","2":"0","3":"1","4":"0.284934081"},{"1":"accessory","2":"0","3":"1","4":"0.284934081"},{"1":"accolade","2":"0","3":"1","4":"0.284934081"},{"1":"accomplish","2":"0","3":"1","4":"0.284934081"},{"1":"accountability","2":"0","3":"1","4":"0.284934081"},{"1":"accuser","2":"0","3":"1","4":"0.284934081"},{"1":"active","2":"0","3":"1","4":"0.284934081"},{"1":"activists","2":"0","3":"1","4":"0.284934081"},{"1":"addition","2":"0","3":"1","4":"0.284934081"},{"1":"admits","2":"0","3":"1","4":"0.284934081"},{"1":"admonished","2":"0","3":"1","4":"0.284934081"},{"1":"advisors","2":"0","3":"1","4":"0.284934081"},{"1":"advisory","2":"0","3":"1","4":"0.284934081"},{"1":"aerial","2":"0","3":"1","4":"0.284934081"},{"1":"afternoons","2":"0","3":"1","4":"0.284934081"},{"1":"agencies","2":"0","3":"1","4":"0.284934081"},{"1":"agitators","2":"0","3":"1","4":"0.284934081"},{"1":"agreement","2":"0","3":"1","4":"0.284934081"},{"1":"aided","2":"0","3":"1","4":"0.284934081"},{"1":"airing","2":"0","3":"1","4":"0.284934081"},{"1":"alejandro","2":"0","3":"1","4":"0.284934081"},{"1":"aliens","2":"0","3":"1","4":"0.284934081"},{"1":"alienssave","2":"0","3":"1","4":"0.284934081"},{"1":"allis","2":"0","3":"1","4":"0.284934081"},{"1":"ally","2":"0","3":"1","4":"0.284934081"},{"1":"alongside","2":"0","3":"1","4":"0.284934081"},{"1":"alshabaab","2":"0","3":"1","4":"0.284934081"},{"1":"altogether","2":"0","3":"1","4":"0.284934081"},{"1":"ambridge","2":"0","3":"1","4":"0.284934081"},{"1":"ambushed","2":"0","3":"1","4":"0.284934081"},{"1":"amenia","2":"0","3":"1","4":"0.284934081"},{"1":"ames","2":"0","3":"1","4":"0.284934081"},{"1":"anchors","2":"0","3":"1","4":"0.284934081"},{"1":"andreatantaros","2":"0","3":"1","4":"0.284934081"},{"1":"andrew","2":"0","3":"1","4":"0.284934081"},{"1":"anncoulters","2":"0","3":"1","4":"0.284934081"},{"1":"announcers","2":"0","3":"1","4":"0.284934081"},{"1":"announces","2":"0","3":"1","4":"0.284934081"},{"1":"answered","2":"0","3":"1","4":"0.284934081"},{"1":"answers","2":"0","3":"1","4":"0.284934081"},{"1":"anti2a","2":"0","3":"1","4":"0.284934081"},{"1":"antidefense","2":"0","3":"1","4":"0.284934081"},{"1":"antiwomen","2":"0","3":"1","4":"0.284934081"},{"1":"app","2":"0","3":"1","4":"0.284934081"},{"1":"appleton","2":"0","3":"1","4":"0.284934081"},{"1":"application","2":"0","3":"1","4":"0.284934081"},{"1":"appreciation","2":"0","3":"1","4":"0.284934081"},{"1":"approx","2":"0","3":"1","4":"0.284934081"},{"1":"approximately","2":"0","3":"1","4":"0.284934081"},{"1":"ar","2":"0","3":"1","4":"0.284934081"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Given that several of these words are overall low frequency words, we can impose a filter based on the total frequency like this:</p>
<pre class="r"><code>android_iphone_or %&gt;% filter(Android+iPhone &gt; 100) %&gt;%
  arrange(desc(or))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["word"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Android"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["iPhone"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["or"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"@cnn","2":"90","3":"17","4":"4.440177264"},{"1":"bad","2":"104","3":"26","4":"3.386533952"},{"1":"crooked","2":"156","3":"49","4":"2.719434849"},{"1":"interviewed","2":"76","3":"25","4":"2.572055391"},{"1":"media","2":"76","3":"25","4":"2.572055391"},{"1":"ted","2":"84","3":"28","4":"2.542685288"},{"1":"win","2":"74","3":"28","4":"2.240380737"},{"1":"hillary","2":"289","3":"116","4":"2.144860377"},{"1":"debate","2":"79","3":"32","4":"2.096540149"},{"1":"cruz","2":"113","3":"46","4":"2.094308464"},{"1":"president","2":"82","3":"35","4":"1.991734675"},{"1":"@foxnews","2":"71","3":"35","4":"1.724988663"},{"1":"people","2":"194","3":"109","4":"1.524787926"},{"1":"night","2":"69","3":"39","4":"1.506315727"},{"1":"country","2":"66","3":"38","4":"1.478562644"},{"1":"amazing","2":"66","3":"42","4":"1.339014516"},{"1":"time","2":"78","3":"54","4":"1.232454924"},{"1":"crowd","2":"60","3":"43","4":"1.189666071"},{"1":"clinton","2":"136","3":"101","4":"1.150927098"},{"1":"enjoy","2":"68","3":"51","4":"1.137642369"},{"1":"poll","2":"116","3":"101","4":"0.981067331"},{"1":"trump","2":"104","3":"91","4":"0.976171191"},{"1":"iowa","2":"61","3":"65","4":"0.801908338"},{"1":"tonight","2":"70","3":"84","4":"0.711975848"},{"1":"america","2":"114","3":"140","4":"0.694505648"},{"1":"vote","2":"46","3":"67","4":"0.587722041"},{"1":"tomorrow","2":"24","3":"99","4":"0.209295337"},{"1":"join","2":"1","3":"157","4":"0.008049441"},{"1":"#trump2016","2":"3","3":"411","4":"0.007055789"},{"1":"#makeamericagreatagain","2":"0","3":"294","4":"0.001420463"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>android_iphone_or %&gt;% filter(Android+iPhone &gt; 100) %&gt;%
  arrange(or)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["word"],"name":[1],"type":["chr"],"align":["left"]},{"label":["Android"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["iPhone"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["or"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"#makeamericagreatagain","2":"0","3":"294","4":"0.001420463"},{"1":"#trump2016","2":"3","3":"411","4":"0.007055789"},{"1":"join","2":"1","3":"157","4":"0.008049441"},{"1":"tomorrow","2":"24","3":"99","4":"0.209295337"},{"1":"vote","2":"46","3":"67","4":"0.587722041"},{"1":"america","2":"114","3":"140","4":"0.694505648"},{"1":"tonight","2":"70","3":"84","4":"0.711975848"},{"1":"iowa","2":"61","3":"65","4":"0.801908338"},{"1":"trump","2":"104","3":"91","4":"0.976171191"},{"1":"poll","2":"116","3":"101","4":"0.981067331"},{"1":"enjoy","2":"68","3":"51","4":"1.137642369"},{"1":"clinton","2":"136","3":"101","4":"1.150927098"},{"1":"crowd","2":"60","3":"43","4":"1.189666071"},{"1":"time","2":"78","3":"54","4":"1.232454924"},{"1":"amazing","2":"66","3":"42","4":"1.339014516"},{"1":"country","2":"66","3":"38","4":"1.478562644"},{"1":"night","2":"69","3":"39","4":"1.506315727"},{"1":"people","2":"194","3":"109","4":"1.524787926"},{"1":"@foxnews","2":"71","3":"35","4":"1.724988663"},{"1":"president","2":"82","3":"35","4":"1.991734675"},{"1":"cruz","2":"113","3":"46","4":"2.094308464"},{"1":"debate","2":"79","3":"32","4":"2.096540149"},{"1":"hillary","2":"289","3":"116","4":"2.144860377"},{"1":"win","2":"74","3":"28","4":"2.240380737"},{"1":"ted","2":"84","3":"28","4":"2.542685288"},{"1":"interviewed","2":"76","3":"25","4":"2.572055391"},{"1":"media","2":"76","3":"25","4":"2.572055391"},{"1":"crooked","2":"156","3":"49","4":"2.719434849"},{"1":"bad","2":"104","3":"26","4":"3.386533952"},{"1":"@cnn","2":"90","3":"17","4":"4.440177264"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>We already see somewhat of a pattern in the types of words that are being tweeted more from one device versus the other. However, we are not interested in specific words but rather in the tone. Vaziri’s assertion is that the Android tweets are more hyperbolic. So how can we check this with data? <em>Hyperbolic</em> is a hard sentiment to extract from words as it relies on interpreting phrases. However, words can be associated to more basic sentiment such as anger, fear, joy, and surprise. In the next section, we demonstrate basic sentiment analysis.</p>
</div>
<div id="section-sentiment-analysis" class="section level3">
<h3>Sentiment analysis</h3>
<p>In sentiment analysis, we assign a word to one or more “sentiments”. Although this approach will miss context-dependent sentiments, such as sarcasm, when performed on large numbers of words, summaries can provide insights.</p>
<p>The first step in sentiment analysis is to assign a sentiment to each word. As we demonstrate, the <strong>tidytext</strong> package includes several maps or lexicons. We will also be using the <strong>textdata</strong> package.</p>
<pre class="r"><code>library(tidytext)
library(textdata)</code></pre>
<p>The <code>bing</code> lexicon divides words into <code>positive</code> and <code>negative</code> sentiments. We can see this using the <em>tidytext</em> function <code>get_sentiments</code>:</p>
<pre class="r"><code>get_sentiments(&quot;bing&quot;)</code></pre>
<p>The <code>AFINN</code> lexicon assigns a score between -5 and 5, with -5 the most negative and 5 the most positive. Note that this lexicon needs to be downloaded the first time you call the function <code>get_sentiment</code>:</p>
<pre class="r"><code>get_sentiments(&quot;afinn&quot;)</code></pre>
<p>The <code>loughran</code> and <code>nrc</code> lexicons provide several different sentiments. Note that these also have to be downloaded the first time you use them.</p>
<pre class="r"><code>get_sentiments(&quot;loughran&quot;) %&gt;% count(sentiment)</code></pre>
<pre class="r"><code>get_sentiments(&quot;nrc&quot;) %&gt;% count(sentiment)</code></pre>
<p>For our analysis, we are interested in exploring the different sentiments of each tweet so we will use the <code>nrc</code> lexicon:</p>
<pre class="r"><code>nrc &lt;- get_sentiments(&quot;nrc&quot;) %&gt;%
  select(word, sentiment)</code></pre>
<p>We can combine the words and sentiments using <code>inner_join</code>, which will only keep words associated with a sentiment. Here are 10 random words extracted from the tweets:</p>
<pre class="r"><code>tweet_words %&gt;% inner_join(nrc, by = &quot;word&quot;) %&gt;% 
  select(source, word, sentiment) %&gt;% 
  sample_n(5)</code></pre>
<p>Now we are ready to perform a quantitative analysis comparing Android and iPhone by comparing the sentiments of the tweets posted from each device. Here we could perform a tweet-by-tweet analysis, assigning a sentiment to each tweet. However, this will be challenging since each tweet will have several sentiments attached to it, one for each word appearing in the lexicon. For illustrative purposes, we will perform a much simpler analysis: we will count and compare the frequencies of each sentiment appearing in each device.</p>
<pre class="r"><code>sentiment_counts &lt;- tweet_words %&gt;%
  left_join(nrc, by = &quot;word&quot;) %&gt;%
  count(source, sentiment) %&gt;%
  spread(source, n) %&gt;%
  mutate(sentiment = replace_na(sentiment, replace = &quot;none&quot;))
sentiment_counts</code></pre>
<p>For each sentiment, we can compute the odds of being in the device: proportion of words with sentiment versus proportion of words without, and then compute the odds ratio comparing the two devices.</p>
<pre class="r"><code>sentiment_counts %&gt;%
  mutate(Android = Android / (sum(Android) - Android) , 
         iPhone = iPhone / (sum(iPhone) - iPhone), 
         or = Android/iPhone) %&gt;%
  arrange(desc(or))</code></pre>
<p>So we do see some differences and the order is interesting: the largest three sentiments are disgust, anger, and negative! But are these differences just due to chance? How does this compare if we are just assigning sentiments at random? To answer this question we can compute, for each sentiment, an odds ratio and a confidence interval, as defined in the textbook <a href="https://rafalab.github.io/dsbook/inference.html#association-tests">(Section - 15.10 Association tests)</a>. We will add the two values we need to form a two-by-two table and the odds ratio:</p>
<pre class="r"><code>library(broom)
log_or &lt;- sentiment_counts %&gt;%
  mutate(log_or = log((Android / (sum(Android) - Android)) / 
      (iPhone / (sum(iPhone) - iPhone))),
          se = sqrt(1/Android + 1/(sum(Android) - Android) + 
                      1/iPhone + 1/(sum(iPhone) - iPhone)),
          conf.low = log_or - qnorm(0.975)*se,
          conf.high = log_or + qnorm(0.975)*se) %&gt;%
  arrange(desc(log_or))
  
log_or</code></pre>
<p>A graphical visualization shows some sentiments that are clearly overrepresented:</p>
<pre class="r"><code>log_or %&gt;%
  mutate(sentiment = reorder(sentiment, log_or)) %&gt;%
  ggplot(aes(x = sentiment, ymin = conf.low, ymax = conf.high)) +
  geom_errorbar() +
  geom_point(aes(sentiment, log_or)) +
  ylab(&quot;Log odds ratio for association between Android and sentiment&quot;) +
  coord_flip() </code></pre>
<p>We see that the disgust, anger, negative, sadness, and fear sentiments are associated with the Android in a way that is hard to explain by chance alone. Words not associated to a sentiment were strongly associated with the iPhone source, which is in agreement with the original claim about hyperbolic tweets.</p>
<p>If we are interested in exploring which specific words are driving these differences, we can refer back to our <code>android_iphone_or</code> object:</p>
<pre class="r"><code>android_iphone_or %&gt;% inner_join(nrc) %&gt;%
  filter(sentiment == &quot;disgust&quot; &amp; Android + iPhone &gt; 10) %&gt;%
  arrange(desc(or))</code></pre>
<p>and we can make a graph:</p>
<pre class="r"><code>android_iphone_or %&gt;% inner_join(nrc, by = &quot;word&quot;) %&gt;%
  mutate(sentiment = factor(sentiment, levels = log_or$sentiment)) %&gt;%
  mutate(log_or = log(or)) %&gt;%
  filter(Android + iPhone &gt; 10 &amp; abs(log_or)&gt;1) %&gt;%
  mutate(word = reorder(word, log_or)) %&gt;%
  ggplot(aes(word, log_or, fill = log_or &lt; 0)) +
  facet_wrap(~sentiment, scales = &quot;free_x&quot;, nrow = 2) + 
  geom_bar(stat=&quot;identity&quot;, show.legend = FALSE) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) </code></pre>
<p>This is just a simple example of the many analyses one can perform with tidytext. To learn more, we again recommend the <a href="https://www.tidytextmining.com/">Tidy Text Mining book</a>.</p>
<div class="infobox">
<p><img src="images/The%20Brain.png" alt="The Brain Logo." style="width:50px;height:50px;" class = "img_left"></p>
<p><strong>Key points:</strong></p>
<hr />
<ul>
<li><p>The <strong>tidytext</strong> package helps us convert free form text into a tidy table.</p></li>
<li><p>Use <code>unnest_tokens()</code> to extract individual words and other meaningful chunks of text.</p></li>
<li><p>Sentiment analysis assigns emotions or a positive/negative score to tokens. You can extract sentiments using <code>get_sentiments()</code>. Common lexicons for sentiment analysis are “bing”, “afinn”, “nrc” and “loughran”.</p></li>
<li><p>With the exception of labels used to represent categorical data, we have focused on numerical data, but in many applications data starts as text. Well known examples are spam filtering, cyber-crime prevention, counter-terrorism and sentiment analysis.</p></li>
<li><p>In all these examples, the raw data is composed of free form texts. Our task is to extract insights from these data. In this section, we learn how to generate useful numerical summaries from text data to which we can apply some of the powerful data visualization and analysis techniques we have learned.</p></li>
</ul>
</div>
</div>
<div id="section-assessment-part-1-dates-times-and-text-mining" class="section level3">
<h3>4.1 Assessment Part 1: Dates, Times, and Text Mining</h3>
<p>Insert Assessment here</p>
</div>
<div id="section-assessment-part-2-dates-times-and-text-mining" class="section level3">
<h3>4.1 Assessment Part 2: Dates, Times, and Text Mining</h3>
<p>Insert Assessment here</p>
</div>
<div id="section-course-final-project" class="section level3">
<h3>Course Final Project</h3>
</div>
<div id="section-part-1" class="section level3">
<h3>Part 1</h3>
<p>Insert Assessment here</p>
</div>
<div id="section-part-2" class="section level3">
<h3>Part 2</h3>
<p>Insert Assessment here</p>
</div>
</div>
<div id="section-acknowledgement" class="section level2">
<h2>Acknowledgement</h2>
<p>I am extremely grateful to <a href="http://rafalab.github.io/pages/about.html">Prof Rafael Irizarry</a> for his support and encouragement to create this interactive tutorial which is based on his freely available textbook <a href="https://rafalab.github.io/dsbook/">Introduction to Data Science</a>. The textbook has been developed as the basis for the associated edX Course Series <em>HarvardX Professional Certificate in Data Science</em> and this tutorial follows the structure of this online course. I’m further very grateful to <a href="https://profiles.sussex.ac.uk/p9846-andy-field">Andy Field</a> for his generous permission to use his <code>discovr</code> package as a basis for the development of this tutorial. Thanks to his amazing <code>discovr</code> package I also indirectly benefited from the work of <a href="https://www.allisonhorst.com/">Allison Horst</a> and her very informative blog post on <a href="https://education.rstudio.com/blog/2020/05/learnr-for-remote/">styling learnr tutorials with CSS</a> as well as her CSS template file which I adapted here.</p>

<script type="application/shiny-prerendered" data-context="server-start">
knitr::opts_chunk$set(
	echo = TRUE,
	message = FALSE,
	warning = FALSE
)

library(learnr) #necessary to render tutorial correctly

library(forcats)
library(ggplot2)
library(htmltools)
library(kableExtra)
library(lubridate)
library(magrittr)
library(tibble)


source("./www/datsci_helpers.R")
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::register_http_handlers(session, metadata = NULL)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
session$onSessionEnded(function() {
        learnr:::session_stop_event(session)
      })
</script>
 <!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/lumen.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["pagedtable"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pagedtable-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/pagedtable.js"]},{"type":"character","attributes":{},"value":["css/pagedtable.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["textmate.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-autocompletion"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-autocompletion.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-diagnostics"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-diagnostics.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-format"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmarkdown/templates/tutorial/resources"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-format.js"]},{"type":"character","attributes":{},"value":["tutorial-format.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["navigation"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/navigation-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tabsets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["default.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["5.1.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.css","css/v4-shims.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootbox"]},{"type":"character","attributes":{},"value":["4.4.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/bootbox"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["bootbox.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["idb-keyvalue"]},{"type":"character","attributes":{},"value":["3.2.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/idb-keyval"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["idb-keyval-iife-compat.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-autocompletion"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-autocompletion.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-diagnostics"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-diagnostics.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96]}},"value":[{"type":"character","attributes":{},"value":["assertthat","backports","base","blob","broom","cellranger","cli","colorspace","compiler","crayon","curl","datasets","DBI","dbplyr","digest","dplyr","dslabs","ellipsis","evaluate","fansi","farver","fastmap","forcats","fs","generics","ggplot2","ggrepel","glue","graphics","grDevices","grid","gtable","haven","hms","htmltools","htmlwidgets","httpuv","httr","janeaustenr","jsonlite","kableExtra","knitr","labeling","later","lattice","learnr","lifecycle","lubridate","magrittr","markdown","Matrix","methods","mgcv","mime","modelr","munsell","nlme","pillar","pkgconfig","promises","purrr","R6","Rcpp","readr","readxl","reprex","rlang","rmarkdown","rprojroot","rstudioapi","rvest","scales","selectr","shiny","SnowballC","splines","stats","stringi","stringr","textdata","tibble","tidyr","tidyselect","tidytext","tidyverse","tokenizers","tools","utils","vctrs","viridisLite","webshot","withr","xfun","xml2","xtable","yaml"]},{"type":"character","attributes":{},"value":["0.2.1","1.1.8","4.0.2","1.2.1","0.7.0","1.1.0","2.0.2","1.4-1","4.0.2","1.3.4","4.3","4.0.2","1.1.0","1.4.4","0.6.25","1.0.0","0.7.3","0.3.1","0.14","0.4.1","2.0.3","1.0.1","0.5.0","1.4.2","0.0.2","3.3.2","0.8.2","1.4.1","4.0.2","4.0.2","4.0.2","0.3.0","2.3.1","0.5.3","0.5.0","1.5.1","1.5.4","1.4.2","0.1.5","1.7.0","1.1.0","1.29","0.3","1.1.0.1","0.20-41","0.10.1","0.2.0","1.7.9","1.5","1.1","1.2-18","4.0.2","1.8-31","0.9","0.1.8","0.5.0","3.1-148","1.4.6","2.0.3","1.1.1","0.3.4","2.4.1","1.0.5","1.3.1","1.3.1","0.3.0","0.4.7","2.3","1.3-2","0.11","0.3.6","1.1.1","0.4-2","1.5.0","0.7.0","4.0.2","4.0.2","1.4.6","1.4.0","0.4.1","3.0.3","1.1.0","1.1.0","0.2.5","1.3.0","0.2.1","4.0.2","4.0.2","0.3.2","0.3.0","0.5.2","2.2.0","0.16","1.3.2","1.8-4","2.2.1"]}]}]}
</script>
<!--/html_preserve-->
</div>
</div>

</div> <!-- topics -->

<div class="topicsContainer">
<div class="topicsPositioner">
<div class="band">
<div class="bandContent topicsListContainer">

<!-- begin doc-metadata -->
<div id="doc-metadata">
<h2 class="title toc-ignore" style="display:none;">datsci_06: Wrangling</h2>
<h4 class="author"><em>Rafael Irizarry &amp; Fatih Uenal</em></h4>
</div>
<!-- end doc-metadata -->

</div> <!-- bandContent.topicsListContainer -->
</div> <!-- band -->
</div> <!-- topicsPositioner -->
</div> <!-- topicsContainer -->


</div> <!-- bandContent page -->
</div> <!-- pageContent band -->




<script>
// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>


</body>

</html>
